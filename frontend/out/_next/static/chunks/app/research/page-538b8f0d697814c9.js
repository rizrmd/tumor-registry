(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9214],{2990:function(e,t,a){Promise.resolve().then(a.bind(a,1937))},1937:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var s=a(7437),n=a(2265),i=a(2849),r=a(4968),o=a(8999);function l(){let{user:e,isAuthenticated:t,isLoading:a}=(0,i.useAuth)(),[l,d]=(0,n.useState)({totalRecords:0,filteredRecords:0,cancerTypes:0,avgAge:0}),[c,m]=(0,n.useState)([]),[g,u]=(0,n.useState)([]),[x,p]=(0,n.useState)({tumorType:"",stage:"",ageMin:"",ageMax:"",gender:"",yearFrom:"",yearTo:""}),[h,y]=(0,n.useState)(!0),[f,j]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!a&&!t){window.location.href="/login";return}t&&v()},[t,a]),(0,n.useEffect)(()=>{b()},[x,c]);let v=async()=>{try{y(!0);let e=await (0,o.X4)({limit:1e3}),t=e.patients,a=t.map(e=>{let t=e.dateOfBirth?Math.floor((new Date().getTime()-new Date(e.dateOfBirth).getTime())/315576e5):0;return{id:e.id,inamsosRecordNumber:e.inamsosRecordNumber||"-",hospitalRecordNumber:e.hospitalRecordNumber||"-",tumorType:"bone_tumor"===e.pathologyType?"Tumor Tulang":"soft_tissue_tumor"===e.pathologyType?"Tumor Jaringan Lunak":e.pathologyType||"Tidak Diketahui",stage:e.ennekingStage||e.ajccStage||"-",age:t,gender:"MALE"===e.gender?"Laki-laki":"FEMALE"===e.gender?"Perempuan":"Lainnya",diagnosisDate:e.onsetDate?new Date(e.onsetDate).toLocaleDateString("id-ID"):"-",pathologyType:e.pathologyType||"-",grade:e.histopathologyGrade||"-"}});m(a),u(a);let s=new Set(a.map(e=>e.tumorType)).size,n=a.length>0?a.reduce((e,t)=>e+t.age,0)/a.length:0;d({totalRecords:a.length,filteredRecords:a.length,cancerTypes:s,avgAge:Math.round(n)})}catch(e){console.error("Error fetching research data:",e),alert("Gagal memuat data. Pastikan Anda sudah login.")}finally{y(!1)}},b=()=>{let e=[...c];x.tumorType&&(e=e.filter(e=>e.tumorType===x.tumorType)),x.stage&&(e=e.filter(e=>e.stage.includes(x.stage))),x.gender&&(e=e.filter(e=>e.gender===x.gender)),x.ageMin&&(e=e.filter(e=>e.age>=parseInt(x.ageMin))),x.ageMax&&(e=e.filter(e=>e.age<=parseInt(x.ageMax))),u(e),d(t=>({...t,filteredRecords:e.length}))},N=(e,t)=>{p(a=>({...a,[e]:t}))};return a||h?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,s.jsxs)(r.A,{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Browse Data Penelitian"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Akses dan analisis data kanker untuk penelitian"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>j(!f),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:[f?"Sembunyikan":"Tampilkan"," Filter"]}),(0,s.jsx)("button",{onClick:()=>{alert("Exporting data...\nFitur ini akan segera diimplementasikan.")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Export Data"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.totalRecords})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Filtered Records"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.filteredRecords})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cancer Types"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.cancerTypes})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Age"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.avgAge})]})]})})]}),f&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Data"}),(0,s.jsx)("button",{onClick:()=>{p({tumorType:"",stage:"",ageMin:"",ageMax:"",gender:"",yearFrom:"",yearTo:""})},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Reset Filter"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipe Patologi"}),(0,s.jsxs)("select",{value:x.tumorType,onChange:e=>N("tumorType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,s.jsx)("option",{value:"",children:"Semua"}),(0,s.jsx)("option",{value:"Tumor Tulang",children:"Tumor Tulang"}),(0,s.jsx)("option",{value:"Tumor Jaringan Lunak",children:"Tumor Jaringan Lunak"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enneking Stage"}),(0,s.jsxs)("select",{value:x.stage,onChange:e=>N("stage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,s.jsx)("option",{value:"",children:"Semua"}),(0,s.jsx)("option",{value:"IA",children:"Enneking IA"}),(0,s.jsx)("option",{value:"IB",children:"Enneking IB"}),(0,s.jsx)("option",{value:"IIA",children:"Enneking IIA"}),(0,s.jsx)("option",{value:"IIB",children:"Enneking IIB"}),(0,s.jsx)("option",{value:"III",children:"Enneking III"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Kelamin"}),(0,s.jsxs)("select",{value:x.gender,onChange:e=>N("gender",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,s.jsx)("option",{value:"",children:"Semua"}),(0,s.jsx)("option",{value:"Laki-laki",children:"Laki-laki"}),(0,s.jsx)("option",{value:"Perempuan",children:"Perempuan"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usia (Min-Max)"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"number",value:x.ageMin,onChange:e=>N("ageMin",e.target.value),placeholder:"Min",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,s.jsx)("input",{type:"number",value:x.ageMax,onChange:e=>N("ageMax",e.target.value),placeholder:"Max",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Hasil Penelusuran (",g.length," records)"]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. MR"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipe Patologi"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usia"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis Kelamin"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Onset"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.inamsosRecordNumber}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.hospitalRecordNumber})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.tumorType})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.stage})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.grade.includes("High")||e.grade.includes("high")?"bg-red-100 text-red-800":e.grade.includes("Low")||e.grade.includes("low")?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.grade})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:[e.age," tahun"]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.gender})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.diagnosisDate})})]},e.id))})]})}),0===g.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"mt-4 text-gray-500",children:"Tidak ada data yang sesuai dengan kriteria filter"})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},8999:function(e,t,a){"use strict";function s(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("token"),n={"Content-Type":"application/json",...t.headers};a&&(n.Authorization="Bearer ".concat(a));let i=await fetch("".concat("http://127.0.0.1:3001/api/v1").concat(e),{...t,headers:n});if(!i.ok){var r,o;if(401===i.status)throw s(),Error("Session expired. Please login again.");let e=await i.json().catch(()=>({message:"HTTP ".concat(i.status,": ").concat(i.statusText)}));if(400===i.status&&(null===(o=e.error)||void 0===o?void 0:null===(r=o.details)||void 0===r?void 0:r.some(e=>"Unauthorized"===e.message)))throw s(),Error("Session expired. Please login again.");throw Error(e.message||"API request failed")}return i.json()}async function i(e){return n("/patients",{method:"POST",body:JSON.stringify(e)})}async function r(e,t){return n("/patients/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async function o(e){return n("/patients/".concat(e))}async function l(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.centerId)&&t.append("centerId",e.centerId),n("/patients?".concat(t.toString()))}async function d(e){return n("/patients/".concat(e),{method:"DELETE"})}a.d(t,{X4:function(){return l}}),t.ZP={create:i,update:r,getById:o,getAll:l,delete:d,transformWizardData:function(e){let t=e.section1||{},a=e.section2||{},s=e.section3||{},n=e.section4||{},i=e.section5||{},r=e.section6||{},o=e.section7||{},l=e.section8||{},d=e.section9||{};return{centerId:t.centerId||"",pathologyType:t.pathologyTypeId,hospitalRecordNumber:a.hospitalRecordNumber||"MR-".concat(Date.now()),nik:a.nik||"",name:a.name||"",dateOfBirth:a.dateOfBirth||"",placeOfBirth:a.placeOfBirth,gender:a.gender||"",bloodType:a.bloodType,religion:a.religion,maritalStatus:a.maritalStatus,occupation:a.occupation,education:a.education,phone:a.phone,email:a.email,address:a.address,province:a.province,regency:a.regency,district:a.district,village:a.village,postalCode:a.postalCode,emergencyContact:a.emergencyContact,chiefComplaint:s.chiefComplaint,symptomOnset:s.symptomOnset,symptomDuration:s.symptomDuration,symptomDurationUnit:s.symptomDurationUnit,presentingSymptoms:s.presentingSymptoms,tumorSize:s.tumorSize,familyHistory:s.familyHistory,tumorSyndromeId:s.tumorSyndromeId,karnofskyScore:s.karnofskyScore,height:s.height,weight:s.weight,bmi:s.bmi,biopsyType:n.biopsyType,biopsyDate:n.biopsyDate,biopsyLocation:n.biopsyLocation,biopsySite:n.biopsySite,imagingStudies:n.imagingStudies,imagingDate:n.imagingDate,imagingFindings:n.imagingFindings,mirrelScore:n.mirrelScore,diagnosisDate:i.diagnosisDate,whoClassificationId:i.whoClassificationId,boneLocationId:i.boneLocationId,softTissueLocationId:i.softTissueLocationId,tumorGrade:i.tumorGrade,histopathology:i.histopathology,stagingSystem:r.stagingSystem,enneking:r.enneking,ajcc:r.ajcc,cpc:o.cpcHeld?{held:o.cpcHeld,date:o.cpcDate,location:o.cpcLocation,participants:o.participants,presentation:o.casePresentation,recommendations:o.recommendations,consensus:o.consensus,notes:o.notes}:void 0,treatment:{surgery:l.surgery,chemotherapy:l.chemotherapy,radiotherapy:l.radiotherapy,overallResponse:l.overallResponse},followUp:{visits:d.visits}}}}},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[1176,4829,2849,4968,2971,2472,1744],function(){return e(e.s=2990)}),_N_E=e.O()}]);