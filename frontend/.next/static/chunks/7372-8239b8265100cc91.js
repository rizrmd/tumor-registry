"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7372],{7372:function(e,s,r){r.d(s,{A:function(){return i}});var a=r(7437),t=r(2265),n=r(4033),l=r(6986);function i(e){var s,r,i;let{children:o}=e,{user:c,logout:d,isLoading:m}=(0,l.useAuth)(),N=(0,n.useRouter)(),E=(0,n.usePathname)(),[A,u]=(0,t.useState)(!1),[x,h]=(0,t.useState)(!1),[f,D]=(0,t.useState)([]),[_,R]=(0,t.useState)(!1),[T,M]=(0,t.useState)(!1),g=async()=>{try{await d(),N.push("/login")}catch(e){console.error("Logout failed:",e)}},I=[{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Data Pasien",href:"/patients",icon:"\uD83D\uDC65",roles:["DATA_ENTRY","MEDICAL_OFFICER","RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER"],submenu:[{name:"Daftar Pasien",href:"/patients",roles:["DATA_ENTRY","MEDICAL_OFFICER","RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER"]},{name:"Entry Data Baru",href:"/patients/new",roles:["DATA_ENTRY","MEDICAL_OFFICER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]}]},{name:"Follow-up & MSTS",href:"/follow-up",icon:"\uD83D\uDCC5",roles:["DATA_ENTRY","MEDICAL_OFFICER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER"],submenu:[{name:"14-Visit Protocol",href:"/follow-up",roles:["DATA_ENTRY","MEDICAL_OFFICER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER"]},{name:"MSTS Calculator",href:"/msts",roles:["DATA_ENTRY","MEDICAL_OFFICER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER"]},{name:"Compliance Tracking",href:"/follow-up/compliance",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]},{name:"Reminder Management",href:"/follow-up/reminders",roles:["DATA_ENTRY","MEDICAL_OFFICER","CENTER_ADMIN","HEAD_OF_CENTER"]}]},{name:"Penelitian",href:"/research",icon:"\uD83D\uDD2C",roles:["RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER","DATA_ENTRY"],submenu:[{name:"Browse Data",href:"/research",roles:["RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER","DATA_ENTRY"]},{name:"Laporan",href:"/reports",roles:["RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER","DATA_ENTRY"]},{name:"Permintaan Data",href:"/research/requests",roles:["RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]}]},{name:"Persetujuan",href:"/approvals",icon:"✅",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"],submenu:[{name:"Antrian Permintaan",href:"/approvals",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]},{name:"Riwayat Persetujuan",href:"/approvals/history",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]}]},{name:"Analytics",href:"/analytics",icon:"\uD83D\uDCC8",roles:["DATA_ENTRY","MEDICAL_OFFICER","RESEARCHER","CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER","OBSERVER"]},{name:"Administrasi",href:"/admin",icon:"⚙️",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"],submenu:[{name:"User Management",href:"/admin/users",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]},{name:"Center Management",href:"/admin/centers",roles:["NATIONAL_ADMIN","SYSTEM_ADMIN"]},{name:"Audit Logs",href:"/admin/audit",roles:["CENTER_ADMIN","NATIONAL_ADMIN","SYSTEM_ADMIN","HEAD_OF_CENTER"]},{name:"Konfigurasi",href:"/admin/config",roles:["NATIONAL_ADMIN","SYSTEM_ADMIN"]}]},{name:"Pengaturan",href:"/settings",icon:"\uD83D\uDD27"}],p=I.filter(e=>!e.roles||(null==c?void 0:c.role)&&e.roles.includes(c.role)),C=e=>{D(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},b=e=>e.href===E||!!e.submenu&&e.submenu.some(e=>e.href===E);return t.useEffect(()=>{let e=I.find(e=>!!e.submenu&&e.submenu.some(e=>e.href===E));e&&!f.includes(e.name)&&D(s=>[...s,e.name]),M(!0)},[E]),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[_&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Loading..."})]})})}),A&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>u(!1)}),(0,a.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-200 ease-in-out lg:relative lg:translate-x-0 ".concat(A?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 px-4 bg-emerald-600 border-b border-emerald-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-emerald-600 font-bold text-lg",children:"I"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-white font-bold text-lg",children:"INAMSOS"}),(0,a.jsx)("p",{className:"text-emerald-100 text-xs",children:"Musculoskeletal Tumor Registry"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:m?(0,a.jsx)("div",{className:"space-y-3 animate-pulse",children:[1,2,3,4,5,6].map(e=>(0,a.jsxs)("div",{className:"flex items-center px-3 py-2 space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-100 rounded w-24"})]},e))}):p.map(e=>{let s=b(e),r=e.submenu&&e.submenu.length>0,t=f.includes(e.name);return(0,a.jsxs)("div",{children:[r?(0,a.jsxs)("button",{onClick:()=>C(e.name),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg group ".concat(s?"bg-emerald-100 text-emerald-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),e.name]}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(t?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}):(0,a.jsxs)("a",{href:e.href,className:"flex items-center px-3 py-2 text-sm font-medium rounded-lg group ".concat(s?"bg-emerald-100 text-emerald-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"),onClick:()=>u(!1),children:[(0,a.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),e.name]}),r&&t&&(0,a.jsx)("div",{className:"ml-6 mt-1 space-y-1",children:e.submenu.filter(e=>!e.roles||(null==c?void 0:c.role)&&e.roles.includes(c.role)).map(e=>{let s=E===e.href;return(0,a.jsx)("a",{href:e.href,className:"flex items-center px-3 py-2 text-sm rounded-lg ".concat(s?"bg-emerald-50 text-emerald-700 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),onClick:()=>u(!1),children:e.name},e.name)})})]},e.name)})}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-emerald-600 text-sm font-medium",children:null==c?void 0:null===(s=c.name)||void 0===s?void 0:s.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null==c?void 0:c.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:(null==c?void 0:c.role)&&(({data_entry:"Data Entry",doctor:"Dokter",nurse:"Perawat",researcher:"Peneliti",admin:"Administrator",super_admin:"Super Admin",national_stakeholder:"Stakeholder Nasional",SYSTEM_ADMIN:"System Administrator",NATIONAL_ADMIN:"National Administrator",CENTER_ADMIN:"Center Administrator",RESEARCHER:"Researcher",DATA_ENTRY:"Data Entry",MEDICAL_OFFICER:"Medical Officer",HEAD_OF_CENTER:"Kepala Center",OBSERVER:"Observer"})[i=c.role]||i)}),(null==c?void 0:c.centerName)&&(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:c.centerName})]})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col lg:pl-0",children:[(0,a.jsx)("div",{className:"sticky top-0 z-40 bg-white shadow-sm border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"flex items-center lg:hidden",children:(0,a.jsx)("button",{type:"button",className:"text-gray-500 hover:text-gray-600 focus:outline-none focus:text-gray-600",onClick:()=>u(!A),children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-between",children:(0,a.jsx)("div",{className:"max-w-lg",children:(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:(()=>{let e=I.find(e=>e.href===E);if(e)return e.name;for(let e of I)if(e.submenu){let s=e.submenu.find(e=>e.href===E);if(s)return s.name}return"Dashboard"})()})})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{type:"button",className:"flex items-center space-x-3 text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 p-2",onClick:()=>h(!x),children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-emerald-600 text-sm font-medium",children:null==c?void 0:null===(r=c.name)||void 0===r?void 0:r.charAt(0).toUpperCase()})}),(0,a.jsx)("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:null==c?void 0:c.name}),(0,a.jsx)("svg",{className:"hidden md:block h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-50 border border-gray-200",children:[(0,a.jsx)("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>h(!1),children:"Profil Saya"}),(0,a.jsx)("a",{href:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>h(!1),children:"Pengaturan"}),(0,a.jsx)("hr",{className:"my-1 border-gray-200"}),(0,a.jsx)("button",{type:"button",className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:g,children:"Keluar"})]})]})})]})}),(0,a.jsx)("main",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:o})]})]})}}}]);