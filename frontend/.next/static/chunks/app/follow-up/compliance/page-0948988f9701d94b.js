(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1710],{8103:function(e,t,s){Promise.resolve().then(s.bind(s,1379))},1379:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),l=s(2265),i=s(6986),n=s(7372),r=s(776),c=s(4033);function d(){let{user:e,isAuthenticated:t,isLoading:s}=(0,i.useAuth)(),d=(0,c.useRouter)(),[o,m]=(0,l.useState)(!0),[x,h]=(0,l.useState)([]),[u,p]=(0,l.useState)(0),[g,f]=(0,l.useState)(0),[j,y]=(0,l.useState)(0),[N,b]=(0,l.useState)("30d");(0,l.useEffect)(()=>{if(!s&&!t){d.push("/login");return}t&&w()},[t,s,d,N]);let w=async()=>{try{m(!0);let e=await r.Z.getAllVisits();h(e);let t=new Date,s=e.filter(e=>"completed"===e.status||new Date(e.scheduledDate)<=t),a=e.filter(e=>"completed"===e.status).length,l=s.length;p(l>0?Math.round(a/l*100):0);let i=e.filter(e=>{let s=new Date(e.scheduledDate);return"scheduled"===e.status&&s<t});if(i.length>0){let e=i.reduce((e,s)=>{let a=new Date(s.scheduledDate),l=t.getTime()-a.getTime();return e+Math.ceil(l/864e5)},0);f(Math.round(e/i.length))}else f(0);let n=new Date;n.setMonth(n.getMonth()-6);let c=new Set(e.filter(e=>new Date(e.scheduledDate)>n).map(e=>e.patientId)),d=new Set(e.map(e=>e.patientId)).size-c.size;y(d)}catch(e){console.error("Error loading compliance data:",e)}finally{m(!1)}},v=e=>e>=90?"text-green-600":e>=75?"text-yellow-600":"text-red-600",k=e=>e>=90?"bg-green-100 text-green-800":e>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",D=(()=>{let e=[];for(let t=1;t<=14;t++){let s=x.filter(e=>e.visitNumber===t),a=s.filter(e=>"completed"===e.status),l=s.length>0?Math.round(a.length/s.length*100):0;e.push({visitNumber:t,total:s.length,completed:a.length,rate:l})}return e})();return s||o?(0,a.jsx)(n.A,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading compliance data..."})]})})}):(0,a.jsxs)(n.A,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Follow-up Compliance Tracking"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitor adherence to 14-visit follow-up protocol"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:N,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 Days"}),(0,a.jsx)("option",{value:"1y",children:"Last Year"}),(0,a.jsx)("option",{value:"all",children:"All Time"})]})})]})}),(0,a.jsx)("div",{className:"bg-emerald-50 border-l-4 border-emerald-400 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl",children:"⭐"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-emerald-900 mb-1",children:"Pentingnya Compliance Tracking"}),(0,a.jsxs)("p",{className:"text-sm text-emerald-800",children:["Monitoring kepatuhan follow-up sangat krusial untuk ",(0,a.jsx)("strong",{children:"deteksi dini rekurensi tumor"}),", ",(0,a.jsx)("strong",{children:"evaluasi efektivitas pengobatan"}),", dan ",(0,a.jsx)("strong",{children:"menjaga validitas data penelitian"}),". Compliance rate yang tinggi (>90%) memastikan data registry berkualitas tinggi dan dapat digunakan untuk publikasi internasional serta perbaikan protokol klinis."]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Overall Compliance Rate"}),(0,a.jsx)("span",{className:"text-2xl",children:"✅"})]}),(0,a.jsxs)("div",{className:"text-4xl font-bold ".concat(v(u)),children:[u,"%"]}),(0,a.jsx)("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full ".concat(u>=90?"bg-green-500":u>=75?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(u,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[x.filter(e=>"completed"===e.status).length," of ",x.length," visits completed"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Average Days Late"}),(0,a.jsx)("span",{className:"text-2xl",children:"⏱️"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold ".concat(g>7?"text-red-600":"text-green-600"),children:g}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:g>7?"Needs improvement":"Within acceptable range"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Lost to Follow-up"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEAB"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold ".concat(j>0?"text-red-600":"text-green-600"),children:j}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Patients with no visit in last 6 months"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Compliance by Visit Number"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visit Number"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedule"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Visits"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compliance Rate"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{let t=e.visitNumber<=8?"Month ".concat(3*e.visitNumber):"Month ".concat(24+(e.visitNumber-8)*6);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"px-3 py-1 text-sm font-semibold rounded-full bg-purple-100 text-purple-800",children:["Visit #",e.visitNumber]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.total}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.completed}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(e.rate>=90?"bg-green-500":e.rate>=75?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.rate,"%")}})}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(v(e.rate)),children:[e.rate,"%"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(k(e.rate)),children:e.rate>=90?"Excellent":e.rate>=75?"Good":"Needs Improvement"})})]},e.visitNumber)})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Compliance Trend (Year 1-5)"}),(0,a.jsx)("div",{className:"flex items-end space-x-2 h-64",children:D.map(e=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center group h-full justify-end",children:[(0,a.jsx)("div",{className:"w-full rounded-t ".concat(e.rate>=90?"bg-green-500":e.rate>=75?"bg-yellow-500":"bg-red-500"," hover:opacity-75 transition-opacity cursor-pointer relative group-hover:scale-110"),style:{height:"".concat(Math.max(e.rate,5),"%")},title:"Visit ".concat(e.visitNumber,": ").concat(e.rate,"%"),children:(0,a.jsxs)("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[e.rate,"%"]})}),(0,a.jsxs)("div",{className:"mt-2 text-xs font-medium text-gray-600",children:["V",e.visitNumber]})]},e.visitNumber))}),(0,a.jsxs)("div",{className:"flex justify-between mt-4 text-sm text-gray-500",children:[(0,a.jsx)("span",{children:"Year 1-2 (Q3M)"}),(0,a.jsx)("span",{children:"Year 3-5 (Q6M)"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"\uD83D\uDCCB Recommendations"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-blue-800",children:[u>=90?(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83C\uDFC6"}),(0,a.jsx)("span",{className:"font-semibold text-green-800",children:"Excellent compliance! Data is of high quality and suitable for international publications (e.g., JCO, Lancet Oncology standards)."})]}):(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),(0,a.jsx)("span",{children:"Overall compliance is below 90%. Focus on increasing retention to ensure research validity for international publications."})]}),u<90&&(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),(0,a.jsx)("span",{children:"Consider implementing the Automated SMS/Email Reminder System to reduce missed visits."})]}),g>7&&(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),(0,a.jsx)("span",{children:"Average delay exceeds 7 days. Late visits increase the risk of missing early recurrence detection."})]}),j>0&&(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),(0,a.jsxs)("span",{className:"font-semibold text-red-800",children:[j," patient(s) lost to follow-up. These missing data points weaken statistical power for registry research."]})]}),D.some(e=>e.visitNumber>10&&e.rate<75)&&(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),(0,a.jsx)("span",{children:"Late-stage visits (Year 3-5) showing low compliance. Focus retention efforts on long-term follow-up."})]})]})]})]})}},776:function(e,t,s){"use strict";var a=s(6383);class l{async generateSchedule(e){return(await a.Z.post("/follow-ups/generate-schedule",e)).data}async createVisit(e){return(await a.Z.post("/follow-ups",e)).data}async getAllVisits(e,t){let s={};return e&&(s.patientId=e),t&&(s.status=t),(await a.Z.get("/follow-ups",{params:s})).data}async getVisitById(e){return(await a.Z.get("/follow-ups/".concat(e))).data}async getVisitsByPatient(e){return(await a.Z.get("/follow-ups/patient/".concat(e))).data}async getPatientSummary(e){return(await a.Z.get("/follow-ups/patient/".concat(e,"/summary"))).data}async updateVisit(e,t){return(await a.Z.put("/follow-ups/".concat(e),t)).data}async deleteVisit(e){await a.Z.delete("/follow-ups/".concat(e))}getStatusColor(e){return({scheduled:"blue",completed:"green",missed:"red",cancelled:"gray"})[e]||"gray"}getClinicalStatusColor(e){return({NED:"green",AWD:"yellow",DOD:"red",DOC:"gray"})[e||""]||"gray"}}t.Z=new l},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[4737,1956,7372,2971,4938,1744],function(){return e(e.s=8103)}),_N_E=e.O()}]);