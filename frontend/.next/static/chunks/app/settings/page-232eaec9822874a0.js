(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{6555:function(e,s,t){Promise.resolve().then(t.bind(t,1077))},1077:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),n=t(1396),l=t.n(n),r=t(7372),i=t(6986),c=t(7301);function d(){let{user:e}=(0,i.useAuth)(),{statistics:s,isSyncing:t,triggerFullSync:n}=(0,c.useSync)();return(0,a.jsxs)(r.A,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Pengaturan"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Kelola pengaturan akun dan preferensi Anda"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Profil"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),(0,a.jsx)("input",{type:"text",defaultValue:null==e?void 0:e.name,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{type:"email",defaultValue:null==e?void 0:e.email,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-50",disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,a.jsx)("input",{type:"text",defaultValue:null==e?void 0:e.role,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-50",disabled:!0})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700",children:"Simpan Perubahan"})})]}),s&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Sinkronisasi Data"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Kelola sinkronisasi data offline dengan server pusat"})]}),(0,a.jsx)(l(),{href:"/sync/conflicts",className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"Lihat Detail â†’"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-emerald-600 font-medium uppercase",children:"Tersinkron"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-emerald-700",children:s.synced})]}),(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-yellow-600 font-medium uppercase",children:"Menunggu"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-700",children:s.pending})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(s.conflict>0?"bg-orange-100":"bg-orange-50"),children:[(0,a.jsx)("p",{className:"text-xs text-orange-600 font-medium uppercase",children:"Konflik"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:s.conflict})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(s.failed>0?"bg-red-100":"bg-red-50"),children:[(0,a.jsx)("p",{className:"text-xs text-red-600 font-medium uppercase",children:"Gagal"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-700",children:s.failed})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:n,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Menyinkronkan..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,a.jsx)("span",{children:"Sinkronkan Sekarang"})]})}),(s.conflict>0||s.failed>0)&&(0,a.jsxs)(l(),{href:"/sync/conflicts",className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsxs)("span",{children:["Selesaikan Masalah (",s.conflict+s.failed,")"]})]})]}),(s.conflict>0||s.failed>0)&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-900",children:"Perhatian Diperlukan"}),(0,a.jsxs)("p",{className:"text-sm text-orange-700 mt-1",children:["Terdapat ",s.conflict," konflik dan ",s.failed," item gagal sinkron. Silakan selesaikan untuk memastikan data Anda tersinkron dengan baik."]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Keamanan"}),(0,a.jsx)("button",{className:"text-emerald-600 hover:text-emerald-700",children:"Ubah Password"})]})]})]})}},7301:function(e,s,t){"use strict";t.r(s),t.d(s,{SyncProvider:function(){return d},useSync:function(){return o}});var a=t(7437),n=t(2265),l=t(7841),r=t(6986);let i=(0,n.createContext)(void 0),c={phase:"idle",phaseProgress:0,dataPushed:0,dataPulled:0,filesSynced:0,totalFiles:0};function d(e){let{children:s}=e,{user:t}=(0,r.useAuth)(),[d,o]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(!1),[f,g]=(0,n.useState)(c),[p,y]=(0,n.useState)(null),[b,j]=(0,n.useState)(null),v=(0,n.useRef)(null),w=(0,n.useRef)(null),N=(0,n.useCallback)(async()=>{if(t)try{let e=await l.Rb.getStatistics();o(e),j(null),e.processing>0?h(!0):x&&0===e.processing&&(h(!1),y(new Date))}catch(e){console.error("Failed to fetch sync statistics:",e),j(e.message||"Failed to fetch sync status")}},[t,x]),k=(0,n.useCallback)(async()=>{if(t)try{let e=await l.Rb.getFullSyncStatus();m(e)}catch(e){console.error("Failed to fetch full sync status:",e)}},[t]),S=async()=>{if(!x){h(!0),j(null);try{await l.Rb.syncAll(),await N(),y(new Date)}catch(e){console.error("Manual sync failed:",e),j(e.message||"Manual sync failed")}finally{h(!1)}}},E=async()=>{if(!x){h(!0),j(null),g({...c,phase:"push"});try{w.current=setInterval(async()=>{await k()},1e3),await l.Rb.runFullSync(),g({...c,phase:"complete"}),await N(),await k(),y(new Date)}catch(e){console.error("Full sync failed:",e),j(e.message||"Full sync failed"),g({...c,phase:"error"})}finally{h(!1),w.current&&(clearInterval(w.current),w.current=null)}}};return(0,n.useEffect)(()=>{if(!u||!x)return;let{dataSync:e,fileSync:s,isOnline:t}=u,a="idle";t?e.processing>0?a="push":s.inProgress>0||s.pending>0?a="files":0===e.pending&&0===s.pending&&(a="complete"):a="error",g(t=>({...t,phase:a,dataPushed:e.synced,dataPulled:e.synced,filesSynced:s.completed,totalFiles:s.completed+s.pending+s.inProgress,currentFile:s.currentFile,phaseProgress:s.currentProgress||0}))},[u,x]),(0,n.useEffect)(()=>(t?(N(),k(),v.current=setInterval(()=>{N(),k()},3e4)):(v.current&&(clearInterval(v.current),v.current=null),o(null),m(null)),()=>{v.current&&clearInterval(v.current),w.current&&clearInterval(w.current)}),[t,N,k]),(0,a.jsx)(i.Provider,{value:{statistics:d,fullSyncStatus:u,isSyncing:x,syncProgress:f,lastSyncedAt:p,error:b,triggerSync:S,triggerFullSync:E,refreshStatistics:N},children:s})}function o(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useSync must be used within a SyncProvider");return e}},7841:function(e,s,t){"use strict";t.d(s,{Rb:function(){return r},Wp:function(){return n}});var a,n,l=t(6383);(a=n||(n={})).USE_LOCAL="USE_LOCAL",a.USE_REMOTE="USE_REMOTE",a.MERGE="MERGE",a.MANUAL="MANUAL";let r={getStatistics:async()=>(await l.Z.get("/offline-queue/statistics")).data,getQueueItems:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(await l.Z.get("/offline-queue/pending",{params:{limit:e}})).data},resolveConflict:async(e,s,t)=>(await l.Z.put("/offline-queue/".concat(e,"/resolve-conflict"),{resolution:s,mergedData:t})).data,retryItem:async e=>(await l.Z.put("/offline-queue/".concat(e,"/retry"))).data,syncAll:async()=>(await l.Z.post("/offline-queue/sync-all")).data,runFullSync:async()=>(await l.Z.post("/offline-queue/full-sync")).data,getFullSyncStatus:async()=>(await l.Z.get("/offline-queue/full-sync-status")).data,getFileSyncStatus:async()=>(await l.Z.get("/offline-queue/files/status")).data,syncFiles:async()=>(await l.Z.post("/offline-queue/files/sync")).data,getPendingFiles:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(await l.Z.get("/offline-queue/files/pending",{params:{limit:e}})).data}}},4033:function(e,s,t){e.exports=t(5313)}},function(e){e.O(0,[4737,1396,1956,7372,2971,4938,1744],function(){return e(e.s=6555)}),_N_E=e.O()}]);