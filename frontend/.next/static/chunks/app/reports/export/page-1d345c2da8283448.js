(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3311],{1832:function(e,a,t){Promise.resolve().then(t.bind(t,4465))},4465:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return l}});var n=t(7437),s=t(2265),r=t(6986),i=t(7372);function l(){var e;let{user:a,isAuthenticated:t,isLoading:l}=(0,r.useAuth)(),[d,c]=(0,s.useState)(!0),[o,m]=(0,s.useState)("excel"),[g,x]=(0,s.useState)("2025-01-01"),[u,h]=(0,s.useState)("2025-11-22"),[p,y]=(0,s.useState)([]),[j,v]=(0,s.useState)({cancerType:"all",ageRange:"all",gender:"all",province:"all"}),[f,b]=(0,s.useState)(!1),[N,k]=(0,s.useState)(0),[_,S]=(0,s.useState)(!1),[w,P]=(0,s.useState)([]),D=[{id:"csv",name:"CSV",icon:"\uD83D\uDCC4",description:"Comma-separated values"},{id:"excel",name:"Excel",icon:"\uD83D\uDCCA",description:"Microsoft Excel (.xlsx)"},{id:"pdf",name:"PDF",icon:"\uD83D\uDCD5",description:"Portable Document Format"},{id:"json",name:"JSON",icon:"\uD83D\uDCCB",description:"JavaScript Object Notation"},{id:"spss",name:"SPSS",icon:"\uD83D\uDCC8",description:"SPSS Statistics (.sav)"},{id:"stata",name:"Stata",icon:"\uD83D\uDCC9",description:"Stata Data (.dta)"}],C=[{id:"patient_id",name:"ID Pasien",category:"Identitas"},{id:"patient_name",name:"Nama Pasien",category:"Identitas"},{id:"birth_date",name:"Tanggal Lahir",category:"Identitas"},{id:"gender",name:"Jenis Kelamin",category:"Identitas"},{id:"address",name:"Alamat",category:"Identitas"},{id:"province",name:"Provinsi",category:"Identitas"},{id:"diagnosis_date",name:"Tanggal Diagnosis",category:"Diagnosis"},{id:"cancer_type",name:"Jenis Kanker",category:"Diagnosis"},{id:"cancer_stage",name:"Stadium Kanker",category:"Diagnosis"},{id:"histology",name:"Histologi",category:"Diagnosis"},{id:"topography",name:"Topografi",category:"Diagnosis"},{id:"treatment_type",name:"Jenis Pengobatan",category:"Pengobatan"},{id:"treatment_date",name:"Tanggal Pengobatan",category:"Pengobatan"},{id:"chemotherapy",name:"Kemoterapi",category:"Pengobatan"},{id:"radiotherapy",name:"Radioterapi",category:"Pengobatan"},{id:"surgery",name:"Pembedahan",category:"Pengobatan"},{id:"outcome",name:"Outcome",category:"Follow-up"},{id:"survival_status",name:"Status Hidup",category:"Follow-up"},{id:"last_contact",name:"Kontak Terakhir",category:"Follow-up"},{id:"center_name",name:"Nama Pusat",category:"Administrasi"},{id:"registrar",name:"Registrar",category:"Administrasi"}],I=[{patient_id:"PT-2025-001",patient_name:"Siti Aminah",gender:"Perempuan",cancer_type:"Kanker Payudara",diagnosis_date:"2025-03-15",cancer_stage:"Stadium II",province:"Jawa Barat"},{patient_id:"PT-2025-002",patient_name:"Budi Santoso",gender:"Laki-laki",cancer_type:"Kanker Paru",diagnosis_date:"2025-04-20",cancer_stage:"Stadium III",province:"DKI Jakarta"},{patient_id:"PT-2025-003",patient_name:"Rina Kartika",gender:"Perempuan",cancer_type:"Kanker Serviks",diagnosis_date:"2025-05-10",cancer_stage:"Stadium I",province:"Jawa Tengah"},{patient_id:"PT-2025-004",patient_name:"Ahmad Wijaya",gender:"Laki-laki",cancer_type:"Kanker Kolorektal",diagnosis_date:"2025-06-05",cancer_stage:"Stadium II",province:"Jawa Timur"},{patient_id:"PT-2025-005",patient_name:"Dewi Lestari",gender:"Perempuan",cancer_type:"Kanker Ovarium",diagnosis_date:"2025-07-12",cancer_stage:"Stadium III",province:"Bali"},{patient_id:"PT-2025-006",patient_name:"Hendra Gunawan",gender:"Laki-laki",cancer_type:"Kanker Hati",diagnosis_date:"2025-08-08",cancer_stage:"Stadium IV",province:"Sumatera Utara"},{patient_id:"PT-2025-007",patient_name:"Lina Marlina",gender:"Perempuan",cancer_type:"Kanker Payudara",diagnosis_date:"2025-09-14",cancer_stage:"Stadium I",province:"Sulawesi Selatan"},{patient_id:"PT-2025-008",patient_name:"Eko Prasetyo",gender:"Laki-laki",cancer_type:"Kanker Prostat",diagnosis_date:"2025-10-03",cancer_stage:"Stadium II",province:"Kalimantan Timur"},{patient_id:"PT-2025-009",patient_name:"Maya Sari",gender:"Perempuan",cancer_type:"Kanker Tiroid",diagnosis_date:"2025-10-18",cancer_stage:"Stadium I",province:"Jawa Barat"},{patient_id:"PT-2025-010",patient_name:"Tono Sucipto",gender:"Laki-laki",cancer_type:"Kanker Lambung",diagnosis_date:"2025-11-02",cancer_stage:"Stadium III",province:"DKI Jakarta"}];(0,s.useEffect)(()=>{if(!l&&!t){window.location.href="/login";return}t&&(K(),y(C.map(e=>e.id)))},[t,l]);let K=async()=>{try{c(!0),P([{id:"EXP-001",fileName:"cancer_data_2025_full.xlsx",format:"Excel",exportedAt:"2025-11-22 14:30",exportedBy:"Dr. Siti Nurhaliza",fileSize:"8.4 MB",recordCount:1247},{id:"EXP-002",fileName:"breast_cancer_patients.csv",format:"CSV",exportedAt:"2025-11-21 10:15",exportedBy:"Dr. Budi Santoso",fileSize:"2.1 MB",recordCount:342},{id:"EXP-003",fileName:"quarterly_report_Q4.pdf",format:"PDF",exportedAt:"2025-11-20 16:45",exportedBy:"Admin RSCM",fileSize:"1.8 MB",recordCount:856},{id:"EXP-004",fileName:"research_dataset.sav",format:"SPSS",exportedAt:"2025-11-19 09:00",exportedBy:"Dr. Ahmad Wijaya",fileSize:"12.3 MB",recordCount:2105},{id:"EXP-005",fileName:"survival_analysis.dta",format:"Stata",exportedAt:"2025-11-18 13:20",exportedBy:"Dr. Rina Kartika",fileSize:"5.7 MB",recordCount:987}])}catch(e){console.error("Error fetching export history:",e)}finally{c(!1)}},T=e=>{y(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},E=e=>{let a=C.filter(a=>a.category===e).map(e=>e.id);a.every(e=>p.includes(e))?y(e=>e.filter(e=>!a.includes(e))):y(e=>Array.from(new Set([...e,...a])))},B=async()=>{if(0===p.length){alert("Silakan pilih minimal 1 field untuk diekspor");return}S(!0),k(0);let e=setInterval(()=>{k(a=>{if(a>=100){var t;return clearInterval(e),S(!1),alert("Data berhasil diekspor!\nFormat: ".concat(null===(t=D.find(e=>e.id===o))||void 0===t?void 0:t.name,"\nJumlah records: ").concat(I.length,"\nFields: ").concat(p.length)),100}return a+10})},300)},J=Array.from(new Set(C.map(e=>e.category)));return l||d?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,n.jsxs)(i.A,{children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Export Data"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Export data kanker ke berbagai format untuk analisis dan pelaporan"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"1. Pilih Format Export"}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:D.map(e=>(0,n.jsxs)("button",{onClick:()=>m(e.id),className:"p-4 border-2 rounded-lg transition-all text-left ".concat(o===e.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"),children:[(0,n.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,n.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},e.id))})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"2. Pilih Rentang Waktu"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dari Tanggal"}),(0,n.jsx)("input",{type:"date",value:g,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sampai Tanggal"}),(0,n.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"3. Filter Pasien"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Kanker"}),(0,n.jsxs)("select",{value:j.cancerType,onChange:e=>v({...j,cancerType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,n.jsx)("option",{value:"all",children:"Semua Jenis"}),(0,n.jsx)("option",{value:"breast",children:"Kanker Payudara"}),(0,n.jsx)("option",{value:"cervical",children:"Kanker Serviks"}),(0,n.jsx)("option",{value:"lung",children:"Kanker Paru"}),(0,n.jsx)("option",{value:"colorectal",children:"Kanker Kolorektal"}),(0,n.jsx)("option",{value:"liver",children:"Kanker Hati"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rentang Usia"}),(0,n.jsxs)("select",{value:j.ageRange,onChange:e=>v({...j,ageRange:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,n.jsx)("option",{value:"all",children:"Semua Usia"}),(0,n.jsx)("option",{value:"0-17",children:"0-17 tahun"}),(0,n.jsx)("option",{value:"18-39",children:"18-39 tahun"}),(0,n.jsx)("option",{value:"40-59",children:"40-59 tahun"}),(0,n.jsx)("option",{value:"60+",children:"60+ tahun"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Kelamin"}),(0,n.jsxs)("select",{value:j.gender,onChange:e=>v({...j,gender:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,n.jsx)("option",{value:"all",children:"Semua"}),(0,n.jsx)("option",{value:"male",children:"Laki-laki"}),(0,n.jsx)("option",{value:"female",children:"Perempuan"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provinsi"}),(0,n.jsxs)("select",{value:j.province,onChange:e=>v({...j,province:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,n.jsx)("option",{value:"all",children:"Semua Provinsi"}),(0,n.jsx)("option",{value:"dki",children:"DKI Jakarta"}),(0,n.jsx)("option",{value:"jabar",children:"Jawa Barat"}),(0,n.jsx)("option",{value:"jateng",children:"Jawa Tengah"}),(0,n.jsx)("option",{value:"jatim",children:"Jawa Timur"}),(0,n.jsx)("option",{value:"bali",children:"Bali"})]})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"4. Pilih Field Data"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>{y(C.map(e=>e.id))},className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"Pilih Semua"}),(0,n.jsx)("span",{className:"text-gray-300",children:"|"}),(0,n.jsx)("button",{onClick:()=>{y([])},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Hapus Semua"})]})]}),(0,n.jsx)("div",{className:"space-y-4",children:J.map(e=>{let a=C.filter(a=>a.category===e),t=a.every(e=>p.includes(e.id));return(0,n.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsxs)("button",{onClick:()=>E(e),className:"flex items-center space-x-2 font-medium text-gray-900 hover:text-green-600",children:[(0,n.jsx)("input",{type:"checkbox",checked:t,onChange:()=>{},className:"h-4 w-4 text-green-600 rounded"}),(0,n.jsx)("span",{children:e})]}),(0,n.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",a.filter(e=>p.includes(e.id)).length,"/",a.length,")"]})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 ml-6",children:a.map(e=>(0,n.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:p.includes(e.id),onChange:()=>T(e.id),className:"h-4 w-4 text-green-600 rounded"}),(0,n.jsx)("span",{className:"text-gray-700",children:e.name})]},e.id))})]},e)})}),(0,n.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,n.jsxs)("p",{className:"text-sm text-green-800",children:[(0,n.jsx)("strong",{children:p.length})," field dipilih dari ",(0,n.jsx)("strong",{children:C.length})," field tersedia"]})})]}),f&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pratinjau Data (10 baris pertama)"}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsx)("tr",{children:p.slice(0,7).map(e=>{let a=C.find(a=>a.id===e);return(0,n.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:null==a?void 0:a.name},e)})})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map((e,a)=>(0,n.jsx)("tr",{className:"hover:bg-gray-50",children:p.slice(0,7).map(a=>(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-gray-900",children:e[a]||"-"},a))},a))})]})}),p.length>7&&(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Menampilkan 7 dari ",p.length," field. Export penuh akan berisi semua field."]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("button",{onClick:()=>b(!f),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[f?"Sembunyikan":"Tampilkan"," Pratinjau"]}),(0,n.jsx)("button",{onClick:B,disabled:_||0===p.length,className:"px-8 py-3 rounded-lg font-medium transition-colors ".concat(_||0===p.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:_?"Mengekspor...":"Export Data"})]}),_&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,n.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(N,"%")}})}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 mt-2 text-center",children:[N,"% - Sedang mengekspor data..."]})]})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ringkasan Export"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Format:"}),(0,n.jsx)("span",{className:"font-medium text-gray-900",children:null===(e=D.find(e=>e.id===o))||void 0===e?void 0:e.name})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Rentang Tanggal:"}),(0,n.jsxs)("span",{className:"font-medium text-gray-900 text-right",children:[g," s/d ",u]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Field Dipilih:"}),(0,n.jsxs)("span",{className:"font-medium text-gray-900",children:[p.length," / ",C.length]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Est. Records:"}),(0,n.jsx)("span",{className:"font-medium text-gray-900",children:"~1,247"})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Est. File Size:"}),(0,n.jsx)("span",{className:"font-medium text-gray-900",children:"~8.4 MB"})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Riwayat Export"}),(0,n.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,n.jsx)("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.fileName}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.format," - ",e.recordCount.toLocaleString()," records"]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:e.exportedAt})]}),(0,n.jsx)("button",{onClick:()=>alert("Download: ".concat(e.fileName,"\nSize: ").concat(e.fileSize)),className:"text-green-600 hover:text-green-700",title:"Download",children:(0,n.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})},e.id))})]})]})]})]}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},4033:function(e,a,t){e.exports=t(5313)}},function(e){e.O(0,[4737,1956,7372,2971,4938,1744],function(){return e(e.s=1832)}),_N_E=e.O()}]);