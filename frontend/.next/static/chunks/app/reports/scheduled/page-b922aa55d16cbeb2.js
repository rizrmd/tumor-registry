(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{8663:function(e,a,s){Promise.resolve().then(s.bind(s,3107))},3107:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return l}});var t=s(7437),r=s(2265),n=s(2849),i=s(4968);function l(){let{user:e,isAuthenticated:a,isLoading:s}=(0,n.useAuth)(),[l,d]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[p,g]=(0,r.useState)({name:"",reportType:"",schedule:"weekly",recipients:"",status:"active"});(0,r.useEffect)(()=>{if(!s&&!a){window.location.href="/login";return}a&&j()},[a,s]);let j=async()=>{try{o(!0),d([{id:"SCH-001",name:"Laporan Insidensi Mingguan",schedule:"weekly",nextRun:"2025-11-29 08:00",recipients:["dr.siti@rscm.co.id","admin@kemenkes.go.id"],status:"active",lastRun:"2025-11-22 08:00",reportType:"Epidemiologi"},{id:"SCH-002",name:"Kualitas Data Bulanan",schedule:"monthly",nextRun:"2025-12-01 09:00",recipients:["dr.budi@dharmais.co.id","quality@inamsos.id"],status:"active",lastRun:"2025-11-01 09:00",reportType:"Kualitas"},{id:"SCH-003",name:"Dashboard Eksekutif Harian",schedule:"daily",nextRun:"2025-11-23 07:00",recipients:["direktur@rscm.co.id","kabid@kemenkes.go.id"],status:"active",lastRun:"2025-11-22 07:00",reportType:"Administrasi"},{id:"SCH-004",name:"Analisis Treatment Outcomes",schedule:"monthly",nextRun:"2025-12-15 10:00",recipients:["dr.ahmad@rscm.co.id","research@inamsos.id"],status:"active",lastRun:"2025-11-15 10:00",reportType:"Klinis"},{id:"SCH-005",name:"Distribusi Geografis Kasus",schedule:"weekly",nextRun:"2025-11-30 11:00",recipients:["dr.rina@dharmais.co.id","epidemio@kemenkes.go.id"],status:"inactive",lastRun:"2025-11-16 11:00",reportType:"Epidemiologi"},{id:"SCH-006",name:"Performa Pusat Kesehatan",schedule:"monthly",nextRun:"2025-12-01 14:00",recipients:["admin@rscm.co.id","admin@dharmais.co.id"],status:"active",lastRun:"2025-11-01 14:00",reportType:"Administrasi"},{id:"SCH-007",name:"Update Pasien Baru",schedule:"daily",nextRun:"2025-11-23 16:00",recipients:["registrar@rscm.co.id"],status:"inactive",lastRun:"2025-11-22 16:00",reportType:"Administrasi"}])}catch(e){console.error("Error fetching scheduled reports:",e)}finally{o(!1)}},y=e=>{switch(e){case"daily":return"Harian";case"weekly":return"Mingguan";case"monthly":return"Bulanan";default:return e}},v=e=>{switch(e){case"daily":return"bg-blue-100 text-blue-800";case"weekly":return"bg-green-100 text-green-800";case"monthly":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},f=e=>{let a="active"===e.status?"inactive":"active";d(s=>s.map(s=>s.id===e.id?{...s,status:a}:s)),alert('Laporan "'.concat(e.name,'" ').concat("active"===a?"diaktifkan":"dinonaktifkan"))},k=e=>{h(e),g({name:e.name,reportType:e.reportType,schedule:e.schedule,recipients:e.recipients.join(", "),status:e.status}),m(!0)},b=e=>{confirm('Apakah Anda yakin ingin menghapus jadwal laporan "'.concat(e.name,'"?'))&&(d(a=>a.filter(a=>a.id!==e.id)),alert('Laporan "'.concat(e.name,'" berhasil dihapus')))},N=e=>{alert('Menjalankan laporan "'.concat(e.name,'" sekarang...\nLaporan akan dikirim ke ').concat(e.recipients.length," penerima."))};return s||c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):a?(0,t.jsxs)(i.A,{children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Laporan Terjadwal"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Kelola laporan yang dijadwalkan secara otomatis"})]}),(0,t.jsx)("button",{onClick:()=>{h(null),g({name:"",reportType:"",schedule:"weekly",recipients:"",status:"active"}),m(!0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"+ Jadwalkan Laporan Baru"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Laporan Aktif"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.filter(e=>"active"===e.status).length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-gray-100 rounded-lg",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tidak Aktif"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.filter(e=>"inactive"===e.status).length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Jadwal"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.length})]})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Laporan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jadwal"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Eksekusi Berikutnya"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Penerima"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===l.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("p",{className:"mt-2",children:"Belum ada laporan terjadwal"})]})})}):l.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.reportType," - ",e.id]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat(v(e.schedule)),children:y(e.schedule)})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.nextRun}),e.lastRun&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Terakhir: ",e.lastRun]})]}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-900",children:[e.recipients.length," penerima"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.recipients[0],e.recipients.length>1&&", +".concat(e.recipients.length-1," lainnya")]})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("button",{onClick:()=>f(e),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat("active"===e.status?"bg-green-600":"bg-gray-300"),children:(0,t.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat("active"===e.status?"translate-x-6":"translate-x-1")})})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-900",title:"Jalankan Sekarang",children:(0,t.jsxs)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),(0,t.jsx)("button",{onClick:()=>k(e),className:"text-green-600 hover:text-green-900",title:"Edit",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,t.jsx)("button",{onClick:()=>b(e),className:"text-red-600 hover:text-red-900",title:"Hapus",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})})}),x&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("div",{className:"p-6 border-b",children:(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:u?"Edit Laporan Terjadwal":"Jadwalkan Laporan Baru"})}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!p.name||!p.reportType||!p.recipients){alert("Mohon lengkapi semua field yang diperlukan");return}let a=p.recipients.split(",").map(e=>e.trim());if(u)d(e=>e.map(e=>e.id===u.id?{...e,name:p.name,reportType:p.reportType,schedule:p.schedule,recipients:a,status:p.status}:e)),alert('Laporan "'.concat(p.name,'" berhasil diupdate'));else{let e={id:"SCH-".concat(String(l.length+1).padStart(3,"0")),name:p.name,reportType:p.reportType,schedule:p.schedule,recipients:a,status:p.status,nextRun:"2025-11-25 08:00",lastRun:void 0};d([...l,e]),alert('Laporan "'.concat(p.name,'" berhasil dijadwalkan'))}m(!1)},className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nama Laporan ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:p.name,onChange:e=>g({...p,name:e.target.value}),placeholder:"Contoh: Laporan Insidensi Mingguan",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipe Laporan ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:p.reportType,onChange:e=>g({...p,reportType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Tipe Laporan"}),(0,t.jsx)("option",{value:"Epidemiologi",children:"Epidemiologi"}),(0,t.jsx)("option",{value:"Klinis",children:"Klinis"}),(0,t.jsx)("option",{value:"Administrasi",children:"Administrasi"}),(0,t.jsx)("option",{value:"Kualitas",children:"Kualitas"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frekuensi Jadwal"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-4",children:["daily","weekly","monthly"].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>g({...p,schedule:e}),className:"px-4 py-3 border-2 rounded-lg font-medium transition-colors ".concat(p.schedule===e?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-green-300"),children:y(e)},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Penerima ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{value:p.recipients,onChange:e=>g({...p,recipients:e.target.value}),placeholder:"Masukkan email penerima, pisahkan dengan koma Contoh: admin@rscm.co.id, dr.budi@dharmais.co.id",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pisahkan dengan koma untuk multiple email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",value:"active",checked:"active"===p.status,onChange:e=>g({...p,status:e.target.value}),className:"mr-2"}),(0,t.jsx)("span",{children:"Aktif"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",value:"inactive",checked:"inactive"===p.status,onChange:e=>g({...p,status:e.target.value}),className:"mr-2"}),(0,t.jsx)("span",{children:"Tidak Aktif"})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3 pt-4 border-t",children:[(0,t.jsx)("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Batal"}),(0,t.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:u?"Simpan Perubahan":"Jadwalkan Laporan"})]})]})]})})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},4033:function(e,a,s){e.exports=s(94)}},function(e){e.O(0,[1176,4829,2849,4968,2971,2472,1744],function(){return e(e.s=8663)}),_N_E=e.O()}]);