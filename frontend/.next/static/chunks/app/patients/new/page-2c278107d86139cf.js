(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4434],{6594:function(e,a,l){Promise.resolve().then(l.bind(l,1507))},8811:function(e,a,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return i}});let t=l(1024);l(2265);let s=t._(l(7075));function r(e){return{default:(null==e?void 0:e.default)||e}}function i(e,a){let l=s.default,t={loading:e=>{let{error:a,isLoading:l,pastDelay:t}=e;return null}};"function"==typeof e&&(t.loader=e),Object.assign(t,a);let i=t.loader;return l({...t,loader:()=>null!=i?i().then(r):Promise.resolve(r(()=>null))})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},9167:function(e,a,l){"use strict";function t(e){let{children:a}=e;return a}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"NoSSR",{enumerable:!0,get:function(){return t}}),l(1283)},7075:function(e,a,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return i}});let t=l(1024),s=t._(l(2265)),r=l(9167),i=function(e){let a=Object.assign({loader:null,loading:null,ssr:!0},e);function l(e){let l=a.loading,t=s.default.createElement(l,{isLoading:!0,pastDelay:!0,error:null}),i=a.ssr?s.default.Fragment:r.NoSSR,n=a.lazy;return s.default.createElement(s.default.Suspense,{fallback:t},s.default.createElement(i,null,s.default.createElement(n,e)))}return a.lazy=s.default.lazy(a.loader),l.displayName="LoadableComponent",l}},1507:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return Q}});var t=l(7437),s=l(2265),r=l(4033),i=l(2849),n=l(4968);let o=(0,s.createContext)(null),d=e=>{let{children:a,autoSaveInterval:l=12e4,draftKey:r="patient-form-draft",onAutoSave:i}=e,[n,d]=(0,s.useState)({}),[c,u]=(0,s.useState)({}),[m,g]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)(!0),[v,f]=(0,s.useState)(!1),y=(0,s.useRef)(null),j=(0,s.useRef)({});(0,s.useEffect)(()=>{T()},[]),(0,s.useEffect)(()=>{if(b&&x)return y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{I()},l),()=>{y.current&&clearTimeout(y.current)}},[n,x,b,l]),(0,s.useEffect)(()=>{let e=e=>{if(v)return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[v]);let N=(0,s.useCallback)((e,a)=>{d(l=>({...l,[e]:{...l[e],...a}})),h(!0),f(!0)},[]),k=(0,s.useCallback)((e,a,l)=>{d(t=>({...t,[e]:{...t[e],[a]:l}})),h(!0),f(!0)},[]),w=(0,s.useCallback)(e=>n[e]||{},[n]),S=(0,s.useCallback)(()=>n,[n]),C=(0,s.useCallback)((e,a)=>{u(l=>({...l,[e]:a}))},[]),I=(0,s.useCallback)(async()=>{try{localStorage.setItem(r,JSON.stringify({data:n,timestamp:new Date().toISOString(),validation:c})),i&&await i(n),g(new Date),h(!1),console.log("Draft saved successfully at",new Date().toLocaleTimeString())}catch(e){console.error("Error saving draft:",e)}},[n,c,r,i]),T=(0,s.useCallback)(()=>{try{let e=localStorage.getItem(r);if(e){let{data:a,timestamp:l,validation:t}=JSON.parse(e);d(a),u(t||{}),g(new Date(l)),j.current=a,console.log("Draft loaded from",new Date(l).toLocaleString())}}catch(e){console.error("Error loading draft:",e)}},[r]),A=(0,s.useCallback)(()=>{localStorage.removeItem(r),d({}),u({}),g(null),h(!1),f(!1),j.current={}},[r]);return(0,t.jsx)(o.Provider,{value:{formData:n,updateSection:N,updateField:k,getSection:w,getAllData:S,sectionValidation:c,setSectionValidation:C,saveDraft:I,loadDraft:T,clearDraft:A,lastSaved:m,isDirty:x,enableAutoSave:b,setEnableAutoSave:p,hasUnsavedChanges:v},children:a})},c=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useFormContext must be used within FormProvider");return e},u=e=>{let{sections:a,onComplete:l,onSaveDraft:r,autoSaveInterval:i=12e4,showSidebar:n=!0,className:o=""}=e,{getAllData:d,getSection:u,updateSection:m,updateField:g,sectionValidation:x,setSectionValidation:h,saveDraft:b,lastSaved:p,isDirty:v,hasUnsavedChanges:f}=c(),[y,j]=(0,s.useState)(0),[N,k]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[C,I]=(0,s.useState)(new Set),T=a.filter(e=>!e.shouldRender||e.shouldRender(d())),A=T[y],D=0===y,L=y===T.length-1,P=u(A.id),E=x[A.id]||{isValid:!0,errors:[]};(0,s.useEffect)(()=>{if(v&&r){let e=setTimeout(async()=>{try{await r(d()),await b()}catch(e){console.error("Auto-save failed:",e)}},i);return()=>clearTimeout(e)}},[v,d,r,i,b]);let M=async()=>{if(!A.validate)return h(A.id,{isValid:!0,errors:[]}),!0;k(!0);try{let e=await Promise.resolve(A.validate(P,d()));return h(A.id,e),k(!1),e.isValid}catch(e){return console.error("Validation error:",e),k(!1),!1}},R=async()=>{let e=await M();e||A.isOptional?(e&&I(e=>new Set(e).add(A.id)),j(e=>Math.min(e+1,T.length-1)),window.scrollTo({top:0,behavior:"smooth"})):console.warn("Validation failed for section:",A.id)},O=e=>{let a=T.findIndex(a=>a.id===e);-1!==a&&(j(a),window.scrollTo({top:0,behavior:"smooth"}))},B=async()=>{try{r&&await r(d()),await b(),alert("Draft saved successfully!")}catch(e){console.error("Save draft failed:",e),alert("Failed to save draft. Please try again.")}},H=async()=>{k(!0);let e=!0;for(let a of T)if(a.validate){let l=u(a.id),t=await Promise.resolve(a.validate(l,d()));h(a.id,t),t.isValid||a.isOptional||(e=!1)}if(k(!1),!e){alert("Please complete all required sections before submitting.");let e=T.findIndex(e=>{let a=x[e.id];return a&&!a.isValid&&!e.isOptional});-1!==e&&j(e);return}S(!0);try{await l(d())}catch(e){console.error("Submission failed:",e),alert("Failed to submit form. Please try again.")}finally{S(!1)}},F=(0,s.useCallback)(e=>{m(A.id,e)},[A.id,m]),G=(0,s.useCallback)((e,a)=>{g(A.id,e,a)},[A.id,g]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 ".concat(o),children:[p&&(0,t.jsxs)("div",{className:"fixed top-4 right-4 z-50 bg-white px-4 py-2 rounded-lg shadow-md text-sm text-gray-600 flex items-center space-x-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,t.jsxs)("span",{children:["Last saved: ",p.toLocaleTimeString()]})]}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,t.jsxs)("div",{className:"flex",children:[n&&(0,t.jsxs)("aside",{className:"w-64 bg-white min-h-screen border-r border-gray-200 p-6 sticky top-0 overflow-y-auto h-screen",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Patient Registration"}),(0,t.jsx)("nav",{className:"space-y-2",children:T.map((e,a)=>{let l=x[e.id],s=C.has(e.id),r=a===y,i=l&&!l.isValid;return(0,t.jsxs)("button",{onClick:()=>O(e.id),className:"w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ".concat(r?"bg-blue-50 border-2 border-blue-500 text-blue-900":i?"bg-red-50 border border-red-200 text-red-900":s?"bg-green-50 border border-green-200 text-green-900":"bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100"),children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:s&&!i?(0,t.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):i?(0,t.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):r?(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z",clipRule:"evenodd"})}):(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-gray-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium truncate",children:e.title}),e.isOptional&&(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Optional"})]})]},e.id)})}),(0,t.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,t.jsx)("button",{onClick:B,disabled:!f,className:"w-full px-4 py-2 rounded-lg font-medium transition-colors ".concat(f?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-50 text-gray-400 cursor-not-allowed"),children:"Save Draft"})})]}),(0,t.jsx)("main",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:A.title}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Section ",y+1," of ",T.length]})]}),A.description&&(0,t.jsx)("p",{className:"text-gray-600",children:A.description}),A.isOptional&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This section is optional"})]}),E.errors.length>0&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Please correct the following errors:"}),(0,t.jsx)("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:E.errors.map((e,a)=>(0,t.jsx)("li",{children:e.message},a))})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:(0,t.jsx)(A.component,{data:P,updateData:F,updateField:G,errors:E.errors,isActive:!0})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>{j(e=>Math.max(e-1,0)),window.scrollTo({top:0,behavior:"smooth"})},disabled:D,className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(D?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Previous"}),(0,t.jsx)("div",{className:"flex space-x-4",children:L?(0,t.jsx)("button",{onClick:H,disabled:w||N,className:"px-8 py-3 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 disabled:bg-green-400 transition-colors",children:w?"Submitting...":"Submit Registration"}):(0,t.jsx)("button",{onClick:R,disabled:N,className:"px-6 py-3 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:N?"Validating...":"Next"})})]})]})})]})})]})};function m(){let{getSection:e,updateSection:a}=c(),[l,r]=(0,s.useState)([]),[i,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),g=e("section1")||{};(0,s.useEffect)(()=>{x()},[]);let x=async()=>{try{d(!0),m(null);let e="http://localhost:3001/api/v1",l=localStorage.getItem("token"),[t,s]=await Promise.all([fetch("".concat(e,"/centers"),{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}}),fetch("".concat(e,"/pathology-types"),{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}})]);if(!t.ok||!s.ok){let e=t.ok?null:await t.text(),a=s.ok?null:await s.text();throw console.error("Centers response:",e),console.error("Pathology response:",a),Error("Failed to load data")}let i=await t.json(),o=await s.json();r(Array.isArray(i)?i:i.data||[]),n(Array.isArray(o)?o:o.data||[]);let c=Array.isArray(i)?i:i.data||[];if(!g.centerId&&c.length>0){let e=c[0];a("section1",{...g,centerId:e.id})}}catch(e){console.error("Error loading section 1 data:",e),m("Gagal memuat data. Silakan coba lagi.")}finally{d(!1)}},h=e=>{let l=i.find(a=>a.id===e);l&&a("section1",{...g,pathologyType:l.code,pathologyTypeName:l.name})};return o?(0,t.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"ml-4 text-gray-600",children:"Memuat data..."})]}):u?(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-red-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,t.jsx)("p",{className:"text-red-700 mt-1",children:u}),(0,t.jsx)("button",{onClick:x,className:"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Coba Lagi"})]})]})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pusat Pengobatan & Jenis Patologi"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Pilih pusat pengobatan dan jenis patologi tumor muskuloskeletal"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pusat Pengobatan ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:g.centerId||"",onChange:e=>{a("section1",{...g,centerId:e.target.value})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Pusat Pengobatan"}),l.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.code,") - ",e.province,e.regency?", ".concat(e.regency):""]},e.id))]}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Pilih pusat pengobatan tempat pasien dirawat. Untuk pasien rujukan, pilih pusat yang sesuai."})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Jenis Patologi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.map(e=>{let a=g.pathologyType===e.code;return(0,t.jsxs)("button",{type:"button",onClick:()=>h(e.id),className:"\n                  relative p-6 rounded-lg border-2 text-left transition-all\n                  ".concat(a?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300","\n                "),children:[a&&(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"text-lg font-semibold mb-2 ".concat(a?"text-blue-900":"text-gray-900"),children:e.name}),(0,t.jsx)("div",{className:"text-sm font-mono mb-2 ".concat(a?"text-blue-700":"text-gray-600"),children:e.code}),e.description&&(0,t.jsx)("div",{className:"text-sm ".concat(a?"text-blue-800":"text-gray-600"),children:e.description}),(0,t.jsxs)("div",{className:"mt-4 text-xs ".concat(a?"text-blue-600":"text-gray-500"),children:["BONE"===e.code&&"57 klasifikasi tumor tulang WHO","SOFT_TISSUE"===e.code&&"68 klasifikasi tumor jaringan lunak WHO","METASTATIC"===e.code&&"Tumor metastatik"]})]},e.id)})}),(0,t.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"Pilih jenis patologi tumor. Pilihan ini menentukan klasifikasi WHO yang akan ditampilkan di bagian diagnosis."})]}),g.centerId&&g.pathologyType&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm text-green-800",children:[(0,t.jsx)("span",{className:"font-medium",children:"Informasi dasar lengkap."})," Anda dapat melanjutkan ke bagian selanjutnya."]})]})})]})}function g(){let{getSection:e,updateSection:a}=c(),l=e("section2")||{},r={hospitalRecordNumber:l.hospitalRecordNumber||"",nik:l.nik||"",dateOfBirth:l.dateOfBirth||"",gender:l.gender||"",provinceId:l.provinceId||"",regencyId:l.regencyId||"",districtId:l.districtId||"",villageId:l.villageId||"",addressDetail:l.addressDetail||"",phone:l.phone||"",emergencyContactName:l.emergencyContactName||"",emergencyContactPhone:l.emergencyContactPhone||"",emergencyContactRelationship:l.emergencyContactRelationship||""},[i,n]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[g,x]=(0,s.useState)([]),[h,b]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),f=(e=>{if(!e)return 0;let a=new Date,l=new Date(e),t=a.getFullYear()-l.getFullYear(),s=a.getMonth()-l.getMonth();return(s<0||0===s&&a.getDate()<l.getDate())&&t--,t})(r.dateOfBirth);(0,s.useEffect)(()=>{y()},[]),(0,s.useEffect)(()=>{r.provinceId?j(r.provinceId):(d([]),m([]),x([]))},[r.provinceId]),(0,s.useEffect)(()=>{r.regencyId?N(r.regencyId):(m([]),x([]))},[r.regencyId]),(0,s.useEffect)(()=>{r.districtId?k(r.districtId):x([])},[r.districtId]);let y=async()=>{try{b(!0);let e=await fetch("".concat("http://localhost:3001/api/v1","/regions/provinces"));if(!e.ok)throw Error("Failed to load provinces");let a=await e.json();n(Array.isArray(a)?a:a.data||[])}catch(e){console.error("Error loading provinces:",e),n([])}finally{b(!1)}},j=async e=>{try{let a=await fetch("".concat("http://localhost:3001/api/v1","/regions/provinces/").concat(e,"/regencies"));if(!a.ok)throw Error("Failed to load regencies");let l=await a.json();d(Array.isArray(l)?l:l.data||[])}catch(e){console.error("Error loading regencies:",e),d([])}},N=async e=>{try{let a=await fetch("".concat("http://localhost:3001/api/v1","/regions/regencies/").concat(e,"/districts"));if(!a.ok)throw Error("Failed to load districts");let l=await a.json();m(Array.isArray(l)?l:l.data||[])}catch(e){console.error("Error loading districts:",e),m([])}},k=async e=>{try{let a=await fetch("".concat("http://localhost:3001/api/v1","/regions/districts/").concat(e,"/villages"));if(!a.ok)throw Error("Failed to load villages");let l=await a.json();x(Array.isArray(l)?l:l.data||[])}catch(e){console.error("Error loading villages:",e),x([])}},w=e=>(v(null),!e||!!/^\d{16}$/.test(e)||(v("NIK harus 16 digit angka"),!1)),S=(e,l)=>{a("section2",{...r,[e]:l}),"provinceId"===e?a("section2",{...r,provinceId:l,regencyId:"",districtId:"",villageId:""}):"regencyId"===e?a("section2",{...r,regencyId:l,districtId:"",villageId:""}):"districtId"===e&&a("section2",{...r,districtId:l,villageId:""})};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Identitas Pasien"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Lengkapi data identitas dan demografi pasien"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Identitas"}),(0,t.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Sistem Identifikasi Pasien Otomatis"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:"Untuk menjaga privasi pasien, sistem akan otomatis membuat:"}),(0,t.jsxs)("ul",{className:"mt-2 text-xs text-blue-600 list-disc list-inside space-y-1",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"ID Anonim"})," (contoh: P-SBY-00001)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"No. RM INAMSOS"})," (contoh: SBY-2025-00001)"]})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-blue-600",children:"Tidak perlu input nama pasien dalam sistem."})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"No. RM Rumah Sakit (Opsional)"}),(0,t.jsx)("input",{type:"text",value:r.hospitalRecordNumber,onChange:e=>S("hospitalRecordNumber",e.target.value),placeholder:"Contoh: RM-2025-001234",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Nomor rekam medis dari rumah sakit (jika sudah ada)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIK (Nomor Induk Kependudukan)"}),(0,t.jsx)("input",{type:"text",value:r.nik,onChange:e=>{S("nik",e.target.value),w(e.target.value)},onBlur:e=>w(e.target.value),maxLength:16,placeholder:"3201234567890123",className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(p?"border-red-500":"border-gray-300")}),p&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"16 digit nomor identitas kependudukan (opsional, akan dienkripsi)"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Lahir ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",value:r.dateOfBirth,onChange:e=>S("dateOfBirth",e.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),f>0&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["Usia: ",f," tahun"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Jenis Kelamin ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:r.gender,onChange:e=>S("gender",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Jenis Kelamin"}),(0,t.jsx)("option",{value:"MALE",children:"Laki-laki"}),(0,t.jsx)("option",{value:"FEMALE",children:"Perempuan"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alamat"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Provinsi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:r.provinceId,onChange:e=>S("provinceId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Provinsi"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kabupaten/Kota ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:r.regencyId,onChange:e=>S("regencyId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!r.provinceId,required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Kabupaten/Kota"}),o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kecamatan ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:r.districtId,onChange:e=>S("districtId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!r.regencyId,required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Kecamatan"}),u.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kelurahan/Desa ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:r.villageId,onChange:e=>S("villageId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!r.districtId,required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Kelurahan/Desa"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detail Alamat (RT/RW, Nama Jalan, dll)"}),(0,t.jsx)("textarea",{value:r.addressDetail,onChange:e=>S("addressDetail",e.target.value),rows:3,placeholder:"Contoh: Jl. Merdeka No. 123, RT 001/RW 005",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Telepon"}),(0,t.jsx)("input",{type:"tel",value:r.phone,onChange:e=>S("phone",e.target.value),placeholder:"08123456789",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kontak Darurat"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Kontak Darurat"}),(0,t.jsx)("input",{type:"text",value:r.emergencyContactName,onChange:e=>S("emergencyContactName",e.target.value),placeholder:"Nama kerabat/keluarga",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hubungan"}),(0,t.jsx)("input",{type:"text",value:r.emergencyContactRelationship,onChange:e=>S("emergencyContactRelationship",e.target.value),placeholder:"Contoh: Istri, Anak, Saudara",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Telepon Kontak Darurat"}),(0,t.jsx)("input",{type:"tel",value:r.emergencyContactPhone,onChange:e=>S("emergencyContactPhone",e.target.value),placeholder:"08123456789",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})}let x=[{value:"ANTERIOR",label:"Anterior (Depan)"},{value:"POSTERIOR",label:"Posterior (Belakang)"},{value:"LATERAL_LEFT",label:"Lateral Kiri"},{value:"LATERAL_RIGHT",label:"Lateral Kanan"},{value:"OTHER",label:"Lainnya"}];function h(e){let{patientId:a,onPhotosChange:l,maxPhotos:r=10,maxFileSizeMB:i=10}=e,[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),u=(0,s.useRef)(null),m=e=>{URL.revokeObjectURL(n[e].preview);let a=n.filter((a,l)=>l!==e);o(a),l(a)},g=(e,a,t)=>{let s=[...n];s[e]={...s[e],[a]:t},o(s),l(s)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{onDrop:e=>{e.preventDefault();let a=Array.from(e.dataTransfer.files);if(u.current){let e=new DataTransfer;a.forEach(a=>e.items.add(a)),u.current.files=e.files,u.current.dispatchEvent(new Event("change",{bubbles:!0}))}},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50 hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer",onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},children:[(0,t.jsx)("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:e=>{let a=Array.from(e.target.files||[]);if(c(""),n.length+a.length>r){c("Maximum ".concat(r," photos allowed"));return}let t=[];a.forEach(e=>{if(!e.type.startsWith("image/")){c("File ".concat(e.name," is not an image"));return}let a=e.size/1048576;if(a>i){c("File ".concat(e.name," exceeds ").concat(i,"MB limit"));return}let l=URL.createObjectURL(e);t.push({file:e,preview:l,viewAngle:"ANTERIOR"})});let s=[...n,...t];o(s),l(s),u.current&&(u.current.value="")},className:"hidden"}),(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,t.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,t.jsx)("p",{className:"mt-3 text-sm font-medium text-gray-900",children:"Klik atau seret foto untuk upload"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["PNG, JPG, JPEG up to ",i,"MB (Max ",r," photos)"]}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 mt-2 font-medium",children:[n.length," / ",r," foto ter-upload"]})]}),d&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,t.jsx)("p",{className:"text-sm text-red-800",children:d})}),n.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e,a)=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[(0,t.jsxs)("div",{className:"relative aspect-video mb-3 bg-gray-100 rounded overflow-hidden",children:[(0,t.jsx)("img",{src:e.preview,alt:"Clinical photo ".concat(a+1),className:"w-full h-full object-cover"}),(0,t.jsx)("button",{onClick:()=>m(a),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",type:"button",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sudut Pandang"}),(0,t.jsx)("select",{value:e.viewAngle||"ANTERIOR",onChange:e=>g(a,"viewAngle",e.target.value),className:"w-full text-xs px-2 py-1.5 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:x.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deskripsi (Opsional)"}),(0,t.jsx)("textarea",{value:e.description||"",onChange:e=>g(a,"description",e.target.value),placeholder:"Contoh: Lesi terlihat jelas di area...",rows:2,className:"w-full text-xs px-2 py-1.5 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.file.name," (",(e.file.size/1024).toFixed(0)," KB)"]})]})]},a))}),0===n.length&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Panduan Foto Klinis"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,t.jsx)("li",{children:"Minimal 3 foto dari sudut berbeda (anterior, lateral, posterior)"}),(0,t.jsx)("li",{children:"Pastikan pencahayaan baik dan fokus jelas"}),(0,t.jsx)("li",{children:"Sertakan penggaris atau referensi ukuran jika memungkinkan"}),(0,t.jsx)("li",{children:"Tutup identitas pasien yang tidak perlu (wajah, tato, dll)"}),(0,t.jsxs)("li",{children:["Format: JPG, PNG (max ",i,"MB per foto)"]})]})]})]})})]})}let b={100:"Normal; tidak ada keluhan atau tanda penyakit",90:"Aktivitas normal; tanda/gejala minimal",80:"Aktivitas normal dengan usaha; tanda/gejala penyakit",70:"Rawat diri sendiri; tidak mampu aktivitas normal",60:"Memerlukan bantuan kadang-kadang",50:"Memerlukan bantuan dan perawatan medis",40:"Cacat; memerlukan perawatan khusus",30:"Sangat cacat; diindikasikan rawat inap",20:"Sangat sakit; rawat inap dan supportif aktif",10:"Moribund; proses fatal berkembang cepat",0:"Meninggal"};function p(){var e,a,l,r;let{getSection:i,updateSection:n}=c(),o=i("section3")||{},d={karnofskyScore:o.karnofskyScore,painScale:o.painScale||0,height:o.height,weight:o.weight,bmi:o.bmi,chiefComplaint:o.chiefComplaint||"",durationOfSymptoms:o.durationOfSymptoms,comorbidities:o.comorbidities||"",cancerHistory:o.cancerHistory||"",familyCancerHistory:o.familyCancerHistory||"",swellingPresent:o.swellingPresent||!1,swellingSize:o.swellingSize||"",skinChanges:o.skinChanges||"",neurovascularStatus:o.neurovascularStatus||"",rangeOfMotion:o.rangeOfMotion||"",physicalExamGeneral:o.physicalExamGeneral||"",physicalExamHeadNeck:o.physicalExamHeadNeck||"",physicalExamThorax:o.physicalExamThorax||"",physicalExamAbdomen:o.physicalExamAbdomen||"",physicalExamExtremitiesSpine:o.physicalExamExtremitiesSpine||"",localTumorStatus:o.localTumorStatus||"",clinicalPhotos:o.clinicalPhotos||[]};(0,s.useEffect)(()=>{if(d.height&&d.weight){let e=d.height/100,a=d.weight/(e*e);a!==d.bmi&&n("section3",{...d,bmi:parseFloat(a.toFixed(2))})}},[d.height,d.weight]);let u=(e,a)=>{n("section3",{...d,[e]:a})},m=(l=d.bmi)?l<18.5?{label:"Underweight",color:"text-yellow-600"}:l<25?{label:"Normal",color:"text-green-600"}:l<30?{label:"Overweight",color:"text-orange-600"}:{label:"Obese",color:"text-red-600"}:{label:"",color:""};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Data Klinis & Presentasi"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Penilaian kondisi klinis pasien saat pertama kali datang"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Penilaian Performa & Nyeri"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Karnofsky Performance Score"}),(0,t.jsxs)("select",{value:d.karnofskyScore||"",onChange:e=>u("karnofskyScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih Skor Karnofsky"}),Object.entries(b).reverse().map(e=>{let[a,l]=e;return(0,t.jsxs)("option",{value:a,children:[a," - ",l]},a)})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Skala 0-100 untuk menilai kemampuan fungsional pasien (0 = meninggal, 100 = normal)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skala Nyeri (VAS 0-10)"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("input",{type:"range",min:"0",max:"10",step:"1",value:d.painScale||0,onChange:e=>u("painScale",parseInt(e.target.value)),className:"w-full h-3 bg-gradient-to-r from-green-200 via-yellow-200 to-red-500 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, #86efac 0%, #fde047 50%, #ef4444 100%)"}}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"0 (Tidak nyeri)"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:null!==(e=d.painScale)&&void 0!==e?e:0}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-600",children:null==(r=d.painScale)?"":0===r?"Tidak ada nyeri":r<=3?"Nyeri ringan":r<=6?"Nyeri sedang":r<=9?"Nyeri berat":"Nyeri sangat berat"})]}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"10 (Sangat nyeri)"})]})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Visual Analog Scale (VAS): 0 = tidak ada nyeri, 10 = nyeri terburuk yang bisa dibayangkan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durasi Gejala (bulan)"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.5",value:d.durationOfSymptoms||"",onChange:e=>u("durationOfSymptoms",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Contoh: 3 (untuk 3 bulan)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Berapa lama pasien mengalami gejala (dalam bulan)"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pengukuran Antropometri"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tinggi Badan (cm)"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.1",value:d.height||"",onChange:e=>u("height",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Contoh: 170",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Berat Badan (kg)"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.1",value:d.weight||"",onChange:e=>u("weight",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Contoh: 65",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),d.bmi&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Body Mass Index (BMI)"}),(0,t.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Dihitung otomatis dari tinggi dan berat badan"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-900",children:d.bmi.toFixed(1)}),(0,t.jsx)("div",{className:"text-sm font-medium ".concat(m.color),children:m.label})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Riwayat Klinis"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Keluhan Utama ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{value:d.chiefComplaint||"",onChange:e=>u("chiefComplaint",e.target.value),rows:3,placeholder:"Contoh: Benjolan di paha kanan yang membesar sejak 6 bulan terakhir, disertai nyeri saat beraktivitas",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Keluhan utama yang membawa pasien datang ke rumah sakit"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Komorbiditas"}),(0,t.jsx)("textarea",{value:d.comorbidities||"",onChange:e=>u("comorbidities",e.target.value),rows:3,placeholder:"Contoh: Diabetes Melitus tipe 2, Hipertensi, Osteoarthritis",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Penyakit penyerta atau kondisi medis lain yang dimiliki pasien"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Riwayat Kanker Pribadi"}),(0,t.jsx)("textarea",{value:d.cancerHistory||"",onChange:e=>u("cancerHistory",e.target.value),rows:3,placeholder:"Contoh: Riwayat osteosarcoma femur kanan pada usia 25 tahun (2015), sudah dilakukan amputasi dan kemoterapi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Riwayat kanker yang pernah diderita pasien sebelumnya (jika ada)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Riwayat Kanker Keluarga"}),(0,t.jsx)("textarea",{value:d.familyCancerHistory||"",onChange:e=>u("familyCancerHistory",e.target.value),rows:3,placeholder:"Contoh: Ayah - Ca Kolon (meninggal usia 60 tahun), Kakak - Leukemia (sembuh)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Riwayat kanker pada keluarga pasien (orang tua, saudara kandung, anak)"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pemeriksaan Fisik - Muskuloskeletal Spesifik"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Pemeriksaan fisik yang spesifik untuk tumor muskuloskeletal"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:d.swellingPresent||!1,onChange:e=>u("swellingPresent",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Terdapat pembengkakan/massa"})]}),d.swellingPresent&&(0,t.jsxs)("div",{className:"ml-8",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ukuran Pembengkakan/Massa"}),(0,t.jsx)("input",{type:"text",value:d.swellingSize||"",onChange:e=>u("swellingSize",e.target.value),placeholder:"Contoh: 10 x 8 x 5 cm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perubahan Kulit"}),(0,t.jsx)("input",{type:"text",value:d.skinChanges||"",onChange:e=>u("skinChanges",e.target.value),placeholder:"Contoh: Eritema, ulserasi, peningkatan suhu lokal",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Neurovaskular"}),(0,t.jsxs)("select",{value:d.neurovascularStatus||"",onChange:e=>u("neurovascularStatus",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih Status"}),(0,t.jsx)("option",{value:"Normal",children:"Normal - Tidak ada defisit"}),(0,t.jsx)("option",{value:"Compromised",children:"Terganggu - Ada defisit neurologis/vaskular"})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Penilaian fungsi saraf dan pembuluh darah di sekitar tumor"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rentang Gerak (Range of Motion)"}),(0,t.jsx)("input",{type:"text",value:d.rangeOfMotion||"",onChange:e=>u("rangeOfMotion",e.target.value),placeholder:"Contoh: Fleksi 90\xb0, Ekstensi penuh, Terbatas 50% pada abduksi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Penilaian rentang gerak sendi yang terkait dengan lokasi tumor"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pemeriksaan Fisik Terstruktur (INAMSOS)"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Pemeriksaan fisik sistemik menurut standar INAMSOS"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Generalisata"}),(0,t.jsx)("textarea",{value:d.physicalExamGeneral||"",onChange:e=>u("physicalExamGeneral",e.target.value),rows:3,placeholder:"Contoh: Keadaan umum baik, kesadaran compos mentis, gizi baik, tekanan darah 120/80 mmHg, nadi 80x/menit, nafas 20x/menit, suhu 36.5\xb0C",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Kondisi umum pasien, tanda-tanda vital, dan status gizi"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kepala & Leher"}),(0,t.jsx)("textarea",{value:d.physicalExamHeadNeck||"",onChange:e=>u("physicalExamHeadNeck",e.target.value),rows:2,placeholder:"Contoh: Konjungtiva anemis (-/-), sklera ikterik (-/-), tidak ada pembesaran KGB leher",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thoraks (Paru & Jantung)"}),(0,t.jsx)("textarea",{value:d.physicalExamThorax||"",onChange:e=>u("physicalExamThorax",e.target.value),rows:2,placeholder:"Contoh: Simetris, retraksi (-), suara napas vesikuler +/+, ronki -/-, wheezing -/-, bunyi jantung I-II reguler, murmur (-)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Abdomen"}),(0,t.jsx)("textarea",{value:d.physicalExamAbdomen||"",onChange:e=>u("physicalExamAbdomen",e.target.value),rows:2,placeholder:"Contoh: Datar, supel, bising usus (+) normal, nyeri tekan (-), hepatomegali (-), splenomegali (-)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ekstremitas & Tulang Belakang"}),(0,t.jsx)("textarea",{value:d.physicalExamExtremitiesSpine||"",onChange:e=>u("physicalExamExtremitiesSpine",e.target.value),rows:3,placeholder:"Contoh: Tidak ada deformitas tulang belakang, ekstremitas atas dalam batas normal, ekstremitas bawah kanan terdapat massa (lihat pemeriksaan lokal)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Pemeriksaan ekstremitas secara umum dan tulang belakang"})]})]}),(0,t.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-6 space-y-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0 mt-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"Status Lokalisata (Pemeriksaan Lokal Tumor) - CRITICAL"}),(0,t.jsx)("p",{className:"text-sm text-yellow-800 mb-4",children:"Pemeriksaan fokus pada lokasi tumor - SANGAT PENTING untuk dokumentasi INAMSOS"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-yellow-900 mb-2",children:"Deskripsi Pemeriksaan Lokal"}),(0,t.jsx)("textarea",{value:d.localTumorStatus||"",onChange:e=>u("localTumorStatus",e.target.value),rows:5,placeholder:"Contoh: Look: Massa di 1/3 distal femur kanan, ukuran \xb112x10x8 cm, batas tidak tegas, kulit di atasnya tampak eritema Feel: Massa teraba keras, tidak mobile, nyeri tekan (+), peningkatan suhu lokal (+), tidak ada fluktuasi Move: ROM lutut kanan terbatas 50%, nyeri saat fleksi, krepitasi (-) Neurovaskular: CRT <2 detik, pulsasi a. dorsalis pedis (+) kuat, sensibilitas utuh, motorik 5/5",className:"w-full px-4 py-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 bg-white"}),(0,t.jsxs)("p",{className:"mt-2 text-xs text-yellow-700",children:[(0,t.jsx)("strong",{children:"Format Look-Feel-Move:"})," Inspeksi (Look), Palpasi (Feel), Range of Motion (Move), Status Neurovaskular"]})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Foto Klinis (Opsional)"}),(0,t.jsx)(h,{patientId:void 0,onPhotosChange:e=>u("clinicalPhotos",e),maxPhotos:10,maxFileSizeMB:10})]}),d.chiefComplaint&&void 0!==d.karnofskyScore&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-green-900",children:"Data Klinis Minimum Lengkap"}),(0,t.jsxs)("div",{className:"mt-2 text-green-800 space-y-1",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Karnofsky Score:"})," ",d.karnofskyScore]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Pain Scale:"})," ",null!==(a=d.painScale)&&void 0!==a?a:0,"/10"]}),d.bmi&&(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"BMI:"})," ",d.bmi.toFixed(1)," (",m.label,")"]}),d.clinicalPhotos&&d.clinicalPhotos.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Foto Klinis:"})," ",d.clinicalPhotos.length," foto"]})]})]})]})})]})}let v={X_RAY:{label:"Conventional X-ray (Rontgen)",required:!0,bgColor:"bg-blue-50",borderColor:"border-blue-300",headerColor:"bg-blue-100",icon:"\uD83D\uDCF7",placeholder:"Contoh: Lesi litik di distal femur kanan dengan destruksi korteks anterior, soft tissue mass (+), periosteal reaction sunburst appearance, ukuran lesi 8x6 cm..."},MRI:{label:"MRI (Magnetic Resonance Imaging)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"\uD83E\uDDF2",placeholder:"Contoh: Massa intramedular di distal femur dengan ekstensi ekstraosseous, T1 hypointense, T2 hyperintense dengan enhancing septa, invasi ke neurovascular bundle (-), skip lesion (-), joint invasion (-)..."},CT_SCAN:{label:"CT Scan (Computed Tomography)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"\uD83D\uDD2C",placeholder:"Contoh: Massa jaringan lunak dengan komponen kalsifikasi mineralisasi matriks, ukuran 8x6x5 cm, melibatkan kompartemen anterior thigh, tidak tampak metastasis paru..."},BONE_SCAN:{label:"Bone Scan (Skintigrafi Tulang)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"",placeholder:"Contoh: Peningkatan uptake Tc-99m MDP di distal femur kanan, tidak tampak hot spot di tulang lain, tidak ada tanda metastasis tulang..."},PET_SCAN:{label:"PET Scan (Positron Emission Tomography)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"",placeholder:"Contoh: Peningkatan uptake FDG dengan SUVmax 8.5 di lesi primer distal femur kanan, tidak tampak lymph node involvement, tidak ada distant metastasis..."}};function f(){let{getSection:e,updateSection:a}=c(),l=e("section4"),r=(null==l?void 0:l.radiologyModalities)||[{modality:"X_RAY",images:[]},{modality:"MRI",images:[]},{modality:"CT_SCAN",images:[]},{modality:"BONE_SCAN",images:[]},{modality:"PET_SCAN",images:[]}],[i,n]=(0,s.useState)(r),[o,d]=(0,s.useState)(new Set(["X_RAY"])),[u,m]=(0,s.useState)(null),g=(0,s.useCallback)(e=>{n(e),a("section4",{...l,radiologyModalities:e})},[l,a]),x=(e,a,l)=>{let t=i.map(t=>t.modality===e?{...t,[a]:l}:t);g(t)},h=(e,a)=>{if(!a||0===a.length)return;let l=Array.from(a).map(e=>({fileName:e.name,fileSize:e.size,fileType:e.type,uploadDate:new Date().toISOString(),file:e})),t=i.find(a=>a.modality===e);if(t){let a=[...t.images,...l];x(e,"images",a)}},b=(e,a)=>{let l=i.find(a=>a.modality===e);if(l){let t=l.images.filter((e,l)=>l!==a);x(e,"images",t)}},p=(e,a)=>{e.preventDefault(),m(a)},f=e=>{e.preventDefault(),m(null)},y=(e,a)=>{e.preventDefault(),m(null);let l=e.dataTransfer.files;h(a,l)},j=e=>{d(a=>{let l=new Set(a);return l.has(e)?l.delete(e):l.add(e),l})},N=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",k=e=>{let a=v[e],l=i.find(a=>a.modality===e),s=o.has(e),r=u===e;return l?(0,t.jsxs)("div",{className:"rounded-lg border-2 ".concat(a.borderColor," ").concat(a.bgColor," overflow-hidden transition-all"),children:[(0,t.jsxs)("div",{className:"".concat(a.headerColor," px-6 py-4 flex items-center justify-between cursor-pointer"),onClick:()=>!a.required&&j(e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:a.icon}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[a.label,a.required&&(0,t.jsx)("span",{className:"ml-2 text-red-500 text-sm",children:"*WAJIB"})]}),l.images.length>0&&(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[l.images.length," file(s) uploaded",l.studyDate&&"  Study: ".concat(new Date(l.studyDate).toLocaleDateString("id-ID"))]})]})]}),!a.required&&(0,t.jsx)("button",{onClick:a=>{a.stopPropagation(),j(e)},className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)("svg",{className:"w-6 h-6 transition-transform ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(a.required||s)&&(0,t.jsxs)("div",{className:"px-6 py-5 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Pemeriksaan ",a.required&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",value:l.studyDate||"",onChange:a=>x(e,"studyDate",a.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:a.required})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Gambar ",a.required&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{onDragOver:a=>p(a,e),onDragLeave:f,onDrop:a=>y(a,e),className:"\n                  border-2 border-dashed rounded-lg p-6 text-center\n                  transition-all cursor-pointer\n                  ".concat(r?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-gray-50","\n                "),children:[(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*,.dcm",onChange:a=>h(e,a.target.files),className:"hidden",id:"file-upload-".concat(e)}),(0,t.jsxs)("label",{htmlFor:"file-upload-".concat(e),className:"cursor-pointer flex flex-col items-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Klik untuk upload atau drag & drop file"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, DICOM (.dcm) - Max 10MB per file"})]})]}),l.images.length>0&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["File yang diupload (",l.images.length,"):"]}),l.images.map((a,l)=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-3 rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.fileName}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[N(a.fileSize),"  ",new Date(a.uploadDate).toLocaleString("id-ID")]})]})]}),(0,t.jsx)("button",{onClick:()=>b(e,l),className:"ml-3 px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:"Hapus file",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},l))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temuan dan Interpretasi ",a.required&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{value:l.findings||"",onChange:a=>x(e,"findings",a.target.value),rows:4,placeholder:a.placeholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y",required:a.required}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Jelaskan lokasi lesi, karakteristik (litik/blastik/mixed), ukuran, ekstensi jaringan lunak, invasi struktur sekitar, dan tanda metastasis"})]})]})]},e):null};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Petunjuk Pemeriksaan Radiologi"}),(0,t.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)("strong",{children:"X-ray (Rontgen)"})," adalah pemeriksaan WAJIB dan harus diisi"]}),(0,t.jsx)("li",{children:" Upload gambar dalam format JPG, PNG, atau DICOM (.dcm)"}),(0,t.jsx)("li",{children:" Anda dapat mengupload beberapa gambar untuk setiap modalitas"}),(0,t.jsx)("li",{children:" Pemeriksaan lain (MRI, CT, Bone Scan, PET) bersifat opsional"}),(0,t.jsx)("li",{children:" Klik header section untuk membuka/tutup pemeriksaan opsional"})]})]})]})}),k("X_RAY"),k("MRI"),k("CT_SCAN"),k("BONE_SCAN"),k("PET_SCAN"),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Ringkasan Pemeriksaan"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-xs",children:Object.entries(v).map(e=>{let[a,l]=e,s=i.find(e=>e.modality===a),r=s&&(s.findings||s.images.length>0);return(0,t.jsxs)("div",{className:"px-3 py-2 rounded-lg border ".concat(r?"bg-green-50 border-green-300 text-green-800":l.required?"bg-yellow-50 border-yellow-300 text-yellow-800":"bg-gray-100 border-gray-300 text-gray-600"),children:[(0,t.jsxs)("div",{className:"font-medium",children:[l.icon," ",l.label.split(" ")[0]]}),(0,t.jsx)("div",{className:"text-xs mt-1",children:r?" Lengkap":l.required?" Wajib":" Kosong"})]},a)})})]})]})}function y(){let{getSection:e,updateSection:a}=c(),l=e("section4")||{},[r,i]=(0,s.useState)(l.pathologyFiles||[]),[n,o]=(0,s.useState)(!1),d=(0,s.useCallback)(e=>{i(e),a("section4",{...l,pathologyFiles:e})},[l,a]),u=e=>{if(!e||0===e.length)return;let a=Array.from(e).map(e=>({fileName:e.name,fileSize:e.size,fileType:e.type,uploadDate:new Date().toISOString(),file:e}));d([...r,...a])},m=e=>{let a=r.filter((a,l)=>l!==e);d(a)},g=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB";return(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Hasil Patologi (Pathology Reports)"}),(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:e=>{e.preventDefault(),o(!1)},onDrop:e=>{e.preventDefault(),o(!1);let a=e.dataTransfer.files;u(a)},className:"\n          border-2 border-dashed rounded-lg p-6 text-center\n          transition-all cursor-pointer\n          ".concat(n?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400 hover:bg-gray-50","\n        "),children:[(0,t.jsx)("input",{type:"file",multiple:!0,accept:".pdf,image/*,.dcm",onChange:e=>u(e.target.files),className:"hidden",id:"pathology-file-upload"}),(0,t.jsxs)("label",{htmlFor:"pathology-file-upload",className:"cursor-pointer flex flex-col items-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Klik untuk upload atau drag & drop file laporan"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG, DICOM - Max 10MB per file"})]})]}),r.length>0&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["File yang diupload (",r.length,"):"]}),r.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-3 rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.fileName}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[g(e.fileSize),"  ",new Date(e.uploadDate).toLocaleString("id-ID")]})]})]}),(0,t.jsx)("button",{onClick:()=>m(a),className:"ml-3 px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:"Hapus file",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},a))]})]})}let j={GRADE_I:"Grade I - Sedikit/tidak ada nekrosis (<50%)",GRADE_II:"Grade II - Nekrosis 50-90%",GRADE_III:"Grade III - Nekrosis 90-99%",GRADE_IV:"Grade IV - Nekrosis 100% (no viable tumor)"};function N(){var e,a,l,r,i,n,o,d,u,m,g,x,h,b,p,v,N,k,w,S,C,I,T;let{getSection:A,updateSection:D}=c(),L=A("section4")||{},P={laboratory:L.laboratory||{},radiology:L.radiology||{},mirrelScore:L.mirrelScore||{},pathology:L.pathology||{},radiologyModalities:L.radiologyModalities||[],pathologyFiles:L.pathologyFiles||[]};(0,s.useEffect)(()=>{let{siteScore:e,painScore:a,lesionType:l,sizeScore:t}=P.mirrelScore||{};if(e&&a&&l&&t){let s=e+a+("BLASTIC"===l?1:"MIXED"===l?2:3)+t,r="LOW";s>=11?r="HIGH":s>=8&&(r="MODERATE"),D("section4",{...P,mirrelScore:{...P.mirrelScore,totalScore:s,fractureRisk:r}})}},[null===(e=P.mirrelScore)||void 0===e?void 0:e.siteScore,null===(a=P.mirrelScore)||void 0===a?void 0:a.painScore,null===(l=P.mirrelScore)||void 0===l?void 0:l.lesionType,null===(r=P.mirrelScore)||void 0===r?void 0:r.sizeScore]);let E=(e,a)=>{D("section4",{...P,laboratory:{...P.laboratory,[e]:a}})},M=(e,a)=>{D("section4",{...P,mirrelScore:{...P.mirrelScore,[e]:a}})},R=(e,a)=>{D("section4",{...P,pathology:{...P.pathology,[e]:a}})},O=e=>{var a;let l=(null===(a=P.pathology)||void 0===a?void 0:a.ihkMarkers)||[],t=l.filter((a,l)=>l!==e);R("ihkMarkers",t)},B=(e,a,l)=>{var t;let s=(null===(t=P.pathology)||void 0===t?void 0:t.ihkMarkers)||[],r=[...s];r[e]={...r[e],[a]:l},R("ihkMarkers",r)},H=e=>"HIGH"===e?"bg-red-100 border-red-300 text-red-900":"MODERATE"===e?"bg-yellow-100 border-yellow-300 text-yellow-900":"LOW"===e?"bg-green-100 border-green-300 text-green-900":"bg-gray-100 border-gray-300 text-gray-900";return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pemeriksaan Penunjang Diagnostik"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Hasil laboratorium, radiologi, dan pemeriksaan patologi"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hasil Laboratorium"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hemoglobin (g/dL)"}),(0,t.jsx)("input",{type:"number",step:"0.1",value:(null===(i=P.laboratory)||void 0===i?void 0:i.hemoglobin)||"",onChange:e=>E("hemoglobin",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 12-16 (F), 13-17 (M)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leukosit (x10/L)"}),(0,t.jsx)("input",{type:"number",step:"0.1",value:(null===(n=P.laboratory)||void 0===n?void 0:n.leukocytes)||"",onChange:e=>E("leukocytes",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 4-10",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trombosit (x10/L)"}),(0,t.jsx)("input",{type:"number",step:"1",value:(null===(o=P.laboratory)||void 0===o?void 0:o.platelets)||"",onChange:e=>E("platelets",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 150-400",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alkaline Phosphatase (U/L)",(0,t.jsx)("span",{className:"ml-2 text-xs text-blue-600",children:"Penanda tumor tulang"})]}),(0,t.jsx)("input",{type:"number",step:"1",value:(null===(d=P.laboratory)||void 0===d?void 0:d.alkalinePhosphatase)||"",onChange:e=>E("alkalinePhosphatase",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 30-120",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["LDH (U/L)",(0,t.jsx)("span",{className:"ml-2 text-xs text-blue-600",children:"Penanda tumor"})]}),(0,t.jsx)("input",{type:"number",step:"1",value:(null===(u=P.laboratory)||void 0===u?void 0:u.ldh)||"",onChange:e=>E("ldh",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 140-280",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kalsium (mg/dL)"}),(0,t.jsx)("input",{type:"number",step:"0.1",value:(null===(m=P.laboratory)||void 0===m?void 0:m.calcium)||"",onChange:e=>E("calcium",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 8.5-10.5",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsx)(f,{}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Mirrel Score Calculator"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Penilaian risiko fraktur patologis (Pathological Fracture Risk)"})]}),(null===(g=P.mirrelScore)||void 0===g?void 0:g.totalScore)&&(0,t.jsx)("div",{className:"px-4 py-2 rounded-lg border-2 ".concat(H(P.mirrelScore.fractureRisk)),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:P.mirrelScore.totalScore}),(0,t.jsxs)("div",{className:"text-xs font-medium",children:[P.mirrelScore.fractureRisk," RISK"]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi (Site) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(x=P.mirrelScore)||void 0===x?void 0:x.siteScore)||"",onChange:e=>M("siteScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Lokasi"}),(0,t.jsx)("option",{value:"1",children:"1 - Upper Limb (Ekstremitas Atas)"}),(0,t.jsx)("option",{value:"2",children:"2 - Lower Limb (Ekstremitas Bawah)"}),(0,t.jsx)("option",{value:"3",children:"3 - Peritrochanteric (Trokanter)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nyeri (Pain) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(h=P.mirrelScore)||void 0===h?void 0:h.painScore)||"",onChange:e=>M("painScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Tingkat Nyeri"}),(0,t.jsx)("option",{value:"1",children:"1 - Mild (Ringan)"}),(0,t.jsx)("option",{value:"2",children:"2 - Moderate (Sedang)"}),(0,t.jsx)("option",{value:"3",children:"3 - Functional (Nyeri fungsional)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipe Lesi (Lesion Type) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(b=P.mirrelScore)||void 0===b?void 0:b.lesionType)||"",onChange:e=>M("lesionType",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Tipe Lesi"}),(0,t.jsx)("option",{value:"BLASTIC",children:"Blastic (1 point)"}),(0,t.jsx)("option",{value:"MIXED",children:"Mixed (2 points)"}),(0,t.jsx)("option",{value:"LYTIC",children:"Lytic (3 points)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ukuran (Size) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(p=P.mirrelScore)||void 0===p?void 0:p.sizeScore)||"",onChange:e=>M("sizeScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Ukuran Lesi"}),(0,t.jsxs)("option",{value:"1",children:["1 - ","<","1/3 diameter tulang"]}),(0,t.jsx)("option",{value:"2",children:"2 - 1/3 - 2/3 diameter tulang"}),(0,t.jsxs)("option",{value:"3",children:["3 - ",">","2/3 diameter tulang"]})]})]})]}),(null===(v=P.mirrelScore)||void 0===v?void 0:v.totalScore)&&(0,t.jsx)("div",{className:"mt-4 p-4 rounded-lg border-2 ".concat(H(P.mirrelScore.fractureRisk)),children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:"Interpretasi Mirrel Score:"}),(0,t.jsxs)("p",{className:"mt-1",children:["Total Skor: ",(0,t.jsx)("span",{className:"font-bold",children:P.mirrelScore.totalScore})," / 12"]}),(0,t.jsxs)("p",{className:"mt-1",children:["Risiko Fraktur: ",(0,t.jsx)("span",{className:"font-bold",children:P.mirrelScore.fractureRisk})]}),(0,t.jsxs)("p",{className:"mt-2 text-xs",children:["LOW"===P.mirrelScore.fractureRisk&&"Risiko rendah fraktur patologis. Observasi rutin.","MODERATE"===P.mirrelScore.fractureRisk&&"Risiko sedang fraktur patologis. Pertimbangkan profilaksis.","HIGH"===P.mirrelScore.fractureRisk&&"Risiko tinggi fraktur patologis. Intervensi profilaksis direkomendasikan."]})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hasil Patologi"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Biopsi"}),(0,t.jsxs)("select",{value:(null===(N=P.pathology)||void 0===N?void 0:N.biopsyType)||"",onChange:e=>R("biopsyType",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih Jenis Biopsi"}),(0,t.jsx)("option",{value:"Core needle",children:"Core Needle Biopsy"}),(0,t.jsx)("option",{value:"Incisional",children:"Incisional Biopsy"}),(0,t.jsx)("option",{value:"Excisional",children:"Excisional Biopsy"}),(0,t.jsx)("option",{value:"Open",children:"Open Biopsy"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Biopsi"}),(0,t.jsx)("input",{type:"date",value:(null===(k=P.pathology)||void 0===k?void 0:k.biopsyDate)||"",onChange:e=>R("biopsyDate",e.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temuan Patologi Anatomi"}),(0,t.jsx)("textarea",{value:(null===(w=P.pathology)||void 0===w?void 0:w.pathologyFindings)||"",onChange:e=>R("pathologyFindings",e.target.value),rows:4,placeholder:"Contoh: Tampak jaringan nekrosis luas (90%), sel tumor viabel minimal, respon baik terhadap kemoterapi...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HUVOS Grade (Respon Kemoterapi)"}),(0,t.jsxs)("select",{value:(null===(S=P.pathology)||void 0===S?void 0:S.huvosGrade)||"",onChange:e=>R("huvosGrade",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih HUVOS Grade"}),Object.entries(j).map(e=>{let[a,l]=e;return(0,t.jsx)("option",{value:a,children:l},a)})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Grading respons terhadap kemoterapi berdasarkan persentase nekrosis tumor"})]}),(null===(C=P.pathology)||void 0===C?void 0:C.huvosGrade)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Persentase Nekrosis Tumor (%)"}),(0,t.jsx)("input",{type:"number",min:"0",max:"100",step:"1",value:(null===(I=P.pathology)||void 0===I?void 0:I.necrosisPercentage)||"",onChange:e=>R("necrosisPercentage",e.target.value?parseInt(e.target.value):void 0),placeholder:"Contoh: 95",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Immunohistochemistry (IHK) Markers"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Penanda imunogenetik untuk identifikasi tumor (ER, PR, HER2, S100, CD34, dll)"})]}),(0,t.jsx)("button",{onClick:()=>{var e;let a=(null===(e=P.pathology)||void 0===e?void 0:e.ihkMarkers)||[];R("ihkMarkers",[...a,{marker:"",result:""}])},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"+ Tambah Marker"})]}),(null===(T=P.pathology)||void 0===T?void 0:T.ihkMarkers)&&P.pathology.ihkMarkers.length>0?(0,t.jsx)("div",{className:"space-y-3",children:P.pathology.ihkMarkers.map((e,a)=>(0,t.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Penanda"}),(0,t.jsx)("input",{type:"text",value:e.marker,onChange:e=>B(a,"marker",e.target.value),placeholder:"Contoh: S100, ER, PR, HER2, CD34",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Hasil"}),(0,t.jsx)("input",{type:"text",value:e.result,onChange:e=>B(a,"result",e.target.value),placeholder:"Contoh: Positive, Negative, Score 3+",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,t.jsx)("button",{onClick:()=>O(a),className:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},a))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic py-3",children:'Tidak ada marker IHK yang ditambahkan. Klik tombol "Tambah Marker" untuk menambah penanda immunohistokimia.'})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,t.jsx)(y,{})})]})]})}var k=l(8811),w=l.n(k);w()(()=>Promise.all([l.e(4417),l.e(5600),l.e(6821)]).then(l.bind(l,6821)).then(e=>({default:e.WhoClassificationTree})),{loadableGenerated:{webpack:()=>[6821]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 h-64 rounded-lg"})});let S=w()(()=>Promise.all([l.e(4417),l.e(5600),l.e(6821),l.e(1313)]).then(l.bind(l,1313)).then(e=>({default:e.BoneTumorTree})),{loadableGenerated:{webpack:()=>[1313]},ssr:!1}),C=w()(()=>Promise.all([l.e(4417),l.e(5600),l.e(6821),l.e(5729)]).then(l.bind(l,5729)).then(e=>({default:e.SoftTissueTumorTree})),{loadableGenerated:{webpack:()=>[5729]},ssr:!1});function I(){let{getSection:e,updateSection:a}=c(),l=e("section1"),r=e("section5")||{},i={whoClassificationId:r.whoClassificationId||"",whoClassificationCode:r.whoClassificationCode||"",whoClassificationName:r.whoClassificationName||"",boneLocationId:r.boneLocationId||"",boneLocationName:r.boneLocationName||"",softTissueLocationId:r.softTissueLocationId||"",softTissueLocationName:r.softTissueLocationName||"",tumorSide:r.tumorSide||"",specificAnatomicalSite:r.specificAnatomicalSite||""},[n,o]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1),x=(null==l?void 0:l.pathologyTypeName)||"",h=(null==l?void 0:l.pathologyType)||"",b=h.includes("bone")||x.includes("Tulang"),p=h.includes("soft")||x.includes("Jaringan Lunak");(0,s.useEffect)(()=>{b?v():p&&f()},[b,p]);let v=async()=>{try{g(!0);let e=await fetch("".concat("http://localhost:3001/api/v1","/locations/bone"));if(!e.ok)throw Error("Failed to load bone locations");let a=await e.json();o(Array.isArray(a)?a:a.data||[])}catch(e){console.error("Error loading bone locations:",e),o([])}finally{g(!1)}},f=async()=>{try{g(!0);let e=await fetch("".concat("http://localhost:3001/api/v1","/locations/soft-tissue"));if(!e.ok)throw Error("Failed to load soft tissue locations");let a=await e.json();u(Array.isArray(a)?a:a.data||[])}catch(e){console.error("Error loading soft tissue locations:",e),u([])}finally{g(!1)}},y=e=>{a("section5",{...i,whoClassificationId:e.id,whoClassificationCode:e.code,whoClassificationName:e.name})},j=(e,l)=>{a("section5",{...i,[e]:l})};return(null==l?void 0:l.pathologyType)?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Diagnosis & Lokasi Tumor"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Pilih klasifikasi WHO dan lokasi anatomis tumor muskuloskeletal"}),(0,t.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Jenis Patologi: ",x]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Klasifikasi Tumor WHO (5th Edition)",(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsxs)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 h-64 rounded-lg"}),children:[b&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Pilih dari 57 klasifikasi tumor tulang WHO (5th Edition, 2020)"}),(0,t.jsx)(S,{selectedId:i.whoClassificationId,onSelect:y,searchable:!0,showCodes:!0})]}),p&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Pilih dari 68 klasifikasi tumor jaringan lunak WHO (5th Edition, 2020)"}),(0,t.jsx)(C,{selectedId:i.whoClassificationId,onSelect:y,searchable:!0,showCodes:!0})]}),!b&&!p&&(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Klasifikasi untuk jenis patologi ",x," akan ditampilkan di sini."]})})]}),i.whoClassificationId&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Klasifikasi Dipilih:"}),(0,t.jsxs)("p",{className:"text-sm text-green-900 font-semibold mt-1",children:[i.whoClassificationCode," - ",i.whoClassificationName]})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Lokasi Anatomis",(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),b&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi Tulang ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:i.boneLocationId||"",onChange:e=>{let l=e.target.value,t=n.find(e=>e.id===l);a("section5",{...i,boneLocationId:l,boneLocationName:null==t?void 0:t.name})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Lokasi Tulang"}),n.filter(e=>1===e.level).map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Pilih lokasi tulang utama. Anda dapat menambahkan detail spesifik di bawah."})]}),p&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi Jaringan Lunak ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:i.softTissueLocationId||"",onChange:e=>{let l=e.target.value,t=d.find(e=>e.id===l);a("section5",{...i,softTissueLocationId:l,softTissueLocationName:null==t?void 0:t.name})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Pilih Lokasi Jaringan Lunak"}),d.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name,e.anatomicalRegion&&" (".concat(e.anatomicalRegion,")")]},e.id))]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Pilih lokasi jaringan lunak berdasarkan region anatomis."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sisi/Lateralitas Tumor ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"LEFT",label:"Kiri",icon:""},{value:"RIGHT",label:"Kanan",icon:""},{value:"BILATERAL",label:"Bilateral",icon:""},{value:"MIDLINE",label:"Midline",icon:""}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>j("tumorSide",e.value),className:"\n                  px-4 py-3 rounded-lg border-2 text-center transition-all\n                  ".concat(i.tumorSide===e.value?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 bg-white text-gray-700 hover:border-blue-300","\n                "),children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,t.jsx)("div",{className:"text-sm font-medium",children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detail Spesifik Lokasi Anatomis"}),(0,t.jsx)("textarea",{value:i.specificAnatomicalSite||"",onChange:e=>j("specificAnatomicalSite",e.target.value),rows:3,placeholder:"Contoh: Distal femur, 5 cm dari sendi lutut, melibatkan korteks anterior",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Berikan deskripsi detail lokasi tumor untuk dokumentasi klinis yang lengkap."})]})]}),i.whoClassificationId&&(i.boneLocationId||i.softTissueLocationId)&&i.tumorSide&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-blue-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-blue-900",children:"Diagnosis & Lokasi Lengkap"}),(0,t.jsxs)("div",{className:"mt-2 text-blue-800 space-y-1",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"WHO:"})," ",i.whoClassificationCode," -"," ",i.whoClassificationName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Lokasi:"})," ",i.boneLocationName||i.softTissueLocationName," (",i.tumorSide,")"]})]})]})]})})]}):(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-yellow-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-yellow-800 font-medium",children:"Jenis Patologi Belum Dipilih"}),(0,t.jsx)("p",{className:"text-yellow-700 mt-1",children:"Silakan kembali ke Bagian 1 untuk memilih jenis patologi terlebih dahulu."})]})]})})}let T={IA:"Stage IA - Low grade, Intracompartmental, No metastasis",IB:"Stage IB - Low grade, Extracompartmental, No metastasis",IIA:"Stage IIA - High grade, Intracompartmental, No metastasis",IIB:"Stage IIB - High grade, Extracompartmental, No metastasis",III:"Stage III - Any grade, Any site, Regional or distant metastasis"};function A(){var e,a,l,r,i,n,o,d,u,m,g,x,h,b,p,v,f,y,j,N,k,w;let{getSection:S,updateSection:C}=c(),I=S("section6")||{},A={stagingSystem:I.stagingSystem||"BOTH",enneking:I.enneking||{},ajcc:I.ajcc||{},stagingDate:I.stagingDate||"",stagingNotes:I.stagingNotes||""};(0,s.useEffect)(()=>{let{grade:e,site:a,metastasis:l}=A.enneking||{};if(e&&a&&l){var t;let s,r;if("YES"===l)s="III",r=T.III;else if("LOW"===e&&"INTRACOMPARTMENTAL"===a)s="IA",r=T.IA;else if("LOW"===e&&"EXTRACOMPARTMENTAL"===a)s="IB",r=T.IB;else if("HIGH"===e&&"INTRACOMPARTMENTAL"===a)s="IIA",r=T.IIA;else{if("HIGH"!==e||"EXTRACOMPARTMENTAL"!==a)return;s="IIB",r=T.IIB}(null===(t=A.enneking)||void 0===t?void 0:t.stage)!==s&&C("section6",{...A,enneking:{...A.enneking,grade:e,site:a,metastasis:l,stage:s,description:r}})}},[null===(e=A.enneking)||void 0===e?void 0:e.grade,null===(a=A.enneking)||void 0===a?void 0:a.site,null===(l=A.enneking)||void 0===l?void 0:l.metastasis]);let D=(e,a)=>{C("section6",{...A,enneking:{...A.enneking,[e]:a}})},L=(e,a)=>{C("section6",{...A,ajcc:{...A.ajcc,[e]:a}})},P=(e,a)=>{C("section6",{...A,[e]:a})},E="ENNEKING"===A.stagingSystem||"BOTH"===A.stagingSystem,M="AJCC"===A.stagingSystem||"BOTH"===A.stagingSystem;return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Stadium Tumor (Tumor Staging)"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Tentukan stadium tumor menggunakan sistem Enneking dan/atau AJCC"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Sistem Stadium ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"ENNEKING",label:"Enneking",description:"Khusus tumor muskuloskeletal"},{value:"AJCC",label:"AJCC TNM",description:"Sistem TNM standar"},{value:"BOTH",label:"Keduanya",description:"Enneking + AJCC"}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>P("stagingSystem",e.value),className:"\n                p-4 rounded-lg border-2 text-left transition-all\n                ".concat(A.stagingSystem===e.value?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300","\n              "),children:[(0,t.jsx)("div",{className:"font-semibold mb-1 ".concat(A.stagingSystem===e.value?"text-blue-900":"text-gray-900"),children:e.label}),(0,t.jsx)("div",{className:"text-sm ".concat(A.stagingSystem===e.value?"text-blue-700":"text-gray-600"),children:e.description})]},e.value))})]}),E&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-white rounded-lg border-2 border-purple-200 p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-purple-900 mb-4 flex items-center",children:[(0,t.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Enneking Staging System"]}),(0,t.jsx)("p",{className:"text-sm text-purple-700 mb-6",children:"Sistem stadium khusus untuk tumor muskuloskeletal berdasarkan grade, kompartemen, dan metastasis"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Grade (Derajat Keganasan) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>D("grade","LOW"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(r=A.enneking)||void 0===r?void 0:r.grade)==="LOW"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400","\n                  "),children:[(0,t.jsx)("div",{className:"font-semibold",children:"G1 - Low Grade"}),(0,t.jsx)("div",{className:"text-sm mt-1 opacity-80",children:"Derajat rendah / jinak"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>D("grade","HIGH"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(i=A.enneking)||void 0===i?void 0:i.grade)==="HIGH"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400","\n                  "),children:[(0,t.jsx)("div",{className:"font-semibold",children:"G2 - High Grade"}),(0,t.jsx)("div",{className:"text-sm mt-1 opacity-80",children:"Derajat tinggi / ganas"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Lokasi (Kompartemen) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>D("site","INTRACOMPARTMENTAL"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(n=A.enneking)||void 0===n?void 0:n.site)==="INTRACOMPARTMENTAL"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400","\n                  "),children:[(0,t.jsx)("div",{className:"font-semibold",children:"T1 - Intracompartmental"}),(0,t.jsx)("div",{className:"text-sm mt-1 opacity-80",children:"Terbatas dalam satu kompartemen"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>D("site","EXTRACOMPARTMENTAL"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(o=A.enneking)||void 0===o?void 0:o.site)==="EXTRACOMPARTMENTAL"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400","\n                  "),children:[(0,t.jsx)("div",{className:"font-semibold",children:"T2 - Extracompartmental"}),(0,t.jsx)("div",{className:"text-sm mt-1 opacity-80",children:"Meluas ke luar kompartemen"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Metastasis ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>D("metastasis","NO"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(d=A.enneking)||void 0===d?void 0:d.metastasis)==="NO"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400","\n                  "),children:[(0,t.jsx)("div",{className:"font-semibold",children:"M0 - Tidak ada"}),(0,t.jsx)("div",{className:"text-sm mt-1 opacity-80",children:"Tidak ada metastasis"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>D("metastasis","YES"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(u=A.enneking)||void 0===u?void 0:u.metastasis)==="YES"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400","\n                  "),children:[(0,t.jsx)("div",{className:"font-semibold",children:"M1 - Ada"}),(0,t.jsx)("div",{className:"text-sm mt-1 opacity-80",children:"Regional atau distant metastasis"})]})]})]}),(null===(m=A.enneking)||void 0===m?void 0:m.stage)&&(0,t.jsx)("div",{className:"mt-6 p-6 bg-gradient-to-r from-purple-600 to-purple-700 rounded-lg text-white",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"Stadium Enneking"}),(0,t.jsx)("div",{className:"text-3xl font-bold",children:A.enneking.stage})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("div",{className:"text-sm opacity-90",children:A.enneking.description})})]})})]})]}),M&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-lg border-2 border-blue-200 p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-blue-900 mb-4 flex items-center",children:[(0,t.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"AJCC TNM Staging System"]}),(0,t.jsx)("p",{className:"text-sm text-blue-700 mb-6",children:"Sistem stadium TNM dari American Joint Committee on Cancer"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"AJCC Edition"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>L("ajccEdition","8th"),className:"\n                    p-3 rounded-lg border-2 transition-all\n                    ".concat((null===(g=A.ajcc)||void 0===g?void 0:g.ajccEdition)==="8th"?"border-blue-600 bg-blue-100 text-blue-900":"border-gray-300 bg-white hover:border-blue-400","\n                  "),children:"8th Edition (2017)"}),(0,t.jsx)("button",{type:"button",onClick:()=>L("ajccEdition","7th"),className:"\n                    p-3 rounded-lg border-2 transition-all\n                    ".concat((null===(x=A.ajcc)||void 0===x?void 0:x.ajccEdition)==="7th"?"border-blue-600 bg-blue-100 text-blue-900":"border-gray-300 bg-white hover:border-blue-400","\n                  "),children:"7th Edition (2010)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["T - Primary Tumor (Tumor Primer) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(h=A.ajcc)||void 0===h?void 0:h.t)||"",onChange:e=>L("t",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih klasifikasi T"}),(0,t.jsx)("option",{value:"TX",children:"TX - Tumor primer tidak dapat dinilai"}),(0,t.jsx)("option",{value:"T0",children:"T0 - Tidak ada bukti tumor primer"}),(0,t.jsx)("option",{value:"T1",children:"T1 - Tumor  5 cm"}),(0,t.jsx)("option",{value:"T2",children:"T2 - Tumor > 5 cm tapi  10 cm"}),(0,t.jsx)("option",{value:"T3",children:"T3 - Tumor > 10 cm tapi  15 cm"}),(0,t.jsx)("option",{value:"T4",children:"T4 - Tumor > 15 cm"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["N - Regional Lymph Nodes (Kelenjar Getah Bening Regional) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(b=A.ajcc)||void 0===b?void 0:b.n)||"",onChange:e=>L("n",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih klasifikasi N"}),(0,t.jsx)("option",{value:"NX",children:"NX - Kelenjar getah bening regional tidak dapat dinilai"}),(0,t.jsx)("option",{value:"N0",children:"N0 - Tidak ada metastasis kelenjar getah bening regional"}),(0,t.jsx)("option",{value:"N1",children:"N1 - Metastasis kelenjar getah bening regional"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["M - Distant Metastasis (Metastasis Jauh) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(p=A.ajcc)||void 0===p?void 0:p.m)||"",onChange:e=>L("m",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih klasifikasi M"}),(0,t.jsx)("option",{value:"M0",children:"M0 - Tidak ada metastasis jauh"}),(0,t.jsx)("option",{value:"M1",children:"M1 - Metastasis jauh"}),(0,t.jsx)("option",{value:"M1a",children:"M1a - Metastasis paru"}),(0,t.jsx)("option",{value:"M1b",children:"M1b - Metastasis lokasi lain"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["G - Histologic Grade (Grade Histologi) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(v=A.ajcc)||void 0===v?void 0:v.grade)||"",onChange:e=>L("grade",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih grade histologi"}),(0,t.jsx)("option",{value:"GX",children:"GX - Grade tidak dapat ditentukan"}),(0,t.jsx)("option",{value:"G1",children:"G1 - Well differentiated (diferensiasi baik)"}),(0,t.jsx)("option",{value:"G2",children:"G2 - Moderately differentiated (diferensiasi sedang)"}),(0,t.jsx)("option",{value:"G3",children:"G3 - Poorly differentiated (diferensiasi buruk)"}),(0,t.jsx)("option",{value:"G4",children:"G4 - Undifferentiated (tidak terdiferensiasi)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Overall Stage (Stadium Keseluruhan) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(f=A.ajcc)||void 0===f?void 0:f.stage)||"",onChange:e=>L("stage",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih stadium keseluruhan"}),(0,t.jsx)("option",{value:"I",children:"Stage I"}),(0,t.jsx)("option",{value:"IA",children:"Stage IA"}),(0,t.jsx)("option",{value:"IB",children:"Stage IB"}),(0,t.jsx)("option",{value:"II",children:"Stage II"}),(0,t.jsx)("option",{value:"IIA",children:"Stage IIA"}),(0,t.jsx)("option",{value:"IIB",children:"Stage IIB"}),(0,t.jsx)("option",{value:"III",children:"Stage III"}),(0,t.jsx)("option",{value:"IIIA",children:"Stage IIIA"}),(0,t.jsx)("option",{value:"IIIB",children:"Stage IIIB"}),(0,t.jsx)("option",{value:"IV",children:"Stage IV"}),(0,t.jsx)("option",{value:"IVA",children:"Stage IVA"}),(0,t.jsx)("option",{value:"IVB",children:"Stage IVB"})]})]}),(null===(y=A.ajcc)||void 0===y?void 0:y.t)&&(null===(j=A.ajcc)||void 0===j?void 0:j.n)&&(null===(N=A.ajcc)||void 0===N?void 0:N.m)&&(0,t.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg text-white",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"TNM Classification"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[A.ajcc.t,A.ajcc.n,A.ajcc.m]})]}),A.ajcc.stage&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm opacity-90 mb-1",children:"Overall Stage"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:A.ajcc.stage})]})]}),A.ajcc.grade&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-blue-500",children:[(0,t.jsx)("span",{className:"text-sm opacity-90",children:"Grade: "}),(0,t.jsx)("span",{className:"font-semibold",children:A.ajcc.grade})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Tambahan"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Staging"}),(0,t.jsx)("input",{type:"date",value:A.stagingDate||"",onChange:e=>P("stagingDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan Staging"}),(0,t.jsx)("textarea",{value:A.stagingNotes||"",onChange:e=>P("stagingNotes",e.target.value),rows:4,placeholder:"Catatan tambahan mengenai staging, misalnya alasan pemilihan sistem tertentu, temuan klinis yang mempengaruhi staging, dll.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(E&&(null===(k=A.enneking)||void 0===k?void 0:k.stage)||M&&(null===(w=A.ajcc)||void 0===w?void 0:w.stage))&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm text-green-800",children:[(0,t.jsx)("span",{className:"font-medium",children:"Staging lengkap."})," Anda dapat melanjutkan ke bagian selanjutnya."]})]})})]})}function D(){let{getSection:e,updateSection:a}=c(),l=e("section7")||{},s={cpcDate:l.cpcDate||"",consultantsPresent:l.consultantsPresent||"",decision:l.decision||""},r=(e,l)=>{a("section7",{...s,[e]:l})};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"CPC (Clinico-Pathological Conference)"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Dokumentasi konferensi klinis-patologis untuk kasus ini"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal"}),(0,t.jsx)("input",{type:"date",value:s.cpcDate||"",onChange:e=>r("cpcDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Tanggal pelaksanaan CPC"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Konsultan Hadir"}),(0,t.jsx)("textarea",{value:s.consultantsPresent||"",onChange:e=>r("consultantsPresent",e.target.value),rows:4,placeholder:"Contoh: 1. Dr. Ahmad Sutanto, Sp.OT(K)Onk - Konsultan Ortopedi Onkologi 2. Dr. Siti Rahayu, Sp.PA - Konsultan Patologi Anatomi 3. Dr. Budi Santoso, Sp.Rad(K)Onk - Konsultan Radiologi Onkologi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Daftar nama konsultan yang hadir dalam CPC"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keputusan"}),(0,t.jsx)("textarea",{value:s.decision||"",onChange:e=>r("decision",e.target.value),rows:6,placeholder:"Contoh: Keputusan CPC: 1. Diagnosis: Osteosarcoma femur distal kanan stadium IIB 2. Rencana terapi: - Kemoterapi neo-adjuvant (protokol MAP) 3 siklus - Wide excision dengan limb salvage reconstruction - Kemoterapi adjuvant 3 siklus 3. Follow-up: Evaluasi setiap 3 bulan tahun pertama",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Keputusan dan rekomendasi dari CPC"})]})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Catatan:"}),(0,t.jsx)("p",{children:"CPC adalah forum multidisiplin untuk mendiskusikan diagnosis dan rencana terapi kasus tumor muskuloskeletal. Keputusan CPC menjadi acuan utama dalam penatalaksanaan pasien."})]})]})})]})}let L=["Infeksi superfisial","Infeksi dalam","Wound dehiscence","Hematoma","Nerve injury","Vascular injury","Prosthesis failure","Nonunion / malunion","Kontraktur sendi","Heterotopic ossification"];function P(){var e,a,l,r,i,n,o,d,u,m,g,x,h,b,p,v,f,y,j,N,k,w,S,C,I,T,A,D,P,E,M,R,O,B,H,F,G,K,V,z,_,U;let{getSection:W,updateSection:J}=c(),q=W("section8")||{},[Y,X]=(0,s.useState)("SURGERY"===q.primaryTreatment||"MULTIMODAL"===q.primaryTreatment),[$,Q]=(0,s.useState)((null===(e=q.chemotherapy)||void 0===e?void 0:e.received)||!1),[Z,ee]=(0,s.useState)((null===(a=q.radiation)||void 0===a?void 0:a.received)||!1),ea=(e,a)=>{J("section8",{...q,[e]:a})},el=(e,a)=>{ea("surgery",{...q.surgery,[e]:a})},et=(e,a)=>{ea("chemotherapy",{...q.chemotherapy,[e]:a})},es=(e,a)=>{ea("radiation",{...q.radiation,[e]:a})},er=e=>{var a;let l=(null===(a=q.surgery)||void 0===a?void 0:a.complications)||[],t=l.includes(e)?l.filter(a=>a!==e):[...l,e];el("complications",t)};return(0,s.useEffect)(()=>{X("SURGERY"===q.primaryTreatment||"MULTIMODAL"===q.primaryTreatment)},[q.primaryTreatment]),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manajemen Pengobatan (Treatment Management)"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Dokumentasi lengkap pengobatan termasuk bedah (LIMB SALVAGE), kemoterapi, radiasi, dan modalitas lainnya"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-white rounded-lg border-2 border-purple-200 p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Tujuan Pengobatan (Treatment Intention) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>ea("treatmentIntention","CURATIVE"),className:"\n              p-4 rounded-lg border-2 text-center transition-all\n              ".concat("CURATIVE"===q.treatmentIntention?"border-green-600 bg-green-50 text-green-900":"border-gray-200 bg-white hover:border-green-400","\n            "),children:[(0,t.jsx)("div",{className:"text-3xl mb-2",children:"\uD83C\uDFAF"}),(0,t.jsx)("div",{className:"font-bold",children:"CURATIVE"}),(0,t.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Tujuan menyembuhkan"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>ea("treatmentIntention","PALLIATIVE"),className:"\n              p-4 rounded-lg border-2 text-center transition-all\n              ".concat("PALLIATIVE"===q.treatmentIntention?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 bg-white hover:border-blue-400","\n            "),children:[(0,t.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDC8A"}),(0,t.jsx)("div",{className:"font-bold",children:"PALLIATIVE"}),(0,t.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Mengurangi gejala"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Analgesia (Tanggal Mulai)"}),(0,t.jsx)("input",{type:"date",value:q.analgesiaStartDate||"",onChange:e=>ea("analgesiaStartDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Modalitas Pengobatan Primer ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"SURGERY",label:"Bedah",icon:"\uD83C\uDFE5"},{value:"CHEMOTHERAPY",label:"Kemoterapi",icon:"\uD83D\uDC8A"},{value:"RADIATION",label:"Radiasi",icon:""},{value:"MULTIMODAL",label:"Multimodal",icon:"\uD83D\uDD2C"}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>ea("primaryTreatment",e.value),className:"\n                p-4 rounded-lg border-2 text-center transition-all\n                ".concat(q.primaryTreatment===e.value?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300","\n              "),children:[(0,t.jsx)("div",{className:"text-3xl mb-2",children:e.icon}),(0,t.jsx)("div",{className:"font-semibold ".concat(q.primaryTreatment===e.value?"text-blue-900":"text-gray-900"),children:e.label})]},e.value))})]}),Y&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-white rounded-lg border-2 border-red-200 p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-red-900 mb-4 flex items-center",children:[(0,t.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})}),"Pengobatan Bedah (Surgical Treatment)"]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg p-6 border-2 border-yellow-400",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("svg",{className:"w-8 h-8 text-yellow-700 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-bold text-yellow-900",children:"LIMB SALVAGE STATUS"}),(0,t.jsx)("p",{className:"text-sm text-yellow-800",children:"Indikator utama keberhasilan bedah tumor muskuloskeletal"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>el("limbSalvageStatus","LIMB_SALVAGE"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(l=q.surgery)||void 0===l?void 0:l.limbSalvageStatus)==="LIMB_SALVAGE"?"border-green-600 bg-green-100 text-green-900":"border-yellow-400 bg-white hover:border-green-500","\n                  "),children:[(0,t.jsx)("div",{className:"text-2xl mb-2",children:""}),(0,t.jsx)("div",{className:"font-bold",children:"LIMB SALVAGE"}),(0,t.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Ekstremitas dipertahankan"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>el("limbSalvageStatus","AMPUTATION"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(r=q.surgery)||void 0===r?void 0:r.limbSalvageStatus)==="AMPUTATION"?"border-red-600 bg-red-100 text-red-900":"border-yellow-400 bg-white hover:border-red-500","\n                  "),children:[(0,t.jsx)("div",{className:"text-2xl mb-2",children:""}),(0,t.jsx)("div",{className:"font-bold",children:"AMPUTATION"}),(0,t.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Amputasi dilakukan"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>el("limbSalvageStatus","NOT_APPLICABLE"),className:"\n                    p-4 rounded-lg border-2 transition-all\n                    ".concat((null===(i=q.surgery)||void 0===i?void 0:i.limbSalvageStatus)==="NOT_APPLICABLE"?"border-gray-600 bg-gray-100 text-gray-900":"border-yellow-400 bg-white hover:border-gray-500","\n                  "),children:[(0,t.jsx)("div",{className:"text-2xl mb-2",children:""}),(0,t.jsx)("div",{className:"font-bold",children:"NOT APPLICABLE"}),(0,t.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Bukan tumor ekstremitas"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Operasi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",value:(null===(n=q.surgery)||void 0===n?void 0:n.surgeryDate)||"",onChange:e=>el("surgeryDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Jenis Operasi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(o=q.surgery)||void 0===o?void 0:o.surgeryType)||"",onChange:e=>el("surgeryType",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih jenis operasi"}),(0,t.jsx)("option",{value:"WIDE_EXCISION",children:"Wide Excision"}),(0,t.jsx)("option",{value:"MARGINAL_EXCISION",children:"Marginal Excision"}),(0,t.jsx)("option",{value:"INTRALESIONAL",children:"Intralesional"}),(0,t.jsx)("option",{value:"AMPUTATION",children:"Amputation"}),(0,t.jsx)("option",{value:"ROTATIONPLASTY",children:"Rotationplasty"}),(0,t.jsx)("option",{value:"OTHER",children:"Lainnya"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durasi Operasi (menit)"}),(0,t.jsx)("input",{type:"number",value:(null===(d=q.surgery)||void 0===d?void 0:d.surgeryDuration)||"",onChange:e=>el("surgeryDuration",parseInt(e.target.value)),placeholder:"Contoh: 180",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perdarahan (ml)"}),(0,t.jsx)("input",{type:"number",value:(null===(u=q.surgery)||void 0===u?void 0:u.bloodLoss)||"",onChange:e=>el("bloodLoss",parseInt(e.target.value)),placeholder:"Contoh: 500",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kontaminasi Intraoperatif"}),(0,t.jsx)("div",{className:"flex items-center h-12",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(m=q.surgery)||void 0===m?void 0:m.intraoperativeContamination)||!1,onChange:e=>el("intraoperativeContamination",e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500 h-5 w-5"}),(0,t.jsx)("span",{className:"ml-3 text-sm text-gray-700",children:"Ya, terjadi kontaminasi"})]})})]})]}),(null===(g=q.surgery)||void 0===g?void 0:g.limbSalvageStatus)==="LIMB_SALVAGE"&&(0,t.jsxs)("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:[(0,t.jsxs)("h4",{className:"font-bold text-green-900 mb-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-2xl mr-2",children:"\uD83E\uDDB4"}),"Detail Limb Salvage"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Teknik Rekonstruksi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(x=q.surgery)||void 0===x?void 0:x.limbSalvageTechnique)||"",onChange:e=>el("limbSalvageTechnique",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih teknik rekonstruksi"}),(0,t.jsx)("option",{value:"ENDOPROSTHESIS",children:"Endoprosthesis (Modular prosthesis)"}),(0,t.jsx)("option",{value:"ALLOGRAFT",children:"Allograft"}),(0,t.jsx)("option",{value:"ALLOGRAFT_PROSTHESIS_COMPOSITE",children:"Allograft-Prosthesis Composite (APC)"}),(0,t.jsx)("option",{value:"VASCULARIZED_FIBULA",children:"Vascularized Fibula Graft"}),(0,t.jsx)("option",{value:"DISTRACTION_OSTEOGENESIS",children:"Distraction Osteogenesis"}),(0,t.jsx)("option",{value:"OTHER",children:"Lainnya"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detail Rekonstruksi"}),(0,t.jsx)("textarea",{value:(null===(h=q.surgery)||void 0===h?void 0:h.reconstructionDetails)||"",onChange:e=>el("reconstructionDetails",e.target.value),rows:3,placeholder:"Jelaskan detail teknik rekonstruksi, ukuran prosthesis, jenis graft, dll.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]})]}),(null===(b=q.surgery)||void 0===b?void 0:b.limbSalvageStatus)==="AMPUTATION"&&(0,t.jsxs)("div",{className:"bg-red-50 rounded-lg p-6 border border-red-200",children:[(0,t.jsx)("h4",{className:"font-bold text-red-900 mb-4",children:"Detail Amputasi"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Level Amputasi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(p=q.surgery)||void 0===p?void 0:p.amputationLevel)||"",onChange:e=>el("amputationLevel",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih level amputasi"}),(0,t.jsxs)("optgroup",{label:"Upper Extremity",children:[(0,t.jsx)("option",{value:"FOREQUARTER",children:"Forequarter (Interscapulothoracic)"}),(0,t.jsx)("option",{value:"ABOVE_ELBOW",children:"Above Elbow (Transhumeral)"}),(0,t.jsx)("option",{value:"BELOW_ELBOW",children:"Below Elbow (Transradial)"})]}),(0,t.jsxs)("optgroup",{label:"Lower Extremity",children:[(0,t.jsx)("option",{value:"HINDQUARTER",children:"Hindquarter (Hemipelvectomy)"}),(0,t.jsx)("option",{value:"ABOVE_KNEE",children:"Above Knee (Transfemoral)"}),(0,t.jsx)("option",{value:"BELOW_KNEE",children:"Below Knee (Transtibial)"}),(0,t.jsx)("option",{value:"SYMES",children:"Symes Amputation"})]}),(0,t.jsx)("option",{value:"DISARTICULATION",children:"Disarticulation"}),(0,t.jsx)("option",{value:"OTHER",children:"Lainnya"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alasan Amputasi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:(null===(v=q.surgery)||void 0===v?void 0:v.amputationReason)||"",onChange:e=>el("amputationReason",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih alasan amputasi"}),(0,t.jsx)("option",{value:"TUMOR_EXTENT",children:"Tumor Extent (Tumor terlalu luas)"}),(0,t.jsx)("option",{value:"FAILED_SALVAGE",children:"Failed Limb Salvage"}),(0,t.jsx)("option",{value:"RECURRENCE",children:"Local Recurrence"}),(0,t.jsx)("option",{value:"INFECTION",children:"Infection"}),(0,t.jsx)("option",{value:"PATIENT_CHOICE",children:"Patient Choice"}),(0,t.jsx)("option",{value:"OTHER",children:"Lainnya"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Status Margin Bedah ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{value:"R0_NEGATIVE",label:"R0 - Negative",color:"green"},{value:"R1_MICROSCOPIC_POSITIVE",label:"R1 - Microscopic+",color:"yellow"},{value:"R2_MACROSCOPIC_POSITIVE",label:"R2 - Macroscopic+",color:"red"}].map(e=>{var a;return(0,t.jsx)("button",{type:"button",onClick:()=>el("surgicalMargin",e.value),className:"\n                      p-3 rounded-lg border-2 transition-all\n                      ".concat((null===(a=q.surgery)||void 0===a?void 0:a.surgicalMargin)===e.value?"border-".concat(e.color,"-600 bg-").concat(e.color,"-100 text-").concat(e.color,"-900"):"border-gray-300 bg-white hover:border-gray-400","\n                    "),children:(0,t.jsx)("div",{className:"font-semibold text-sm",children:e.label})},e.value)})}),(null===(f=q.surgery)||void 0===f?void 0:f.surgicalMargin)==="R0_NEGATIVE"&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jarak Margin (mm)"}),(0,t.jsx)("input",{type:"number",value:(null===(y=q.surgery)||void 0===y?void 0:y.marginDistance)||"",onChange:e=>el("marginDistance",parseFloat(e.target.value)),placeholder:"Jarak margin dalam milimeter",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Komplikasi Pascaoperasi"}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(j=q.surgery)||void 0===j?void 0:j.infectionOccurred)||!1,onChange:e=>el("infectionOccurred",e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500 h-5 w-5"}),(0,t.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Terjadi Infeksi"})]})}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:L.map(e=>{var a,l;return(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(l=q.surgery)||void 0===l?void 0:null===(a=l.complications)||void 0===a?void 0:a.includes(e))||!1,onChange:()=>er(e),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e)})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Ahli Bedah"}),(0,t.jsx)("input",{type:"text",value:(null===(N=q.surgery)||void 0===N?void 0:N.surgeon)||"",onChange:e=>el("surgeon",e.target.value),placeholder:"Nama lengkap ahli bedah",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rumah Sakit"}),(0,t.jsx)("input",{type:"text",value:(null===(k=q.surgery)||void 0===k?void 0:k.hospital)||"",onChange:e=>el("hospital",e.target.value),placeholder:"Nama rumah sakit",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("label",{className:"flex items-center mb-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(w=q.chemotherapy)||void 0===w?void 0:w.received)||!1,onChange:e=>{et("received",e.target.checked),Q(e.target.checked)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 h-5 w-5"}),(0,t.jsx)("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Kemoterapi"})]}),$&&(0,t.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timing"}),(0,t.jsxs)("select",{value:(null===(S=q.chemotherapy)||void 0===S?void 0:S.timing)||"",onChange:e=>et("timing",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih timing"}),(0,t.jsx)("option",{value:"NEOADJUVANT",children:"Neoadjuvant (sebelum bedah)"}),(0,t.jsx)("option",{value:"ADJUVANT",children:"Adjuvant (setelah bedah)"}),(0,t.jsx)("option",{value:"BOTH",children:"Both (Neoadjuvant + Adjuvant)"}),(0,t.jsx)("option",{value:"PALLIATIVE",children:"Palliative"})]})]}),((null===(C=q.chemotherapy)||void 0===C?void 0:C.timing)==="NEOADJUVANT"||(null===(I=q.chemotherapy)||void 0===I?void 0:I.timing)==="BOTH")&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-900 mb-3",children:"Neoadjuvant Chemotherapy"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Protokol"}),(0,t.jsx)("input",{type:"text",value:(null===(T=q.chemotherapy)||void 0===T?void 0:T.neoadjuvantProtocol)||"",onChange:e=>et("neoadjuvantProtocol",e.target.value),placeholder:"e.g., MAP, VAC, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Siklus"}),(0,t.jsx)("input",{type:"number",value:(null===(A=q.chemotherapy)||void 0===A?void 0:A.neoadjuvantCycles)||"",onChange:e=>et("neoadjuvantCycles",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),(0,t.jsx)("input",{type:"date",value:(null===(D=q.chemotherapy)||void 0===D?void 0:D.neoadjuvantStartDate)||"",onChange:e=>et("neoadjuvantStartDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai"}),(0,t.jsx)("input",{type:"date",value:(null===(P=q.chemotherapy)||void 0===P?void 0:P.neoadjuvantEndDate)||"",onChange:e=>et("neoadjuvantEndDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),((null===(E=q.chemotherapy)||void 0===E?void 0:E.timing)==="ADJUVANT"||(null===(M=q.chemotherapy)||void 0===M?void 0:M.timing)==="BOTH")&&(0,t.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,t.jsx)("h4",{className:"font-semibold text-green-900 mb-3",children:"Adjuvant Chemotherapy"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Protokol"}),(0,t.jsx)("input",{type:"text",value:(null===(R=q.chemotherapy)||void 0===R?void 0:R.adjuvantProtocol)||"",onChange:e=>et("adjuvantProtocol",e.target.value),placeholder:"e.g., MAP, VAC, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Siklus"}),(0,t.jsx)("input",{type:"number",value:(null===(O=q.chemotherapy)||void 0===O?void 0:O.adjuvantCycles)||"",onChange:e=>et("adjuvantCycles",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),(0,t.jsx)("input",{type:"date",value:(null===(B=q.chemotherapy)||void 0===B?void 0:B.adjuvantStartDate)||"",onChange:e=>et("adjuvantStartDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai"}),(0,t.jsx)("input",{type:"date",value:(null===(H=q.chemotherapy)||void 0===H?void 0:H.adjuvantEndDate)||"",onChange:e=>et("adjuvantEndDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("label",{className:"flex items-center mb-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(F=q.radiation)||void 0===F?void 0:F.received)||!1,onChange:e=>{es("received",e.target.checked),ee(e.target.checked)},className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 h-5 w-5"}),(0,t.jsx)("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Radioterapi"})]}),Z&&(0,t.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timing"}),(0,t.jsxs)("select",{value:(null===(G=q.radiation)||void 0===G?void 0:G.timing)||"",onChange:e=>es("timing",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"",children:"Pilih timing"}),(0,t.jsx)("option",{value:"NEOADJUVANT",children:"Neoadjuvant (sebelum bedah)"}),(0,t.jsx)("option",{value:"ADJUVANT",children:"Adjuvant (setelah bedah)"}),(0,t.jsx)("option",{value:"DEFINITIVE",children:"Definitive"}),(0,t.jsx)("option",{value:"PALLIATIVE",children:"Palliative"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Dosis (Gy)"}),(0,t.jsx)("input",{type:"number",value:(null===(K=q.radiation)||void 0===K?void 0:K.totalDose)||"",onChange:e=>es("totalDose",parseFloat(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fraksi"}),(0,t.jsx)("input",{type:"number",value:(null===(V=q.radiation)||void 0===V?void 0:V.fractions)||"",onChange:e=>es("fractions",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),(0,t.jsx)("input",{type:"date",value:(null===(z=q.radiation)||void 0===z?void 0:z.startDate)||"",onChange:e=>es("startDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai"}),(0,t.jsx)("input",{type:"date",value:(null===(_=q.radiation)||void 0===_?void 0:_.endDate)||"",onChange:e=>es("endDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]})]})]})]}),(Y||$||Z)&&(0,t.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-white rounded-lg border border-indigo-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-indigo-900 mb-4",children:"Respons Pengobatan Keseluruhan"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"COMPLETE_REMISSION",label:"Complete Remission",color:"green"},{value:"PARTIAL_REMISSION",label:"Partial Remission",color:"blue"},{value:"STABLE_DISEASE",label:"Stable Disease",color:"yellow"},{value:"PROGRESSIVE_DISEASE",label:"Progressive Disease",color:"red"}].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>ea("overallResponse",e.value),className:"\n                  p-3 rounded-lg border-2 transition-all text-center\n                  ".concat(q.overallResponse===e.value?"border-".concat(e.color,"-600 bg-").concat(e.color,"-100"):"border-gray-300 bg-white hover:border-indigo-400","\n                "),children:(0,t.jsx)("div",{className:"font-semibold text-sm",children:e.label})},e.value))})]}),(null===(U=q.surgery)||void 0===U?void 0:U.limbSalvageStatus)&&(0,t.jsx)("div",{className:"border-2 rounded-lg p-6 ".concat("LIMB_SALVAGE"===q.surgery.limbSalvageStatus?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"),children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 mr-3 flex-shrink-0 ".concat("LIMB_SALVAGE"===q.surgery.limbSalvageStatus?"text-green-600":"text-gray-600"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm ".concat("LIMB_SALVAGE"===q.surgery.limbSalvageStatus?"text-green-800":"text-gray-800"),children:[(0,t.jsx)("span",{className:"font-medium",children:"LIMB_SALVAGE"===q.surgery.limbSalvageStatus?" LIMB SALVAGE berhasil dipertahankan":"Informasi pengobatan telah dicatat"})," - Anda dapat melanjutkan ke bagian selanjutnya."]})]})})]})}let E=e=>{let{data:a,isActive:l}=e,[r,i]=(0,s.useState)(new Set(["section1","section2"])),n=e=>{i(a=>{let l=new Set(a);return l.has(e)?l.delete(e):l.add(e),l})},o=(e,a)=>a.split(".").reduce((e,a)=>null==e?void 0:e[a],e),d=e=>null==e||""===e?"":"boolean"==typeof e?e?"Yes":"No":e instanceof Date?e.toLocaleDateString():"object"==typeof e?JSON.stringify(e):String(e),c=[{id:"section1",title:"Center & Pathology Type",icon:"\uD83C\uDFE5",fields:[{label:"Center",key:"centerId"},{label:"Pathology Type",key:"pathologyType"},{label:"Subspecialist",key:"subspecialistName"},{label:"Entry Date",key:"entryDate"}]},{id:"section2",title:"Patient Identity",icon:"\uD83D\uDC64",fields:[{label:"Medical Record Number",key:"hospitalRecordNumber"},{label:"NIK",key:"nik"},{label:"Name",key:"name"},{label:"Date of Birth",key:"dateOfBirth"},{label:"Place of Birth",key:"placeOfBirth"},{label:"Gender",key:"gender"},{label:"Blood Type",key:"bloodType"},{label:"Religion",key:"religion"},{label:"Marital Status",key:"maritalStatus"},{label:"Occupation",key:"occupation"},{label:"Education",key:"education"},{label:"Phone Number",key:"phoneNumber"},{label:"Email",key:"email"},{label:"Address",key:"address"},{label:"Province",key:"province"},{label:"Regency",key:"regency"},{label:"District",key:"district"},{label:"Village",key:"village"},{label:"Postal Code",key:"postalCode"}]},{id:"section3",title:"Clinical Data",icon:"\uD83E\uDE7A",fields:[{label:"Chief Complaint",key:"chiefComplaint"},{label:"Onset Date",key:"onsetDate"},{label:"Symptom Duration (months)",key:"symptomDuration"},{label:"Presenting Symptoms",key:"presentingSymptoms"},{label:"Tumor Size at Presentation (cm)",key:"tumorSizeAtPresentation"},{label:"Family History of Cancer",key:"familyHistoryCancer"},{label:"Tumor Syndrome",key:"tumorSyndromeId"},{label:"Karnofsky Performance Score",key:"karnofskysScore"}]},{id:"section4",title:"Diagnostic Investigations",icon:"\uD83D\uDD2C",fields:[{label:"Biopsy Date",key:"biopsyDate"},{label:"Biopsy Type",key:"biopsyType"},{label:"Biopsy Result",key:"biopsyResult"},{label:"Imaging Studies",key:"imagingStudies"}]},{id:"section5",title:"Diagnosis & Location",icon:"\uD83D\uDCCB",fields:[{label:"WHO Bone Tumor Classification",key:"whoBoneTumorId"},{label:"WHO Soft Tissue Tumor Classification",key:"whoSoftTissueTumorId"},{label:"Bone Location",key:"boneLocationId"},{label:"Soft Tissue Location",key:"softTissueLocationId"},{label:"Histopathology Grade",key:"histopathologyGrade"},{label:"Histopathology Details",key:"histopathologyDetails"}]},{id:"section6",title:"Staging",icon:"\uD83D\uDCCA",fields:[{label:"Enneking Stage",key:"ennekingStage"},{label:"AJCC Stage",key:"ajccStage"},{label:"Metastasis Present",key:"metastasisPresent"},{label:"Metastasis Sites",key:"metastasisSites"}]},{id:"section7",title:"CPC Conference",icon:"\uD83D\uDCAC",fields:[{label:"CPC Date",key:"cpcDate"},{label:"CPC Attendees",key:"cpcAttendees"},{label:"Case Summary",key:"cpcCaseSummary"},{label:"Recommended Treatment",key:"cpcRecommendedTreatment"},{label:"Treatment Plan",key:"cpcTreatmentPlan"},{label:"CPC Decision",key:"cpcDecision"},{label:"Notes",key:"cpcNotes"},{label:"Next Review Date",key:"cpcNextReviewDate"}]},{id:"section8",title:"Treatment Management",icon:"\uD83D\uDC8A",fields:[{label:"Treatment Start Date",key:"treatmentStartDate"},{label:"Treatment End Date",key:"treatmentEndDate"},{label:"Surgery Date",key:"surgeryDate"},{label:"Surgery Type",key:"surgeryType"},{label:"Surgery Details",key:"surgeryDetails"},{label:"Chemotherapy Protocol",key:"chemotherapyProtocol"},{label:"Chemotherapy Cycles",key:"chemotherapyCycles"},{label:"Radiotherapy Dose",key:"radiotherapyDose"},{label:"Radiotherapy Fractions",key:"radiotherapyFractions"},{label:"Treatment Response",key:"treatmentResponse"},{label:"Complications",key:"complications"},{label:"Adverse Events",key:"adverseEvents"}]},{id:"section9",title:"Follow-up Plan",icon:"\uD83D\uDCC5",fields:[{label:"Follow-up Schedule",key:"followUpSchedule"},{label:"Next Follow-up Date",key:"nextFollowUpDate"},{label:"Monitoring Plan",key:"monitoringPlan"},{label:"Imaging Follow-up",key:"imagingFollowUp"},{label:"Lab Follow-up",key:"labFollowUp"},{label:"Quality of Life",key:"qualityOfLife"},{label:"Functional Status",key:"functionalStatus"},{label:"Survival Status",key:"survivalStatus"},{label:"Date of Last Contact",key:"dateOfLastContact"}]}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Patient Registration"}),(0,t.jsx)("p",{className:"text-gray-700",children:"Please carefully review all information before submitting. You can navigate back to any section to make changes if needed."}),(0,t.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>{i(new Set(["section1","section2","section3","section4","section5","section6","section7","section8","section9"]))},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Expand All"}),(0,t.jsx)("span",{className:"text-gray-400",children:"|"}),(0,t.jsx)("button",{onClick:()=>{i(new Set)},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Collapse All"})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:c.map(e=>{let l=r.has(e.id),s=a[e.id]||{},i=e.fields.some(e=>{let a=o(s,e.key);return null!=a&&""!==a});return(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>n(e.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:e.icon}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),!i&&(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No data entered"})]})]}),(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform ".concat(l?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.fields.map(e=>{let a=o(s,e.key),l=d(a),r=""===l;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-600 mb-1",children:e.label}),(0,t.jsx)("dd",{className:"text-sm ".concat(r?"text-gray-400 italic":"text-gray-900"),children:l})]},e.key)})})})]},e.id)})}),(0,t.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,t.jsx)("strong",{children:"Important:"}),' Please verify all information is accurate before submitting. You can use the sidebar navigation or "Previous" button to go back and edit any section.']})})]})}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Data Completeness"}),(0,t.jsx)("div",{className:"space-y-2",children:c.map(e=>{let l=a[e.id]||{},s=e.fields.length,r=e.fields.filter(e=>{let a=o(l,e.key);return null!=a&&""!==a}).length,i=Math.round(r/s*100);return(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-700",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full ".concat(100===i?"bg-green-500":i>=50?"bg-blue-500":"bg-yellow-500"),style:{width:"".concat(i,"%")}})}),(0,t.jsxs)("span",{className:"text-gray-600 font-medium w-12 text-right",children:[i,"%"]})]})]},e.id)})})]})]})},M=(e,a)=>null==e||""===e?{field:a,message:"".concat(a," is required")}:null,R=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Email";return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:{field:a,message:"Invalid email format"}:null},O=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NIK";return e?/^\d{16}$/.test(e)?null:{field:a,message:"NIK must be exactly 16 digits"}:null},B=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Phone Number";return e?/^(\+62|62|0)[8][0-9]{8,11}$/.test(e.replace(/[\s-]/g,""))?null:{field:a,message:"Invalid Indonesian phone number format (e.g., 08123456789)"}:null},H=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Date",l=arguments.length>2?arguments[2]:void 0;if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?{field:a,message:"Invalid date format"}:(null==l?void 0:l.futureAllowed)===!1&&t>new Date?{field:a,message:"Date cannot be in the future"}:(null==l?void 0:l.minDate)&&t<l.minDate?{field:a,message:"Date must be after ".concat(l.minDate.toLocaleDateString())}:(null==l?void 0:l.maxDate)&&t>l.maxDate?{field:a,message:"Date must be before ".concat(l.maxDate.toLocaleDateString())}:null},F=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Date of Birth";if(!e)return null;let l=new Date(e),t=new Date,s=t.getFullYear()-l.getFullYear(),r=H(e,a,{futureAllowed:!1});return r||(s<0||s>150?{field:a,message:"Please enter a valid date of birth"}:null)},G=(e,a,l)=>{if(null==e||""===e)return null;let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?{field:a,message:"Must be a valid number"}:(null==l?void 0:l.integer)&&!Number.isInteger(t)?{field:a,message:"Must be a whole number"}:(null==l?void 0:l.min)!==void 0&&t<l.min?{field:a,message:"Must be at least ".concat(l.min)}:(null==l?void 0:l.max)!==void 0&&t>l.max?{field:a,message:"Must be no more than ".concat(l.max)}:null},K=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Karnofsky Score";if(!e)return null;let l="string"==typeof e?parseInt(e):e;return isNaN(l)||l<0||l>100?{field:a,message:"Karnofsky score must be between 0 and 100"}:l%10!=0?{field:a,message:"Karnofsky score must be in increments of 10"}:null},V=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Medical Record Number";return e&&e.length<6?{field:a,message:"Medical record number must be at least 6 characters"}:null},z=e=>{let a=[],l=M(e.centerId,"Center");l&&a.push(l);let t=M(e.pathologyType,"Pathology Type");return t&&a.push(t),{isValid:0===a.length,errors:a}},_=e=>{let a=[],l=M(e.hospitalRecordNumber,"Medical Record Number");if(l)a.push(l);else{let l=V(e.hospitalRecordNumber);l&&a.push(l)}let t=M(e.nik,"NIK");if(t)a.push(t);else{let l=O(e.nik);l&&a.push(l)}let s=M(e.name,"Name");s&&a.push(s);let r=M(e.dateOfBirth,"Date of Birth");if(r)a.push(r);else{let l=F(e.dateOfBirth);l&&a.push(l)}let i=M(e.gender,"Gender");if(i&&a.push(i),e.email){let l=R(e.email);l&&a.push(l)}if(e.phoneNumber){let l=B(e.phoneNumber);l&&a.push(l)}return{isValid:0===a.length,errors:a}},U=e=>{let a=[];if(e.karnofskysScore){let l=K(e.karnofskysScore);l&&a.push(l)}if(e.onsetDate){let l=H(e.onsetDate,"Onset Date",{futureAllowed:!1});l&&a.push(l)}if(e.tumorSizeAtPresentation){let l=G(e.tumorSizeAtPresentation,"Tumor Size",{min:0});l&&a.push(l)}return{isValid:0===a.length,errors:a}},W=e=>{let a=[];if(e.biopsyDate){let l=H(e.biopsyDate,"Biopsy Date",{futureAllowed:!1});l&&a.push(l)}return{isValid:0===a.length,errors:a}},J=(e,a)=>{let l=[],t=a.pathologyType;if("bone_tumor"===t||"BONE_TUMOR"===t){let a=M(e.whoBoneTumorId,"WHO Bone Tumor Classification");a&&l.push(a);let t=M(e.boneLocationId,"Bone Location");t&&l.push(t)}if("soft_tissue_tumor"===t||"SOFT_TISSUE_TUMOR"===t){let a=M(e.whoSoftTissueTumorId,"WHO Soft Tissue Tumor Classification");a&&l.push(a);let t=M(e.softTissueLocationId,"Soft Tissue Location");t&&l.push(t)}return{isValid:0===l.length,errors:l}},q=e=>{let a=[];return e.ennekingStage||e.ajccStage||a.push({field:"staging",message:"Staging: Minimal satu staging system (Enneking atau AJCC) harus diisi"}),e.histopathologyGrade||a.push({field:"histopathologyGrade",message:"Histopathology Grade harus diisi"}),{isValid:0===a.length,errors:a}},Y=e=>{let a=[];if(e.cpcDate){let l=H(e.cpcDate,"Tanggal CPC",{futureAllowed:!1});l&&a.push(l)}return e.cpcDate&&(e.consultantsPresent||a.push({field:"consultantsPresent",message:"Jika tanggal CPC diisi, daftar konsultan hadir harus diisi"}),e.decision||a.push({field:"decision",message:"Jika tanggal CPC diisi, keputusan CPC harus diisi"})),{isValid:0===a.length,errors:a}},X=e=>{var a,l,t,s,r,i,n,o,d,c,u,m,g,x,h,b,p,v,f,y,j,N,k,w,S;let C=[];if(e.treatmentIntention||C.push({field:"treatmentIntention",message:"Treatment Intention (Curative/Palliative) harus diisi"}),e.primaryTreatment||C.push({field:"primaryTreatment",message:"Modalitas pengobatan primer harus dipilih"}),"SURGERY"===e.primaryTreatment||"MULTIMODAL"===e.primaryTreatment){if((null===(t=e.surgery)||void 0===t?void 0:t.limbSalvageStatus)||C.push({field:"limbSalvageStatus",message:"Limb Salvage Status HARUS diisi untuk pembedahan"}),null===(s=e.surgery)||void 0===s?void 0:s.surgeryDate){let a=H(e.surgery.surgeryDate,"Surgery Date",{futureAllowed:!1});a&&C.push(a)}else C.push({field:"surgeryDate",message:"Tanggal operasi harus diisi"});if((null===(r=e.surgery)||void 0===r?void 0:r.surgeryType)||C.push({field:"surgeryType",message:"Jenis operasi harus diisi"}),null===(i=e.surgery)||void 0===i?void 0:i.surgeryDuration){let a=G(e.surgery.surgeryDuration,"Surgery Duration",{min:1,max:1440});a&&C.push(a)}if(null===(n=e.surgery)||void 0===n?void 0:n.bloodLoss){let a=G(e.surgery.bloodLoss,"Blood Loss",{min:0,max:5e4});a&&C.push(a)}if((null===(o=e.surgery)||void 0===o?void 0:o.limbSalvageStatus)!=="LIMB_SALVAGE"||(null===(d=e.surgery)||void 0===d?void 0:d.limbSalvageTechnique)||C.push({field:"limbSalvageTechnique",message:"Teknik rekonstruksi harus diisi untuk Limb Salvage"}),(null===(c=e.surgery)||void 0===c?void 0:c.limbSalvageStatus)!=="AMPUTATION"||((null===(g=e.surgery)||void 0===g?void 0:g.amputationLevel)||C.push({field:"amputationLevel",message:"Level amputasi harus diisi"}),(null===(x=e.surgery)||void 0===x?void 0:x.amputationReason)||C.push({field:"amputationReason",message:"Alasan amputasi harus diisi"})),(null===(u=e.surgery)||void 0===u?void 0:u.surgicalMargin)||C.push({field:"surgicalMargin",message:"Status margin bedah harus diisi"}),null===(m=e.surgery)||void 0===m?void 0:m.marginDistance){let a=G(e.surgery.marginDistance,"Margin Distance",{min:0,max:1e3});a&&C.push(a)}}if(null===(a=e.chemotherapy)||void 0===a?void 0:a.received){if((null===(h=e.chemotherapy)||void 0===h?void 0:h.timing)||C.push({field:"chemotherapyTiming",message:"Timing kemoterapi harus diisi"}),null===(b=e.chemotherapy)||void 0===b?void 0:b.neoadjuvantStartDate){let a=H(e.chemotherapy.neoadjuvantStartDate,"Neoadjuvant Start Date",{futureAllowed:!0});a&&C.push(a)}if(null===(p=e.chemotherapy)||void 0===p?void 0:p.neoadjuvantEndDate){let a=H(e.chemotherapy.neoadjuvantEndDate,"Neoadjuvant End Date",{futureAllowed:!0});a&&C.push(a)}if(null===(v=e.chemotherapy)||void 0===v?void 0:v.adjuvantStartDate){let a=H(e.chemotherapy.adjuvantStartDate,"Adjuvant Start Date",{futureAllowed:!0});a&&C.push(a)}if(null===(f=e.chemotherapy)||void 0===f?void 0:f.adjuvantEndDate){let a=H(e.chemotherapy.adjuvantEndDate,"Adjuvant End Date",{futureAllowed:!0});a&&C.push(a)}if(null===(y=e.chemotherapy)||void 0===y?void 0:y.neoadjuvantCycles){let a=G(e.chemotherapy.neoadjuvantCycles,"Neoadjuvant Cycles",{min:1,max:50,integer:!0});a&&C.push(a)}if(null===(j=e.chemotherapy)||void 0===j?void 0:j.adjuvantCycles){let a=G(e.chemotherapy.adjuvantCycles,"Adjuvant Cycles",{min:1,max:50,integer:!0});a&&C.push(a)}}if(null===(l=e.radiation)||void 0===l?void 0:l.received){if(null===(N=e.radiation)||void 0===N?void 0:N.startDate){let a=H(e.radiation.startDate,"Radiation Start Date",{futureAllowed:!0});a&&C.push(a)}if(null===(k=e.radiation)||void 0===k?void 0:k.endDate){let a=H(e.radiation.endDate,"Radiation End Date",{futureAllowed:!0});a&&C.push(a)}if(null===(w=e.radiation)||void 0===w?void 0:w.totalDose){let a=G(e.radiation.totalDose,"Radiation Dose",{min:0,max:200});a&&C.push(a)}if(null===(S=e.radiation)||void 0===S?void 0:S.fractions){let a=G(e.radiation.fractions,"Radiation Fractions",{min:1,max:100,integer:!0});a&&C.push(a)}}if(e.analgesiaStartDate){let a=H(e.analgesiaStartDate,"Analgesia Start Date",{futureAllowed:!1});a&&C.push(a)}if(e.treatmentStartDate){let a=H(e.treatmentStartDate,"Treatment Start Date",{futureAllowed:!0});a&&C.push(a)}return{isValid:0===C.length,errors:C}};function $(){let{isAuthenticated:e,isLoading:a}=(0,i.useAuth)(),l=(0,r.useRouter)();if((0,s.useEffect)(()=>{a||e||l.push("/login")},[e,a,l]),a)return(0,t.jsx)(n.A,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(!e)return null;let o=async e=>{try{let a=await fetch("/api/v1/patients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to create patient");let t=await a.json();l.push("/patients/view?id=".concat(t.data.id))}catch(e){throw console.error("Error creating patient:",e),e}},c=async e=>{try{localStorage.setItem("patient-draft",JSON.stringify(e)),console.log("Draft saved:",e)}catch(e){console.error("Error saving draft:",e)}};return(0,t.jsxs)(n.A,{children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Registrasi Pasien Tumor Muskuloskeletal"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:["Sistem registrasi tumor muskuloskeletal berdasarkan"," ",(0,t.jsx)("strong",{children:"WHO Classification 5th Edition"})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"9 Bagian Form (90% Lengkap)"}),(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"57 Klasifikasi Tumor Tulang WHO"}),(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:"68 Klasifikasi Tumor Jaringan Lunak WHO"}),(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"Mirrel Score Calculator"}),(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-pink-100 text-pink-800",children:"MSTS Score Ready"})]})]}),(0,t.jsx)(d,{autoSaveInterval:12e4,children:(0,t.jsx)(u,{sections:[{id:"section1",title:"Pusat & Patologi",description:"Pilih pusat pengobatan dan jenis patologi tumor",component:m,validate:z},{id:"section2",title:"Identitas Pasien",description:"Data identitas dan demografi pasien",component:g,validate:_},{id:"section3",title:"Data Klinis",description:"Karnofsky Score, Pain Scale, BMI, dan pemeriksaan fisik",component:p,validate:U},{id:"section4",title:"Pemeriksaan Penunjang",description:"Laboratorium, Radiologi, Mirrel Score, dan Patologi",component:N,validate:W},{id:"section5",title:"Diagnosis & Lokasi",description:"Klasifikasi WHO dan lokasi anatomis tumor",component:I,validate:J},{id:"section6",title:"Staging",description:"Enneking, AJCC, dan grading tumor",component:A,validate:q},{id:"section7",title:"CPC Conference",description:"Keputusan multidisipliner tim onkologi",component:D,validate:Y},{id:"section8",title:"Management",description:"Terapi pembedahan, kemoterapi, radioterapi",component:P,validate:X},{id:"section10",title:"Review & Submit",description:"Tinjau dan kirim data pasien",component:E}],onComplete:o,onSaveDraft:c,autoSaveInterval:12e4})})]})}function Q(){return(0,t.jsx)($,{})}},4033:function(e,a,l){e.exports=l(94)}},function(e){e.O(0,[1176,4829,2849,4968,2971,2472,1744],function(){return e(e.s=6594)}),_N_E=e.O()}]);