(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9029],{2058:function(e,t,a){Promise.resolve().then(a.bind(a,8532))},8532:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),i=a(2265),l=a(4033),r=a(435),n=a(7372),o=a(6579);function d(e){let{patientId:t,patientName:a}=e,[l,r]=(0,i.useState)(!0),[n,d]=(0,i.useState)([]),[c,m]=(0,i.useState)(null),[x,p]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),[u,y]=(0,i.useState)(null),[b,j]=(0,i.useState)(""),[f,N]=(0,i.useState)(""),[v,w]=(0,i.useState)("");(0,i.useEffect)(()=>{S()},[t]);let S=async()=>{try{r(!0);let e=await o.Z.getPhotosByPatient(t);d(Array.isArray(e)?e:[])}catch(e){console.error("Error loading clinical photos:",e),d([])}finally{r(!1)}},T=async()=>{if(!u){alert("Please select a file");return}try{p(!0),await o.Z.uploadPhoto({patientId:t,file:u,viewType:f,description:v}),alert("Photo uploaded successfully!"),y(null),j(""),N(""),w(""),g(!1),S()}catch(e){console.error("Error uploading photo:",e),alert("Failed to upload photo. Please try again.")}finally{p(!1)}},D=async e=>{if(confirm("Are you sure you want to delete this photo?"))try{await o.Z.deletePhoto(e),alert("Photo deleted successfully"),S(),m(null)}catch(e){console.error("Error deleting photo:",e),alert("Failed to delete photo")}},k=e=>{let t={ANTERIOR:"bg-blue-100 text-blue-800",POSTERIOR:"bg-green-100 text-green-800",LATERAL_LEFT:"bg-purple-100 text-purple-800",LATERAL_RIGHT:"bg-pink-100 text-pink-800",OTHER:"bg-gray-100 text-gray-800"}[e||""]||"bg-gray-100 text-gray-800";return(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(t),children:e||"Unknown"})};return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading photos..."})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Clinical Photos"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[n.length," photos for ",a]})]}),(0,s.jsxs)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDCF8"}),"Upload Photo"]})]}),0===n.length?(0,s.jsxs)("div",{className:"p-12 text-center text-gray-500 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCF8"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"No clinical photos yet"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Upload clinical photos to document this patient's condition"}),(0,s.jsx)("button",{onClick:()=>g(!0),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Upload First Photo"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e,t)=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>m(e),children:[(0,s.jsxs)("div",{className:"aspect-square bg-gray-100 relative",children:[(0,s.jsx)("img",{src:e.preview,alt:e.description||"Clinical photo",className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute top-2 right-2",children:k(e.viewAngle)})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2",children:e.description||"No description"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.file.lastModified).toLocaleDateString("id-ID")})]})]},"".concat(e.preview,"-").concat(t)))}),h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Upload Clinical Photo"}),(0,s.jsx)("button",{onClick:()=>!x&&g(!1),className:"text-gray-400 hover:text-gray-600",disabled:x,children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Patient: ",a]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo File *"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/")){alert("Please select an image file");return}if(a.size>10485760){alert("File size must be less than 10MB");return}y(a);let s=new FileReader;s.onloadend=()=>{j(s.result)},s.readAsDataURL(a)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x}),b&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("img",{src:b,alt:"Preview",className:"w-full max-h-64 object-contain rounded-lg border border-gray-200"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Type"}),(0,s.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:[(0,s.jsx)("option",{value:"",children:"Select view type"}),(0,s.jsx)("option",{value:"ANTERIOR",children:"Anterior"}),(0,s.jsx)("option",{value:"POSTERIOR",children:"Posterior"}),(0,s.jsx)("option",{value:"LATERAL_LEFT",children:"Lateral Left"}),(0,s.jsx)("option",{value:"LATERAL_RIGHT",children:"Lateral Right"}),(0,s.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:v,onChange:e=>w(e.target.value),rows:3,placeholder:"Photo description (optional)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>g(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",disabled:x,children:"Cancel"}),(0,s.jsx)("button",{onClick:T,disabled:x||!u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:x?"Uploading...":"Upload Photo"})]})]})}),c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Clinical Photo Detail"}),(0,s.jsx)("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("img",{src:c.preview,alt:c.description||"Clinical photo",className:"w-full rounded-lg"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Patient"}),(0,s.jsx)("p",{className:"font-semibold",children:a})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"View Type"}),(0,s.jsx)("div",{className:"mt-1",children:k(c.viewAngle)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Description"}),(0,s.jsx)("p",{className:"font-semibold",children:c.description||"No description"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"File Size"}),(0,s.jsx)("p",{className:"font-semibold",children:c.file.size?"".concat((c.file.size/1024).toFixed(1)," KB"):"Unknown"})]})]}),c.description&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-900",children:c.description})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>window.open(c.preview,"_blank"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Download"}),(0,s.jsx)("button",{onClick:()=>D(c.preview),className:"px-6 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})]})})]})}var c=a(1976);function m(e){let{patientId:t,patientName:a}=e,[l,r]=(0,i.useState)(!0),[n,o]=(0,i.useState)([]),[d,m]=(0,i.useState)(null),[x,p]=(0,i.useState)("all");(0,i.useEffect)(()=>{h()},[t]);let h=async()=>{try{r(!0);let e=await c.ZP.getImagesByPatient(t);o(e)}catch(e){console.error("Error loading radiology images:",e),o([])}finally{r(!1)}},g="all"===x?n:n.filter(e=>e.modality===x),u=e=>{let t={XRAY:"bg-blue-100 text-blue-800",CT:"bg-purple-100 text-purple-800",MRI:"bg-pink-100 text-pink-800",ULTRASOUND:"bg-green-100 text-green-800","PET-SCAN":"bg-red-100 text-red-800","BONE-SCAN":"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800";return(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(t),children:e})};return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading radiology images..."})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Radiology Images"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[n.length," images for ",a]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Modalities"}),(0,s.jsx)("option",{value:"XRAY",children:"X-Ray"}),(0,s.jsx)("option",{value:"CT",children:"CT Scan"}),(0,s.jsx)("option",{value:"MRI",children:"MRI"}),(0,s.jsx)("option",{value:"ULTRASOUND",children:"Ultrasound"}),(0,s.jsx)("option",{value:"PET-SCAN",children:"PET Scan"}),(0,s.jsx)("option",{value:"BONE-SCAN",children:"Bone Scan"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"X-Ray"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:n.filter(e=>"XRAY"===e.modality).length})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"CT Scan"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:n.filter(e=>"CT"===e.modality).length})]}),(0,s.jsxs)("div",{className:"bg-pink-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-pink-600 font-medium",children:"MRI"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-pink-900",children:n.filter(e=>"MRI"===e.modality).length})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Ultrasound"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-900",children:n.filter(e=>"ULTRASOUND"===e.modality).length})]})]}),0===g.length?(0,s.jsxs)("div",{className:"p-12 text-center text-gray-500 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFE5"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"No radiology images yet"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:0===n.length?"Radiology images will appear here when uploaded through the patient entry form":"Try adjusting the modality filter"})]}):(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modality"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Body Part"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Study Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:u(e.modality)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.bodyPart||"-"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.studyDate).toLocaleDateString("id-ID")})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900 line-clamp-2",children:e.description||"No description"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsx)("button",{onClick:()=>m(e),className:"text-blue-600 hover:text-blue-900",children:"View"})})]},e.id))})]})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Radiology Study Detail"}),(0,s.jsx)("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("img",{src:c.ZP.getImageUrl(d.id),alt:"".concat(d.modality," - ").concat(d.bodyPart),className:"w-full rounded-lg bg-black"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Study Information"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Modality"}),(0,s.jsx)("div",{className:"mt-1",children:u(d.modality)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Body Part"}),(0,s.jsx)("p",{className:"font-medium",children:d.bodyPart||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Study Date"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(d.studyDate).toLocaleDateString("id-ID")})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Patient Information"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Patient Name"}),(0,s.jsx)("p",{className:"font-medium",children:a})]})})]})]}),d.description&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-900",children:d.description})]}),d.findings&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Findings"}),(0,s.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:d.findings})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>window.open(c.ZP.getImageUrl(d.id),"_blank"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Download"}),(0,s.jsx)("button",{onClick:()=>m(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Close"})]})]})]})})]})}function x(e){let{patientId:t,patientName:a}=e,[l,r]=(0,i.useState)(!0),[n,o]=(0,i.useState)([]),[d,c]=(0,i.useState)(null),[m,x]=(0,i.useState)("all");(0,i.useEffect)(()=>{p()},[t]);let p=async()=>{try{r(!0),o([])}catch(e){console.error("Error loading pathology reports:",e),o([])}finally{r(!1)}},h="all"===m?n:n.filter(e=>e.reportType===m),g=e=>{let t={BIOPSY:"bg-blue-100 text-blue-800",FNAB:"bg-green-100 text-green-800",CORE_BIOPSY:"bg-purple-100 text-purple-800",SURGICAL_PATHOLOGY:"bg-pink-100 text-pink-800",CYTOLOGY:"bg-yellow-100 text-yellow-800",IHK:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800";return(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(t),children:e})};return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading pathology reports..."})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pathology Reports"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[n.length," reports for ",a]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Report Types"}),(0,s.jsx)("option",{value:"BIOPSY",children:"Biopsy"}),(0,s.jsx)("option",{value:"FNAB",children:"FNAB"}),(0,s.jsx)("option",{value:"CORE_BIOPSY",children:"Core Biopsy"}),(0,s.jsx)("option",{value:"SURGICAL_PATHOLOGY",children:"Surgical Pathology"}),(0,s.jsx)("option",{value:"CYTOLOGY",children:"Cytology"}),(0,s.jsx)("option",{value:"IHK",children:"IHK (Immunohistochemistry)"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Biopsy"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:n.filter(e=>"BIOPSY"===e.reportType).length})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"FNAB"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-900",children:n.filter(e=>"FNAB"===e.reportType).length})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Core Biopsy"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:n.filter(e=>"CORE_BIOPSY"===e.reportType).length})]})]}),0===h.length?(0,s.jsxs)("div",{className:"p-12 text-center text-gray-500 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD2C"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"No pathology reports yet"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:0===n.length?"Pathology reports will appear here when uploaded through the patient entry form":"Try adjusting the report type filter"})]}):(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specimen Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diagnosis"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:g(e.reportType)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.specimenType||"-"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.reportDate).toLocaleDateString("id-ID")})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900 line-clamp-2",children:e.diagnosis||"Pending"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsx)("button",{onClick:()=>c(e),className:"text-blue-600 hover:text-blue-900",children:"View"})})]},e.id))})]})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Pathology Report Detail"}),(0,s.jsx)("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Report Information"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Report Type"}),(0,s.jsx)("div",{className:"mt-1",children:g(d.reportType)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Specimen Type"}),(0,s.jsx)("p",{className:"font-medium",children:d.specimenType||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Report Date"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(d.reportDate).toLocaleDateString("id-ID")})]}),d.pathologist&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Pathologist"}),(0,s.jsx)("p",{className:"font-medium",children:d.pathologist})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Patient Information"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Patient Name"}),(0,s.jsx)("p",{className:"font-medium",children:a})]})})]})]}),d.diagnosis&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Diagnosis"}),(0,s.jsx)("p",{className:"text-gray-900 bg-yellow-50 p-4 rounded-lg font-medium",children:d.diagnosis})]}),d.findings&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Findings"}),(0,s.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:d.findings})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[d.fileUrl&&(0,s.jsx)("button",{onClick:()=>window.open(d.fileUrl,"_blank"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Download Report"}),(0,s.jsx)("button",{onClick:()=>c(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Close"})]})]})]})})]})}function p(e){var t,a,n,o,c,p,h,g,u,y,b,j,f,N;let{patient:v,onEdit:w,className:S=""}=e,T=(0,l.useRouter)(),{updatePatient:D}=(0,r.l)(),[k,C]=(0,i.useState)(!1),[O,P]=(0,i.useState)(!1),[E,I]=(0,i.useState)("info"),[R,A]=(0,i.useState)({dateOfDeath:"",causeOfDeath:""}),L=e=>e?new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-",_=async()=>{try{await D(v.id,{isDeceased:!0,dateOfDeath:R.dateOfDeath,causeOfDeath:R.causeOfDeath}),P(!1),A({dateOfDeath:"",causeOfDeath:""})}catch(e){console.error("Failed to mark patient as deceased:",e)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md ".concat(S),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold font-mono text-blue-600",children:v.anonymousId}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 font-mono",children:["INAMSOS: ",(0,s.jsx)("strong",{className:"text-gray-900",children:v.inamsosRecordNumber})]}),v.hospitalRecordNumber&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 font-mono",children:["RM RS: ",v.hospitalRecordNumber]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat({new:"bg-blue-100 text-blue-800",ongoing:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",palliative:"bg-purple-100 text-purple-800",lost_to_followup:"bg-orange-100 text-orange-800",deceased:"bg-red-100 text-red-800"}[v.treatmentStatus]||"bg-gray-100 text-gray-800"),children:{new:"Baru",ongoing:"Sedang Berjalan",completed:"Selesai",palliative:"Paliatif",lost_to_followup:"Hilang Follow-up",deceased:"Meninggal"}[j=v.treatmentStatus]||j}),v.isDeceased&&(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:"Meninggal"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,s.jsx)("button",{onClick:()=>{null==w||w(v),C(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Edit Data"}),!v.isDeceased&&(0,s.jsx)("button",{onClick:()=>P(!0),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Tandai Meninggal"})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:"Clinical Assessment"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC5"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Follow-up Protocol"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Track patient progress with 14-visit longitudinal protocol (5 years)"}),(0,s.jsx)("button",{onClick:()=>T.push("/patients/view/follow-up?id=".concat(v.id)),className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Follow-up Schedule"})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:"MSTS Score"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Musculoskeletal Tumor Society functional assessment (0-30 points)"}),(0,s.jsx)("button",{onClick:()=>T.push("/patients/view/msts?id=".concat(v.id)),className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Calculate MSTS Score"})]})]})})]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Dasar"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),(0,s.jsxs)("p",{className:"text-gray-900",children:[L(v.dateOfBirth)," (",(e=>{if(!e)return"-";let t=new Date(e),a=new Date,s=a.getFullYear()-t.getFullYear(),i=a.getMonth()-t.getMonth();return i<0||0===i&&a.getDate()<t.getDate()?s-1:s})(v.dateOfBirth)," tahun)"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Jenis Kelamin"}),(0,s.jsx)("p",{className:"text-gray-900",children:"male"===v.gender?"Laki-laki":"Perempuan"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Golongan Darah"}),(0,s.jsx)("p",{className:"text-gray-900",children:(f=v.bloodType,N=v.rhFactor,f?"".concat(f).concat(N?"positive"===N?"+":"-":""):"-")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.identityNumber||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Telepon"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.phone||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.email||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pekerjaan"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.occupation||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pendidikan"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.educationLevel||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status Pernikahan"}),(0,s.jsx)("p",{className:"text-gray-900",children:"single"===v.maritalStatus?"Lajang":"married"===v.maritalStatus?"Menikah":"divorced"===v.maritalStatus?"Cerai":"widowed"===v.maritalStatus?"Duda/Janda":"-"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alamat"}),(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,s.jsxs)("p",{className:"text-gray-900",children:[v.address.street&&(0,s.jsxs)(s.Fragment,{children:[v.address.street,", ",(0,s.jsx)("br",{})]}),v.address.village&&(0,s.jsxs)(s.Fragment,{children:["Desa ",v.address.village,", ",(0,s.jsx)("br",{})]}),v.address.district&&(0,s.jsxs)(s.Fragment,{children:["Kec. ",v.address.district,", ",(0,s.jsx)("br",{})]}),v.address.city&&(0,s.jsxs)(s.Fragment,{children:["Kota ",v.address.city,", ",(0,s.jsx)("br",{})]}),v.address.province&&(0,s.jsxs)(s.Fragment,{children:["Provinsi ",v.address.province," ",(0,s.jsx)("br",{})]}),v.address.postalCode&&(0,s.jsxs)(s.Fragment,{children:[v.address.postalCode,(0,s.jsx)("br",{})]}),v.address.country&&(0,s.jsx)(s.Fragment,{children:v.address.country})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kontak Darurat"}),(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.emergencyContact.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hubungan"}),(0,s.jsx)("p",{className:"text-gray-900",children:"spouse"===v.emergencyContact.relationship?"Suami/Istri":"parent"===v.emergencyContact.relationship?"Orang Tua":"child"===v.emergencyContact.relationship?"Anak":"sibling"===v.emergencyContact.relationship?"Saudara Kandung":"friend"===v.emergencyContact.relationship?"Teman":"other"===v.emergencyContact.relationship?"Lainnya":"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Telepon"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.emergencyContact.phone})]}),v.emergencyContact.address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Alamat"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.emergencyContact.address})]})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Kanker"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Lokasi Primer"}),(0,s.jsx)("p",{className:"text-gray-900",children:(null===(t=v.primaryCancerDiagnosis)||void 0===t?void 0:t.primarySite)||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Laterality"}),(0,s.jsx)("p",{className:"text-gray-900",children:(null===(a=v.primaryCancerDiagnosis)||void 0===a?void 0:a.laterality)==="left"?"Kiri":(null===(n=v.primaryCancerDiagnosis)||void 0===n?void 0:n.laterality)==="right"?"Kanan":(null===(o=v.primaryCancerDiagnosis)||void 0===o?void 0:o.laterality)==="bilateral"?"Bilateral":(null===(c=v.primaryCancerDiagnosis)||void 0===c?void 0:c.laterality)==="midline"?"Midline":(null===(p=v.primaryCancerDiagnosis)||void 0===p?void 0:p.laterality)==="unknown"?"Tidak Diketahui":"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Morfologi"}),(0,s.jsx)("p",{className:"text-gray-900",children:(null===(h=v.primaryCancerDiagnosis)||void 0===h?void 0:h.morphology)||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Perilaku"}),(0,s.jsx)("p",{className:"text-gray-900",children:(null===(g=v.primaryCancerDiagnosis)||void 0===g?void 0:g.behavior)==="benign"?"Jinak":(null===(u=v.primaryCancerDiagnosis)||void 0===u?void 0:u.behavior)==="borderline"?"Batas":(null===(y=v.primaryCancerDiagnosis)||void 0===y?void 0:y.behavior)==="invasive"?"Invasif":(null===(b=v.primaryCancerDiagnosis)||void 0===b?void 0:b.behavior)==="in_situ"?"In Situ":"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stadium Kanker"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.cancerStage||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Grading"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.cancerGrade||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Histologi"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.histology||"-"})]})]}),v.tnmClassification&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klasifikasi TNM"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg inline-flex space-x-4",children:[(0,s.jsxs)("span",{className:"font-mono",children:["T",v.tnmClassification.t]}),(0,s.jsxs)("span",{className:"font-mono",children:["N",v.tnmClassification.n]}),(0,s.jsxs)("span",{className:"font-mono",children:["M",v.tnmClassification.m]})]})]}),v.molecularMarkers&&v.molecularMarkers.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marker Molekuler"}),(0,s.jsx)("div",{className:"space-y-2",children:v.molecularMarkers.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("positive"===e.result?"bg-green-100 text-green-800":"negative"===e.result?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"positive"===e.result?"Positif":"negative"===e.result?"Negatif":"Tidak Diketahui"})]}),e.testDate&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Tes: ",L(e.testDate)]}),e.methodology&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Metode: ",e.methodology]})]},t))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Pengobatan"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Diagnosis"}),(0,s.jsx)("p",{className:"text-gray-900",children:L(v.dateOfDiagnosis)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Kunjungan Pertama"}),(0,s.jsx)("p",{className:"text-gray-900",children:L(v.dateOfFirstVisit)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pusat Pengobatan"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.treatmentCenter})]}),v.treatmentCenterName&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Pusat"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.treatmentCenterName})]}),v.lastVisitDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Kunjungan Terakhir"}),(0,s.jsx)("p",{className:"text-gray-900",children:L(v.lastVisitDate)})]})]})]}),v.isDeceased&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Informasi Kematian"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700",children:"Tanggal Meninggal"}),(0,s.jsx)("p",{className:"text-red-900",children:L(v.dateOfDeath||"")})]}),v.causeOfDeath&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-700",children:"Sebab Kematian"}),(0,s.jsx)("p",{className:"text-red-900",children:v.causeOfDeath})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Sistem"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Dibuat Oleh"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.createdBy})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Dibuat"}),(0,s.jsx)("p",{className:"text-gray-900",children:L(v.createdAt)})]}),v.updatedBy&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Diperbarui Oleh"}),(0,s.jsx)("p",{className:"text-gray-900",children:v.updatedBy})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Terakhir Diperbarui"}),(0,s.jsx)("p",{className:"text-gray-900",children:L(v.updatedAt)})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,s.jsx)("button",{onClick:()=>I("info"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("info"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Patient Info"}),(0,s.jsx)("button",{onClick:()=>I("photos"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("photos"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDCF8 Clinical Photos"}),(0,s.jsx)("button",{onClick:()=>I("radiology"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("radiology"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83C\uDFE5 Radiology"}),(0,s.jsx)("button",{onClick:()=>I("pathology"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("pathology"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDD2C Pathology"})]})}),(0,s.jsxs)("div",{className:"mt-6",children:["info"===E&&(0,s.jsx)("div",{className:"text-sm text-gray-600 bg-blue-50 p-4 rounded-lg",children:(0,s.jsx)("p",{children:"ℹ️ All patient information is displayed above. Use the tabs to view clinical photos, radiology images, and pathology reports. Use the Clinical Assessment section above to access follow-up schedule and MSTS functional assessment."})}),"photos"===E&&(0,s.jsx)(d,{patientId:v.id,patientName:v.name||v.anonymousId}),"radiology"===E&&(0,s.jsx)(m,{patientId:v.id,patientName:v.name||v.anonymousId}),"pathology"===E&&(0,s.jsx)(x,{patientId:v.id,patientName:v.name||v.anonymousId})]})]})]}),O&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tandai Pasien Meninggal"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Meninggal *"}),(0,s.jsx)("input",{type:"date",value:R.dateOfDeath,onChange:e=>A(t=>({...t,dateOfDeath:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sebab Kematian"}),(0,s.jsx)("textarea",{value:R.causeOfDeath,onChange:e=>A(t=>({...t,causeOfDeath:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Sebab kematian (opsional)"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{P(!1),A({dateOfDeath:"",causeOfDeath:""})},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Batal"}),(0,s.jsx)("button",{onClick:_,disabled:!R.dateOfDeath,className:"bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white px-4 py-2 rounded-lg",children:"Simpan"})]})]})})]})}var h=a(525);function g(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)().get("id"),{setCurrentPatient:a}=(0,r.l)(),[n,o]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0),[m,x]=(0,i.useState)("");(0,i.useEffect)(()=>{t?g():e.push("/patients")},[t]);let g=async()=>{if(t)try{c(!0);let e=await h.ZP.getById(t);o(e),a(e)}catch(e){x(e.message||"Failed to load patient")}finally{c(!1)}};return d?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading patient data..."})]})}):t&&(m||!n)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Patient Not Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:m||"Unable to load patient data"}),(0,s.jsx)("button",{onClick:()=>e.push("/patients"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:"Back to Patients"})]})}):n?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto mb-6",children:(0,s.jsxs)("button",{onClick:()=>e.push("/patients"),className:"flex items-center text-blue-600 hover:text-blue-800 font-medium mb-4",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Daftar Pasien"]})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsx)(p,{patient:n,onEdit:e=>console.log("Edit patient:",e)})})]}):null}function u(){return(0,s.jsx)(n.A,{children:(0,s.jsx)(r.S,{children:(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(g,{})})})})}},435:function(e,t,a){"use strict";a.d(t,{S:function(){return d},l:function(){return c}});var s=a(7437),i=a(2265);let l={patients:[],currentPatient:null,isLoading:!1,error:null,searchQuery:{page:1,limit:10,sortBy:"createdAt",sortOrder:"desc"},statistics:null};function r(e,t){var a,s;switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};case"SET_PATIENTS":return{...e,patients:t.payload,isLoading:!1};case"SET_CURRENT_PATIENT":return{...e,currentPatient:t.payload,isLoading:!1};case"SET_SEARCH_QUERY":return{...e,searchQuery:{...e.searchQuery,...t.payload}};case"SET_STATISTICS":return{...e,statistics:t.payload,isLoading:!1};case"ADD_PATIENT":return{...e,patients:[t.payload,...e.patients]};case"UPDATE_PATIENT":return{...e,patients:e.patients.map(e=>e.id===t.payload.id?t.payload:e),currentPatient:(null===(a=e.currentPatient)||void 0===a?void 0:a.id)===t.payload.id?t.payload:e.currentPatient};case"REMOVE_PATIENT":return{...e,patients:e.patients.filter(e=>e.id!==t.payload),currentPatient:(null===(s=e.currentPatient)||void 0===s?void 0:s.id)===t.payload?null:e.currentPatient};case"APPEND_PATIENTS":return{...e,patients:[...e.patients,...t.payload],isLoading:!1};default:return e}}let n=(0,i.createContext)(void 0);async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("token"),s=await fetch("".concat("http://127.0.0.1:3001/api").concat(e),{headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers},...t});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Network error"}))).message||"HTTP ".concat(s.status,": ").concat(s.statusText));return s.json()}function d(e){let{children:t}=e,[a,d]=(0,i.useReducer)(r,l),c=async e=>{try{d({type:"SET_LOADING",payload:!0}),d({type:"SET_ERROR",payload:null});let t=new URLSearchParams,s={...a.searchQuery,...e};Object.entries(s).forEach(e=>{let[a,s]=e;null!=s&&""!==s&&t.append(a,String(s))});let i=await o("/patients?".concat(t.toString()));d({type:"SET_PATIENTS",payload:i.patients})}catch(e){d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to fetch patients"})}},m=async()=>{try{if(a.isLoading)return;d({type:"SET_LOADING",payload:!0});let e=(a.searchQuery.page||1)+1,t=new URLSearchParams,s={...a.searchQuery,page:e};Object.entries(s).forEach(e=>{let[a,s]=e;null!=s&&""!==s&&t.append(a,String(s))});let i=await o("/patients?".concat(t.toString()));i.patients.length>0?(d({type:"APPEND_PATIENTS",payload:i.patients}),d({type:"SET_SEARCH_QUERY",payload:{page:e}})):d({type:"SET_LOADING",payload:!1})}catch(e){d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to load more patients"})}},x=async e=>{try{d({type:"SET_LOADING",payload:!0});let t=await o("/patients",{method:"POST",body:JSON.stringify(e)});return d({type:"ADD_PATIENT",payload:t}),t}catch(a){console.warn("API not available, patient data logged to console:",a);let t={id:"patient-".concat(Date.now()),...e,isActive:!0,isDeceased:!1,createdBy:"current-user",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return console.log("✅ Mock patient created:",t),d({type:"ADD_PATIENT",payload:t}),d({type:"SET_LOADING",payload:!1}),t}},p=async(e,t)=>{try{d({type:"SET_LOADING",payload:!0});let a=await o("/patients/".concat(e),{method:"PATCH",body:JSON.stringify(t)});return d({type:"UPDATE_PATIENT",payload:a}),a}catch(e){throw d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to update patient"}),e}},h=async e=>{try{d({type:"SET_LOADING",payload:!0}),await o("/patients/".concat(e,"/soft-delete"),{method:"PATCH"}),d({type:"REMOVE_PATIENT",payload:e})}catch(e){throw d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to delete patient"}),e}},g=async e=>{try{d({type:"SET_LOADING",payload:!0}),d({type:"SET_ERROR",payload:null});let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&""!==s&&t.append(a,String(s))}),await o("/patients?".concat(t.toString()))}catch(e){throw d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to search patients"}),e}},u=async e=>{try{d({type:"SET_LOADING",payload:!0});let t=await o("/patients/".concat(e));return d({type:"SET_CURRENT_PATIENT",payload:t}),t}catch(e){throw d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to fetch patient"}),e}},y=async()=>{try{d({type:"SET_LOADING",payload:!0});let e=await o("/patients/statistics");d({type:"SET_STATISTICS",payload:e})}catch(e){d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to fetch statistics"})}},b=async e=>{try{d({type:"SET_LOADING",payload:!0});let t=await o("/patients/quick-entry",{method:"POST",body:JSON.stringify(e)});return d({type:"ADD_PATIENT",payload:t}),t}catch(e){throw d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to create patient"}),e}},j=async()=>{try{return await o("/patients/chat/session",{method:"POST",body:JSON.stringify({})})}catch(t){console.warn("API not available, using mock session:",t);let e={id:"session-".concat(Date.now()),status:"in_progress",currentStep:0,totalSteps:8,messages:[{id:"1",type:"system",content:"\uD83D\uDC4B Selamat datang di sistem INAMSOS! Saya akan membantu Anda memasukkan data pasien kanker baru.",timestamp:new Date().toISOString()},{id:"2",type:"form",content:"Mari kita mulai! Siapa nama lengkap pasien?",timestamp:new Date().toISOString()}],formData:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"current-user"};return window.__mockChatSession=e,e}},f=async(e,t,a,s)=>{try{return await o("/patients/chat/".concat(e,"/message"),{method:"POST",body:JSON.stringify({content:t,fieldName:a,formData:s})})}catch(d){let e;console.warn("API not available, using mock message handling:",d);let a=window.__mockChatSession;if(!a)throw Error("Session not found");let i={id:"".concat(Date.now(),"-user"),type:"user",content:t,timestamp:new Date().toISOString()},l={...a.formData,...s},r=a.currentStep+1,n=["name","dateOfBirth","gender","phone","address","primarySite","cancerStage","treatmentStatus"];e=r<n.length?{id:"".concat(Date.now(),"-system"),type:"system",content:({dateOfBirth:"Kapan tanggal lahir pasien? (Format: YYYY-MM-DD)",gender:"Jenis kelamin pasien?",phone:"Nomor telepon yang bisa dihubungi? (Opsional, tekan Enter untuk skip)",address:"Alamat lengkap pasien?",primarySite:"Dimana lokasi kanker primer?",cancerStage:"Stadium kanker?",treatmentStatus:"Status pengobatan saat ini?"})[n[r]]||"Lanjut...",timestamp:new Date().toISOString()}:{id:"".concat(Date.now(),"-system"),type:"system",content:"✅ Data lengkap! Menyimpan data pasien...",timestamp:new Date().toISOString(),completed:!0};let o={...a,currentStep:r,messages:[...a.messages,i,e],formData:l,status:r>=n.length?"completed":"in_progress",updatedAt:new Date().toISOString()};return window.__mockChatSession=o,o}},N=async e=>{try{return await o("/patients/chat/".concat(e))}catch(e){throw d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to get chat session"}),e}};(0,i.useEffect)(()=>{c()},[]);let v={...a,setPatients:e=>d({type:"SET_PATIENTS",payload:e}),setCurrentPatient:e=>d({type:"SET_CURRENT_PATIENT",payload:e}),setLoading:e=>d({type:"SET_LOADING",payload:e}),setError:e=>d({type:"SET_ERROR",payload:e}),setSearchQuery:e=>d({type:"SET_SEARCH_QUERY",payload:e}),clearCurrentPatient:()=>d({type:"SET_CURRENT_PATIENT",payload:null}),fetchPatients:c,createPatient:x,updatePatient:p,deletePatient:h,searchPatients:g,getPatientById:u,getStatistics:y,quickEntry:b,createChatSession:j,sendChatMessage:f,getChatSession:N,loadMorePatients:m};return(0,s.jsx)(n.Provider,{value:v,children:t})}function c(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("usePatient must be used within a PatientProvider");return e}},6579:function(e,t,a){"use strict";var s=a(6383);class i{async uploadPhoto(e){let t=new FormData;return t.append("file",e.file),t.append("patientId",e.patientId),e.viewType&&t.append("viewType",e.viewType),e.anatomicalLocation&&t.append("anatomicalLocation",e.anatomicalLocation),e.description&&t.append("description",e.description),(await s.Z.post("/clinical-photos/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data}async uploadMultiplePhotos(e,t){let a=t.map(t=>this.uploadPhoto({patientId:e,file:t.file,viewType:t.viewAngle,description:t.description}));return await Promise.all(a)}async getPhotosByPatient(e){return(await s.Z.get("/clinical-photos/patient/".concat(e))).data}async deletePhoto(e){return(await s.Z.delete("/clinical-photos/".concat(e))).data}}t.Z=new i},1976:function(e,t,a){"use strict";a.d(t,{US:function(){return r},cL:function(){return l}});var s,i,l,r,n=a(6383);(s=l||(l={})).HISTOLOGY="HISTOLOGY",s.RADIOLOGY="RADIOLOGY",s.CLINICAL_PHOTO="CLINICAL_PHOTO",s.PATHOLOGY="PATHOLOGY",s.ENDOSCOPY="ENDOSCOPY",s.ULTRASOUND="ULTRASOUND",s.CT_SCAN="CT_SCAN",s.MRI="MRI",s.XRAY="XRAY",s.PET_SCAN="PET_SCAN",s.MAMMOGRAPHY="MAMMOGRAPHY",s.OTHER="OTHER",(i=r||(r={})).HISTOLOGY="HISTOLOGY",i.RADIOLOGY="RADIOLOGY",i.CLINICAL="CLINICAL",i.PATHOLOGY="PATHOLOGY",i.DIAGNOSTIC="DIAGNOSTIC",i.SURGICAL="SURGICAL",i.FOLLOW_UP="FOLLOW_UP",i.SCREENING="SCREENING",i.OTHER="OTHER";class o{async uploadImage(e,t,a){let s=new FormData;return s.append("file",e),Object.entries(t).forEach(e=>{let[t,a]=e;null!=a&&("object"==typeof a?s.append(t,JSON.stringify(a)):s.append(t,String(a)))}),(await n.Z.post("/medical-imaging/upload",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{a&&e.total&&a(Math.round(100*e.loaded/e.total))}})).data}async getAllImages(e){return(await n.Z.get("/medical-imaging",{params:e})).data}async getImageById(e){return(await n.Z.get("/medical-imaging/".concat(e))).data}async getImagesByPatient(e){return(await n.Z.get("/medical-imaging/patient/".concat(e))).data}async downloadImage(e){return(await n.Z.get("/medical-imaging/".concat(e,"/download"),{responseType:"blob"})).data}getThumbnailUrl(e){return"".concat(n.Z.defaults.baseURL,"/medical-imaging/").concat(e,"/thumbnail")}getImageUrl(e){return"".concat(n.Z.defaults.baseURL,"/medical-imaging/").concat(e,"/download")}async updateImage(e,t){return(await n.Z.put("/medical-imaging/".concat(e),t)).data}async deleteImage(e){await n.Z.delete("/medical-imaging/".concat(e))}isValidImageFile(e){return["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/tiff","application/dicom","image/dicom"].includes(e.type)}formatFileSize(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}}t.ZP=new o},525:function(e,t,a){"use strict";function s(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("token"),i={"Content-Type":"application/json",...t.headers};a&&(i.Authorization="Bearer ".concat(a));let l=await fetch("".concat("http://127.0.0.1:3001/api").concat(e),{...t,headers:i});if(!l.ok){var r,n;if(401===l.status)throw s(),Error("Session expired. Please login again.");let e=await l.json().catch(()=>({message:"HTTP ".concat(l.status,": ").concat(l.statusText)}));if(400===l.status&&(null===(n=e.error)||void 0===n?void 0:null===(r=n.details)||void 0===r?void 0:r.some(e=>"Unauthorized"===e.message)))throw s(),Error("Session expired. Please login again.");throw Error(e.message||"API request failed")}return l.json()}async function l(e){return i("/patients",{method:"POST",body:JSON.stringify(e)})}async function r(e,t){return i("/patients/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async function n(e){return i("/patients/".concat(e))}async function o(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.centerId)&&t.append("centerId",e.centerId),i("/patients?".concat(t.toString()))}async function d(e){return i("/patients/".concat(e),{method:"DELETE"})}a.d(t,{X4:function(){return o}}),t.ZP={create:l,update:r,getById:n,getAll:o,delete:d,transformWizardData:function(e){let t=e.section1||{},a=e.section2||{},s=e.section3||{},i=e.section4||{},l=e.section5||{},r=e.section6||{},n=e.section7||{},o=e.section8||{},d=e.section9||{};return{centerId:t.centerId||"",pathologyType:t.pathologyTypeId,hospitalRecordNumber:a.hospitalRecordNumber||"MR-".concat(Date.now()),nik:a.nik||"",name:a.name||"",dateOfBirth:a.dateOfBirth||"",placeOfBirth:a.placeOfBirth,gender:a.gender||"",bloodType:a.bloodType,religion:a.religion,maritalStatus:a.maritalStatus,occupation:a.occupation,education:a.education,phone:a.phone,email:a.email,address:a.address,province:a.province,regency:a.regency,district:a.district,village:a.village,postalCode:a.postalCode,emergencyContact:a.emergencyContact,chiefComplaint:s.chiefComplaint,symptomOnset:s.symptomOnset,symptomDuration:s.symptomDuration,symptomDurationUnit:s.symptomDurationUnit,presentingSymptoms:s.presentingSymptoms,tumorSize:s.tumorSize,familyHistory:s.familyHistory,tumorSyndromeId:s.tumorSyndromeId,karnofskyScore:s.karnofskyScore,height:s.height,weight:s.weight,bmi:s.bmi,biopsyType:i.biopsyType,biopsyDate:i.biopsyDate,biopsyLocation:i.biopsyLocation,biopsySite:i.biopsySite,imagingStudies:i.imagingStudies,imagingDate:i.imagingDate,imagingFindings:i.imagingFindings,mirrelScore:i.mirrelScore,diagnosisDate:l.diagnosisDate,whoClassificationId:l.whoClassificationId,boneLocationId:l.boneLocationId,softTissueLocationId:l.softTissueLocationId,tumorGrade:l.tumorGrade,histopathology:l.histopathology,stagingSystem:r.stagingSystem,enneking:r.enneking,ajcc:r.ajcc,cpc:n.cpcHeld?{held:n.cpcHeld,date:n.cpcDate,location:n.cpcLocation,participants:n.participants,presentation:n.casePresentation,recommendations:n.recommendations,consensus:n.consensus,notes:n.notes}:void 0,treatment:{surgery:o.surgery,chemotherapy:o.chemotherapy,radiotherapy:o.radiotherapy,overallResponse:o.overallResponse},followUp:{visits:d.visits}}}}},4033:function(e,t,a){e.exports=a(5313)}},function(e){e.O(0,[4737,1956,7372,2971,4938,1744],function(){return e(e.s=2058)}),_N_E=e.O()}]);