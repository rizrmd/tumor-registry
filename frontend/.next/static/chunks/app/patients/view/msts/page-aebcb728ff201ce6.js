(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6043],{4732:function(e,t,n){Promise.resolve().then(n.bind(n,3036))},3036:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n(7437),a=n(2265),s=n(4033),o=n(7372),r=n(1113),c=n(525);function l(){var e;let t=(0,s.useRouter)(),n=(0,s.useSearchParams)().get("id"),[o,l]=(0,a.useState)(null),[d,m]=(0,a.useState)(!0),[u,p]=(0,a.useState)("");(0,a.useEffect)(()=>{n?h():t.push("/patients")},[n]);let h=async()=>{if(n)try{m(!0);let e=await c.ZP.getById(n);l(e)}catch(e){p(e.message||"Failed to load patient")}finally{m(!1)}};return d?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading patient data..."})]})}):(u||!o)&&n?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Patient Not Found"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:u||"Unable to load patient data"}),(0,i.jsx)("button",{onClick:()=>t.push("/patients"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:"Back to Patients"})]})}):o&&n?(0,i.jsxs)("div",{className:"py-8 px-4",children:[(0,i.jsxs)("div",{className:"max-w-7xl mx-auto mb-6",children:[(0,i.jsxs)("button",{onClick:()=>t.push("/patients"),className:"flex items-center text-blue-600 hover:text-blue-800 font-medium mb-4",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Patient List"]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:o.name}),(0,i.jsxs)("p",{className:"text-gray-600",children:["MR: ",o.inamsosRecordNumber," (",o.hospitalRecordNumber,")"]}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[null===(e=o.pathologyType)||void 0===e?void 0:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())," • Stage: ",o.ennekingStage||"N/A"]})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"MSTS Assessment"})})]})})]}),(0,i.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,i.jsx)(r.K,{patientId:n,patientName:o.name,autoSave:!1,onSave:e=>{console.log("MSTS score saved with ID:",e),alert("MSTS score saved successfully!\n\nScore ID: ".concat(e,"\n\nYou can view the score history in the follow-up tracking."))}})})]}):null}function d(){return(0,i.jsx)(o.A,{children:(0,i.jsx)(a.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(l,{})})})}},525:function(e,t,n){"use strict";function i(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),a={"Content-Type":"application/json",...t.headers};n&&(a.Authorization="Bearer ".concat(n));let s=await fetch("".concat("http://127.0.0.1:3001/api").concat(e),{...t,headers:a});if(!s.ok){var o,r;if(401===s.status)throw i(),Error("Session expired. Please login again.");let e=await s.json().catch(()=>({message:"HTTP ".concat(s.status,": ").concat(s.statusText)}));if(400===s.status&&(null===(r=e.error)||void 0===r?void 0:null===(o=r.details)||void 0===o?void 0:o.some(e=>"Unauthorized"===e.message)))throw i(),Error("Session expired. Please login again.");throw Error(e.message||"API request failed")}return s.json()}async function s(e){return a("/patients",{method:"POST",body:JSON.stringify(e)})}async function o(e,t){return a("/patients/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async function r(e){return a("/patients/".concat(e))}async function c(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.centerId)&&t.append("centerId",e.centerId),a("/patients?".concat(t.toString()))}async function l(e){return a("/patients/".concat(e),{method:"DELETE"})}n.d(t,{X4:function(){return c}}),t.ZP={create:s,update:o,getById:r,getAll:c,delete:l,transformWizardData:function(e){let t=e.section1||{},n=e.section2||{},i=e.section3||{},a=e.section4||{},s=e.section5||{},o=e.section6||{},r=e.section7||{},c=e.section8||{},l=e.section9||{};return{centerId:t.centerId||"",pathologyType:t.pathologyTypeId,hospitalRecordNumber:n.hospitalRecordNumber||"MR-".concat(Date.now()),nik:n.nik||"",name:n.name||"",dateOfBirth:n.dateOfBirth||"",placeOfBirth:n.placeOfBirth,gender:n.gender||"",bloodType:n.bloodType,religion:n.religion,maritalStatus:n.maritalStatus,occupation:n.occupation,education:n.education,phone:n.phone,email:n.email,address:n.address,province:n.province,regency:n.regency,district:n.district,village:n.village,postalCode:n.postalCode,emergencyContact:n.emergencyContact,chiefComplaint:i.chiefComplaint,symptomOnset:i.symptomOnset,symptomDuration:i.symptomDuration,symptomDurationUnit:i.symptomDurationUnit,presentingSymptoms:i.presentingSymptoms,tumorSize:i.tumorSize,familyHistory:i.familyHistory,tumorSyndromeId:i.tumorSyndromeId,karnofskyScore:i.karnofskyScore,height:i.height,weight:i.weight,bmi:i.bmi,biopsyType:a.biopsyType,biopsyDate:a.biopsyDate,biopsyLocation:a.biopsyLocation,biopsySite:a.biopsySite,imagingStudies:a.imagingStudies,imagingDate:a.imagingDate,imagingFindings:a.imagingFindings,mirrelScore:a.mirrelScore,diagnosisDate:s.diagnosisDate,whoClassificationId:s.whoClassificationId,boneLocationId:s.boneLocationId,softTissueLocationId:s.softTissueLocationId,tumorGrade:s.tumorGrade,histopathology:s.histopathology,stagingSystem:o.stagingSystem,enneking:o.enneking,ajcc:o.ajcc,cpc:r.cpcHeld?{held:r.cpcHeld,date:r.cpcDate,location:r.cpcLocation,participants:r.participants,presentation:r.casePresentation,recommendations:r.recommendations,consensus:r.consensus,notes:r.notes}:void 0,treatment:{surgery:c.surgery,chemotherapy:c.chemotherapy,radiotherapy:c.radiotherapy,overallResponse:c.overallResponse},followUp:{visits:l.visits}}}}}},function(e){e.O(0,[4737,1956,7372,9838,2971,4938,1744],function(){return e(e.s=4732)}),_N_E=e.O()}]);