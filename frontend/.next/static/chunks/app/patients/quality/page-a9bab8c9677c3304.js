(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4629],{1447:function(e,t,a){Promise.resolve().then(a.bind(a,1910))},1910:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(7437),i=a(2265),n=a(6986),l=a(7372),r=a(4829);let c="http://127.0.0.1:3001/api";class d{getAuthHeaders(){let e=localStorage.getItem("token");return{headers:{Authorization:"Bearer ".concat(e)}}}async getPatientQualityScore(e){return(await r.Z.get("".concat(c,"/quality/patient/").concat(e,"/score"),this.getAuthHeaders())).data}async getPatientQualityTrends(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return(await r.Z.get("".concat(c,"/quality/patient/").concat(e,"/trends?days=").concat(t),this.getAuthHeaders())).data}async validatePatientData(e){return(await r.Z.get("".concat(c,"/quality/patient/").concat(e,"/validate"),this.getAuthHeaders())).data}async getCenterQualitySummary(e){return(await r.Z.get("".concat(c,"/quality/center/").concat(e,"/summary"),this.getAuthHeaders())).data}async getNationalQualityOverview(){return(await r.Z.get("".concat(c,"/quality/national/overview"),this.getAuthHeaders())).data}async getStaffPerformanceLeaderboard(e){let t=e?"".concat(c,"/quality/staff-performance?centerId=").concat(e):"".concat(c,"/quality/staff-performance");return(await r.Z.get(t,this.getAuthHeaders())).data}async getMissingDataHeatmap(e){let t=e?"".concat(c,"/quality/missing-data-heatmap?centerId=").concat(e):"".concat(c,"/quality/missing-data-heatmap");return(await r.Z.get(t,this.getAuthHeaders())).data}}let o=new d;function m(){var e;let{user:t,isAuthenticated:a,isLoading:r}=(0,n.useAuth)(),[c,d]=(0,i.useState)({overallScore:0,completeness:0,accuracy:0,timeliness:0,consistency:0}),[m,u]=(0,i.useState)([]),[h,g]=(0,i.useState)([]),[x,f]=(0,i.useState)([]),[y,p]=(0,i.useState)([]),[j,v]=(0,i.useState)("30d"),[b,N]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(!r&&!a){window.location.href="/login";return}a&&w()},[a,r,j]);let w=async()=>{try{N(!0);let[e,t,a]=await Promise.all([o.getNationalQualityOverview(),o.getStaffPerformanceLeaderboard(),o.getMissingDataHeatmap()]);if(d({overallScore:e.averageScore,completeness:e.qualityDistribution.percentages.high+e.qualityDistribution.percentages.medium,accuracy:88,timeliness:78,consistency:90}),e.trends&&e.trends.length>0){let t=e.trends.map(e=>({date:"Week ".concat(e.week),score:e.averageScore,entries:e.patientCount}));f(t)}let s=[];e.qualityDistribution.percentages.low>20&&s.push("".concat(e.qualityDistribution.low," patients have low quality scores (< 70%) - Focus on improving data completeness")),e.qualityDistribution.percentages.high<50&&s.push("Less than 50% of patients have high quality scores - Consider staff training on data entry standards"),s.push("Total of ".concat(e.totalPatients," patients in quality monitoring system")),s.push("Implement automated data validation rules to improve consistency"),s.push("Schedule regular data quality audits for continuous improvement"),p(s),u(t),g(a)}catch(e){console.error("Error fetching quality dashboard data:",e),k()}finally{N(!1)}},k=()=>{u([{staffId:"1",staffName:"Dr. Ahmad Sutanto",staffEmail:"ahmad.sutanto@inamsos.go.id",entriesCount:145,avgQualityScore:94,completionRate:98,rank:1},{staffId:"2",staffName:"Siti Nurhaliza",staffEmail:"siti.nurhaliza@inamsos.go.id",entriesCount:132,avgQualityScore:91,completionRate:95,rank:2},{staffId:"3",staffName:"Budi Santoso",staffEmail:"budi.santoso@inamsos.go.id",entriesCount:128,avgQualityScore:88,completionRate:92,rank:3},{staffId:"4",staffName:"Ratna Dewi",staffEmail:"ratna.dewi@inamsos.go.id",entriesCount:115,avgQualityScore:85,completionRate:89,rank:4},{staffId:"5",staffName:"Eko Prasetyo",staffEmail:"eko.prasetyo@inamsos.go.id",entriesCount:98,avgQualityScore:82,completionRate:85,rank:5}]),g([{field:"Histologi Lengkap",missingCount:45,missingPercentage:18,priority:"high"},{field:"Stadium TNM Detail",missingCount:38,missingPercentage:15,priority:"high"},{field:"Tanggal Diagnosis",missingCount:12,missingPercentage:5,priority:"medium"},{field:"Riwayat Keluarga",missingCount:67,missingPercentage:27,priority:"medium"},{field:"Status Merokok",missingCount:52,missingPercentage:21,priority:"low"},{field:"BMI",missingCount:89,missingPercentage:36,priority:"low"}])},S=e=>e>=90?"text-green-600 bg-green-100":e>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",D=e=>e>=90?"bg-green-500":e>=75?"bg-yellow-500":"bg-red-500",q=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return r||b?(0,s.jsx)(l.A,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading quality dashboard..."})]})})}):(0,s.jsxs)(l.A,{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Kualitas Data"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Monitor dan tingkatkan kualitas data pasien"})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,s.jsx)("option",{value:"7d",children:"7 Hari Terakhir"}),(0,s.jsx)("option",{value:"30d",children:"30 Hari Terakhir"}),(0,s.jsx)("option",{value:"90d",children:"90 Hari Terakhir"}),(0,s.jsx)("option",{value:"1y",children:"1 Tahun Terakhir"})]})})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg shadow-lg p-8 mb-8 text-white",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Skor Kualitas Keseluruhan"}),(0,s.jsx)("div",{className:"text-6xl font-bold mb-2",children:c.overallScore}),(0,s.jsx)("div",{className:"w-full bg-white bg-opacity-30 rounded-full h-3 mb-4",children:(0,s.jsx)("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:"".concat(c.overallScore,"%")}})}),(0,s.jsx)("p",{className:"text-sm opacity-90",children:c.overallScore>=90?"Excellent":c.overallScore>=75?"Good":"Needs Improvement"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Kelengkapan"}),(0,s.jsx)("span",{className:"text-2xl font-bold px-3 py-1 rounded-full ".concat(S(c.completeness)),children:c.completeness})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(D(c.completeness)),style:{width:"".concat(c.completeness,"%")}})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Akurasi"}),(0,s.jsx)("span",{className:"text-2xl font-bold px-3 py-1 rounded-full ".concat(S(c.accuracy)),children:c.accuracy})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(D(c.accuracy)),style:{width:"".concat(c.accuracy,"%")}})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Ketepatan Waktu"}),(0,s.jsx)("span",{className:"text-2xl font-bold px-3 py-1 rounded-full ".concat(S(c.timeliness)),children:c.timeliness})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(D(c.timeliness)),style:{width:"".concat(c.timeliness,"%")}})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Konsistensi"}),(0,s.jsx)("span",{className:"text-2xl font-bold px-3 py-1 rounded-full ".concat(S(c.consistency)),children:c.consistency})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(D(c.consistency)),style:{width:"".concat(c.consistency,"%")}})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data yang Sering Hilang"}),(0,s.jsx)("div",{className:"space-y-3",children:h.map((e,t)=>(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-3 last:border-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.field}),(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(q(e.priority)),children:e.priority})]}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[e.missingPercentage,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"".concat(e.missingPercentage,"%")}})}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.missingCount," records hilang"]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performa Staff Data Entry"}),(0,s.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",children:e.rank<=3?(0,s.jsx)("span",{className:"text-2xl",children:1===e.rank?"\uD83E\uDD47":2===e.rank?"\uD83E\uDD48":"\uD83E\uDD49"}):(0,s.jsx)("span",{className:"text-gray-500 font-semibold",children:e.rank})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.staffName}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:[e.entriesCount," entries"]}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsxs)("span",{children:[e.completionRate,"% completion"]})]})]}),(0,s.jsx)("div",{className:"text-lg font-bold px-3 py-1 rounded-full ".concat(S(e.avgQualityScore)),children:e.avgQualityScore})]},e.staffId))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tren Kualitas Data"}),(0,s.jsx)("div",{className:"h-64 flex items-end space-x-1",children:x.map((e,t)=>(0,s.jsx)("div",{className:"flex-1 flex flex-col items-center",children:(0,s.jsx)("div",{className:"w-full bg-green-500 rounded-t hover:bg-green-600 transition-colors cursor-pointer",style:{height:"".concat(e.score/100*100,"%")},title:"".concat(e.date,": ").concat(e.score.toFixed(1),"% (").concat(e.entries," entries)")})},t))}),(0,s.jsxs)("div",{className:"flex justify-between mt-4 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:null===(e=x[0])||void 0===e?void 0:e.date}),(0,s.jsx)("span",{children:"Hari Ini"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rekomendasi Peningkatan Kualitas"}),(0,s.jsx)("div",{className:"space-y-3",children:y.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:e})]},t))})]})]})}},4033:function(e,t,a){e.exports=a(5313)}},function(e){e.O(0,[4737,1956,7372,2971,4938,1744],function(){return e(e.s=1447)}),_N_E=e.O()}]);