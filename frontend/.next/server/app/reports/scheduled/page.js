(()=>{var e={};e.id=616,e.ids=[616],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1559:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>c});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["reports",{children:["scheduled",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9359)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\reports\\scheduled\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8549)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,8206)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\reports\\scheduled\\page.tsx"],u="/reports/scheduled/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/reports/scheduled/page",pathname:"/reports/scheduled",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7686:(e,t,s)=>{Promise.resolve().then(s.bind(s,8803))},8803:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(2295),a=s(3729),i=s(3973),n=s(4573);function l(){let{user:e,isAuthenticated:t,isLoading:s}=(0,i.useAuth)(),[l,d]=(0,a.useState)([]),[c,o]=(0,a.useState)(!0),[u,x]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)({name:"",reportType:"",schedule:"weekly",recipients:"",status:"active"});(0,a.useEffect)(()=>{if(!s&&!t){window.location.href="/login";return}t&&j()},[t,s]);let j=async()=>{try{o(!0),d([{id:"SCH-001",name:"Laporan Insidensi Mingguan",schedule:"weekly",nextRun:"2025-11-29 08:00",recipients:["dr.siti@rscm.co.id","admin@kemenkes.go.id"],status:"active",lastRun:"2025-11-22 08:00",reportType:"Epidemiologi"},{id:"SCH-002",name:"Kualitas Data Bulanan",schedule:"monthly",nextRun:"2025-12-01 09:00",recipients:["dr.budi@dharmais.co.id","quality@inamsos.id"],status:"active",lastRun:"2025-11-01 09:00",reportType:"Kualitas"},{id:"SCH-003",name:"Dashboard Eksekutif Harian",schedule:"daily",nextRun:"2025-11-23 07:00",recipients:["direktur@rscm.co.id","kabid@kemenkes.go.id"],status:"active",lastRun:"2025-11-22 07:00",reportType:"Administrasi"},{id:"SCH-004",name:"Analisis Treatment Outcomes",schedule:"monthly",nextRun:"2025-12-15 10:00",recipients:["dr.ahmad@rscm.co.id","research@inamsos.id"],status:"active",lastRun:"2025-11-15 10:00",reportType:"Klinis"},{id:"SCH-005",name:"Distribusi Geografis Kasus",schedule:"weekly",nextRun:"2025-11-30 11:00",recipients:["dr.rina@dharmais.co.id","epidemio@kemenkes.go.id"],status:"inactive",lastRun:"2025-11-16 11:00",reportType:"Epidemiologi"},{id:"SCH-006",name:"Performa Pusat Kesehatan",schedule:"monthly",nextRun:"2025-12-01 14:00",recipients:["admin@rscm.co.id","admin@dharmais.co.id"],status:"active",lastRun:"2025-11-01 14:00",reportType:"Administrasi"},{id:"SCH-007",name:"Update Pasien Baru",schedule:"daily",nextRun:"2025-11-23 16:00",recipients:["registrar@rscm.co.id"],status:"inactive",lastRun:"2025-11-22 16:00",reportType:"Administrasi"}])}catch(e){console.error("Error fetching scheduled reports:",e)}finally{o(!1)}},y=e=>{switch(e){case"daily":return"Harian";case"weekly":return"Mingguan";case"monthly":return"Bulanan";default:return e}},v=e=>{switch(e){case"daily":return"bg-blue-100 text-blue-800";case"weekly":return"bg-green-100 text-green-800";case"monthly":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},f=e=>{let t="active"===e.status?"inactive":"active";d(s=>s.map(s=>s.id===e.id?{...s,status:t}:s)),alert(`Laporan "${e.name}" ${"active"===t?"diaktifkan":"dinonaktifkan"}`)},k=e=>{m(e),g({name:e.name,reportType:e.reportType,schedule:e.schedule,recipients:e.recipients.join(", "),status:e.status}),x(!0)},b=e=>{confirm(`Apakah Anda yakin ingin menghapus jadwal laporan "${e.name}"?`)&&(d(t=>t.filter(t=>t.id!==e.id)),alert(`Laporan "${e.name}" berhasil dihapus`))},N=e=>{alert(`Menjalankan laporan "${e.name}" sekarang...
Laporan akan dikirim ke ${e.recipients.length} penerima.`)};return s||c?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,r.jsxs)(n.A,{children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Laporan Terjadwal"}),r.jsx("p",{className:"text-gray-600",children:"Kelola laporan yang dijadwalkan secara otomatis"})]}),r.jsx("button",{onClick:()=>{m(null),g({name:"",reportType:"",schedule:"weekly",recipients:"",status:"active"}),x(!0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"+ Jadwalkan Laporan Baru"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Laporan Aktif"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.filter(e=>"active"===e.status).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tidak Aktif"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.filter(e=>"inactive"===e.status).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Jadwal"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.length})]})]})})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Laporan"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jadwal"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Eksekusi Berikutnya"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Penerima"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===l.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,r.jsxs)("div",{className:"text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"mt-2",children:"Belum ada laporan terjadwal"})]})})}):l.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.reportType," - ",e.id]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${v(e.schedule)}`,children:y(e.schedule)})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:e.nextRun}),e.lastRun&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Terakhir: ",e.lastRun]})]}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[e.recipients.length," penerima"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.recipients[0],e.recipients.length>1&&`, +${e.recipients.length-1} lainnya`]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>f(e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${"active"===e.status?"bg-green-600":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${"active"===e.status?"translate-x-6":"translate-x-1"}`})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-900",title:"Jalankan Sekarang",children:(0,r.jsxs)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),r.jsx("button",{onClick:()=>k(e),className:"text-green-600 hover:text-green-900",title:"Edit",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:()=>b(e),className:"text-red-600 hover:text-red-900",title:"Hapus",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})})}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:p?"Edit Laporan Terjadwal":"Jadwalkan Laporan Baru"})}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!h.name||!h.reportType||!h.recipients){alert("Mohon lengkapi semua field yang diperlukan");return}let t=h.recipients.split(",").map(e=>e.trim());if(p)d(e=>e.map(e=>e.id===p.id?{...e,name:h.name,reportType:h.reportType,schedule:h.schedule,recipients:t,status:h.status}:e)),alert(`Laporan "${h.name}" berhasil diupdate`);else{let e={id:`SCH-${String(l.length+1).padStart(3,"0")}`,name:h.name,reportType:h.reportType,schedule:h.schedule,recipients:t,status:h.status,nextRun:"2025-11-25 08:00",lastRun:void 0};d([...l,e]),alert(`Laporan "${h.name}" berhasil dijadwalkan`)}x(!1)},className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nama Laporan ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:h.name,onChange:e=>g({...h,name:e.target.value}),placeholder:"Contoh: Laporan Insidensi Mingguan",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipe Laporan ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{value:h.reportType,onChange:e=>g({...h,reportType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Pilih Tipe Laporan"}),r.jsx("option",{value:"Epidemiologi",children:"Epidemiologi"}),r.jsx("option",{value:"Klinis",children:"Klinis"}),r.jsx("option",{value:"Administrasi",children:"Administrasi"}),r.jsx("option",{value:"Kualitas",children:"Kualitas"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frekuensi Jadwal"}),r.jsx("div",{className:"grid grid-cols-3 gap-4",children:["daily","weekly","monthly"].map(e=>r.jsx("button",{type:"button",onClick:()=>g({...h,schedule:e}),className:`px-4 py-3 border-2 rounded-lg font-medium transition-colors ${h.schedule===e?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-green-300"}`,children:y(e)},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Penerima ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:h.recipients,onChange:e=>g({...h,recipients:e.target.value}),placeholder:"Masukkan email penerima, pisahkan dengan koma Contoh: admin@rscm.co.id, dr.budi@dharmais.co.id",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pisahkan dengan koma untuk multiple email"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",value:"active",checked:"active"===h.status,onChange:e=>g({...h,status:e.target.value}),className:"mr-2"}),r.jsx("span",{children:"Aktif"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",value:"inactive",checked:"inactive"===h.status,onChange:e=>g({...h,status:e.target.value}),className:"mr-2"}),r.jsx("span",{children:"Tidak Aktif"})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Batal"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:p?"Simpan Perubahan":"Jadwalkan Laporan"})]})]})]})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},9359:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`D:\Project\Tumor Registry\INAMSOS Application Desktop\frontend\src\app\reports\scheduled\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[7141,4192,4573],()=>s(1559));module.exports=r})();