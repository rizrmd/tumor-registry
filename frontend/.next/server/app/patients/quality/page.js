(()=>{var e={};e.id=4629,e.ids=[4629],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},6281:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8453:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=s(7096),r=s(6132),i=s(7284),n=s.n(i),l=s(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["patients",{children:["quality",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,317)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\patients\\quality\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4775)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,5666)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\not-found.tsx"]}],c=["D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\patients\\quality\\page.tsx"],u="/patients/quality/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/patients/quality/page",pathname:"/patients/quality",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4013:(e,t,s)=>{Promise.resolve().then(s.bind(s,9869))},9869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(3854),r=s(4218),i=s(5815),n=s(3984),l=s(6874);let o="http://localhost:3001/api/v1";class d{getAuthHeaders(){let e=localStorage.getItem("token");return{headers:{Authorization:`Bearer ${e}`}}}async getPatientQualityScore(e){let t=await l.Z.get(`${o}/quality/patient/${e}/score`,this.getAuthHeaders());return t.data}async getPatientQualityTrends(e,t=30){let s=await l.Z.get(`${o}/quality/patient/${e}/trends?days=${t}`,this.getAuthHeaders());return s.data}async validatePatientData(e){let t=await l.Z.get(`${o}/quality/patient/${e}/validate`,this.getAuthHeaders());return t.data}async getCenterQualitySummary(e){let t=await l.Z.get(`${o}/quality/center/${e}/summary`,this.getAuthHeaders());return t.data}async getNationalQualityOverview(){let e=await l.Z.get(`${o}/quality/national/overview`,this.getAuthHeaders());return e.data}async getStaffPerformanceLeaderboard(e){let t=e?`${o}/quality/staff-performance?centerId=${e}`:`${o}/quality/staff-performance`,s=await l.Z.get(t,this.getAuthHeaders());return s.data}async getMissingDataHeatmap(e){let t=e?`${o}/quality/missing-data-heatmap?centerId=${e}`:`${o}/quality/missing-data-heatmap`,s=await l.Z.get(t,this.getAuthHeaders());return s.data}}let c=new d;function u(){let{user:e,isAuthenticated:t,isLoading:s}=(0,i.useAuth)(),[l,o]=(0,r.useState)({overallScore:0,completeness:0,accuracy:0,timeliness:0,consistency:0}),[d,u]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[g,h]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[y,j]=(0,r.useState)("30d"),[v,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!s&&!t){window.location.href="/login";return}t&&N()},[t,s,y]);let N=async()=>{try{b(!0);let[e,t,s]=await Promise.all([c.getNationalQualityOverview(),c.getStaffPerformanceLeaderboard(),c.getMissingDataHeatmap()]);if(o({overallScore:e.averageScore,completeness:e.qualityDistribution.percentages.high+e.qualityDistribution.percentages.medium,accuracy:88,timeliness:78,consistency:90}),e.trends&&e.trends.length>0){let t=e.trends.map(e=>({date:`Week ${e.week}`,score:e.averageScore,entries:e.patientCount}));h(t)}let a=[];e.qualityDistribution.percentages.low>20&&a.push(`${e.qualityDistribution.low} patients have low quality scores (< 70%) - Focus on improving data completeness`),e.qualityDistribution.percentages.high<50&&a.push("Less than 50% of patients have high quality scores - Consider staff training on data entry standards"),a.push(`Total of ${e.totalPatients} patients in quality monitoring system`),a.push("Implement automated data validation rules to improve consistency"),a.push("Schedule regular data quality audits for continuous improvement"),f(a),u(t),x(s)}catch(e){console.error("Error fetching quality dashboard data:",e),w()}finally{b(!1)}},w=()=>{u([{staffId:"1",staffName:"Dr. Ahmad Sutanto",staffEmail:"ahmad.sutanto@inamsos.go.id",entriesCount:145,avgQualityScore:94,completionRate:98,rank:1},{staffId:"2",staffName:"Siti Nurhaliza",staffEmail:"siti.nurhaliza@inamsos.go.id",entriesCount:132,avgQualityScore:91,completionRate:95,rank:2},{staffId:"3",staffName:"Budi Santoso",staffEmail:"budi.santoso@inamsos.go.id",entriesCount:128,avgQualityScore:88,completionRate:92,rank:3},{staffId:"4",staffName:"Ratna Dewi",staffEmail:"ratna.dewi@inamsos.go.id",entriesCount:115,avgQualityScore:85,completionRate:89,rank:4},{staffId:"5",staffName:"Eko Prasetyo",staffEmail:"eko.prasetyo@inamsos.go.id",entriesCount:98,avgQualityScore:82,completionRate:85,rank:5}]),x([{field:"Histologi Lengkap",missingCount:45,missingPercentage:18,priority:"high"},{field:"Stadium TNM Detail",missingCount:38,missingPercentage:15,priority:"high"},{field:"Tanggal Diagnosis",missingCount:12,missingPercentage:5,priority:"medium"},{field:"Riwayat Keluarga",missingCount:67,missingPercentage:27,priority:"medium"},{field:"Status Merokok",missingCount:52,missingPercentage:21,priority:"low"},{field:"BMI",missingCount:89,missingPercentage:36,priority:"low"}])},q=e=>e>=90?"text-green-600 bg-green-100":e>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",$=e=>e>=90?"bg-green-500":e>=75?"bg-yellow-500":"bg-red-500",k=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return s||v?a.jsx(n.A,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading quality dashboard..."})]})})}):(0,a.jsxs)(n.A,{children:[a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Kualitas Data"}),a.jsx("p",{className:"text-gray-600",children:"Monitor dan tingkatkan kualitas data pasien"})]}),a.jsx("div",{children:(0,a.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"7d",children:"7 Hari Terakhir"}),a.jsx("option",{value:"30d",children:"30 Hari Terakhir"}),a.jsx("option",{value:"90d",children:"90 Hari Terakhir"}),a.jsx("option",{value:"1y",children:"1 Tahun Terakhir"})]})})]})}),a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg shadow-lg p-8 mb-8 text-white",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-lg font-medium mb-2",children:"Skor Kualitas Keseluruhan"}),a.jsx("div",{className:"text-6xl font-bold mb-2",children:l.overallScore}),a.jsx("div",{className:"w-full bg-white bg-opacity-30 rounded-full h-3 mb-4",children:a.jsx("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:`${l.overallScore}%`}})}),a.jsx("p",{className:"text-sm opacity-90",children:l.overallScore>=90?"Excellent":l.overallScore>=75?"Good":"Needs Improvement"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Kelengkapan"}),a.jsx("span",{className:`text-2xl font-bold px-3 py-1 rounded-full ${q(l.completeness)}`,children:l.completeness})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${$(l.completeness)}`,style:{width:`${l.completeness}%`}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Akurasi"}),a.jsx("span",{className:`text-2xl font-bold px-3 py-1 rounded-full ${q(l.accuracy)}`,children:l.accuracy})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${$(l.accuracy)}`,style:{width:`${l.accuracy}%`}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Ketepatan Waktu"}),a.jsx("span",{className:`text-2xl font-bold px-3 py-1 rounded-full ${q(l.timeliness)}`,children:l.timeliness})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${$(l.timeliness)}`,style:{width:`${l.timeliness}%`}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Konsistensi"}),a.jsx("span",{className:`text-2xl font-bold px-3 py-1 rounded-full ${q(l.consistency)}`,children:l.consistency})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${$(l.consistency)}`,style:{width:`${l.consistency}%`}})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data yang Sering Hilang"}),a.jsx("div",{className:"space-y-3",children:m.map((e,t)=>(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.field}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k(e.priority)}`,children:e.priority})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:[e.missingPercentage,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${e.missingPercentage}%`}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.missingCount," records hilang"]})]},t))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performa Staff Data Entry"}),a.jsx("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",children:e.rank<=3?a.jsx("span",{className:"text-2xl",children:1===e.rank?"\uD83E\uDD47":2===e.rank?"\uD83E\uDD48":"\uD83E\uDD49"}):a.jsx("span",{className:"text-gray-500 font-semibold",children:e.rank})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.staffName}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.entriesCount," entries"]}),a.jsx("span",{children:"â€¢"}),(0,a.jsxs)("span",{children:[e.completionRate,"% completion"]})]})]}),a.jsx("div",{className:`text-lg font-bold px-3 py-1 rounded-full ${q(e.avgQualityScore)}`,children:e.avgQualityScore})]},e.staffId))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tren Kualitas Data"}),a.jsx("div",{className:"h-64 flex items-end space-x-1",children:g.map((e,t)=>a.jsx("div",{className:"flex-1 flex flex-col items-center",children:a.jsx("div",{className:"w-full bg-green-500 rounded-t hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${e.score/100*100}%`},title:`${e.date}: ${e.score.toFixed(1)}% (${e.entries} entries)`})},t))}),(0,a.jsxs)("div",{className:"flex justify-between mt-4 text-xs text-gray-500",children:[a.jsx("span",{children:g[0]?.date}),a.jsx("span",{children:"Hari Ini"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rekomendasi Peningkatan Kualitas"}),a.jsx("div",{className:"space-y-3",children:p.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[a.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{className:"text-sm text-gray-700",children:e})]},t))})]})]})}},317:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var a=s(5153);let r=(0,a.createProxy)(String.raw`D:\Project\Tumor Registry\tumor-registry\frontend\src\app\patients\quality\page.tsx`),{__esModule:i,$$typeof:n}=r,l=r.default,o=l}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[296,6905,3984],()=>s(8453));module.exports=a})();