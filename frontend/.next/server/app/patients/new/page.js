(()=>{var e={};e.id=4434,e.ids=[4434],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},428:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d});var s=t(482),r=t(9108),l=t(2563),i=t.n(l),n=t(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(a,o);let d=["",{children:["patients",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8199)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\patients\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8549)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,8206)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\not-found.tsx"]}],c=["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\patients\\new\\page.tsx"],u="/patients/new/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/patients/new/page",pathname:"/patients/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7324:(e,a,t)=>{Promise.resolve().then(t.bind(t,8608))},3267:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return i}});let s=t(9694);t(3729);let r=s._(t(546));function l(e){return{default:(null==e?void 0:e.default)||e}}function i(e,a){let t=r.default,s={loading:e=>{let{error:a,isLoading:t,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e),Object.assign(s,a);let i=s.loader;return t({...s,loader:()=>null!=i?i().then(l):Promise.resolve(l(()=>null))})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},1868:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"NoSSR",{enumerable:!0,get:function(){return r}});let s=t(1462);function r(e){let{children:a}=e;return(0,s.throwWithNoSSR)(),a}},546:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return l}});let s=t(9694)._(t(3729)),r=t(1868),l=function(e){let a=Object.assign({loader:null,loading:null,ssr:!0},e);function t(e){let t=a.loading,l=s.default.createElement(t,{isLoading:!0,pastDelay:!0,error:null}),i=a.ssr?s.default.Fragment:r.NoSSR,n=a.lazy;return s.default.createElement(s.default.Suspense,{fallback:l},s.default.createElement(i,null,s.default.createElement(n,e)))}return a.lazy=s.default.lazy(a.loader),t.displayName="LoadableComponent",t}},2254:(e,a,t)=>{e.exports=t(4767)},8608:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Q});var s=t(2295),r=t(3729),l=t(2254),i=t(3973),n=t(2528);let o=(0,r.createContext)(null),d=({children:e,autoSaveInterval:a=12e4,draftKey:t="patient-form-draft",onAutoSave:l})=>{let[i,n]=(0,r.useState)({}),[d,c]=(0,r.useState)({}),[u,m]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!0),[b,f]=(0,r.useState)(!1),y=(0,r.useRef)(null),v=(0,r.useRef)({});(0,r.useEffect)(()=>{I()},[]),(0,r.useEffect)(()=>{if(h&&g)return y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{C()},a),()=>{y.current&&clearTimeout(y.current)}},[i,g,h,a]),(0,r.useEffect)(()=>{let e=e=>{if(b)return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[b]);let j=(0,r.useCallback)((e,a)=>{n(t=>({...t,[e]:{...t[e],...a}})),x(!0),f(!0)},[]),N=(0,r.useCallback)((e,a,t)=>{n(s=>({...s,[e]:{...s[e],[a]:t}})),x(!0),f(!0)},[]),k=(0,r.useCallback)(e=>i[e]||{},[i]),w=(0,r.useCallback)(()=>i,[i]),S=(0,r.useCallback)((e,a)=>{c(t=>({...t,[e]:a}))},[]),C=(0,r.useCallback)(async()=>{try{localStorage.setItem(t,JSON.stringify({data:i,timestamp:new Date().toISOString(),validation:d})),l&&await l(i),m(new Date),x(!1),console.log("Draft saved successfully at",new Date().toLocaleTimeString())}catch(e){console.error("Error saving draft:",e)}},[i,d,t,l]),I=(0,r.useCallback)(()=>{try{let e=localStorage.getItem(t);if(e){let{data:a,timestamp:t,validation:s}=JSON.parse(e);n(a),c(s||{}),m(new Date(t)),v.current=a,console.log("Draft loaded from",new Date(t).toLocaleString())}}catch(e){console.error("Error loading draft:",e)}},[t]),T=(0,r.useCallback)(()=>{localStorage.removeItem(t),n({}),c({}),m(null),x(!1),f(!1),v.current={}},[t]);return s.jsx(o.Provider,{value:{formData:i,updateSection:j,updateField:N,getSection:k,getAllData:w,sectionValidation:d,setSectionValidation:S,saveDraft:C,loadDraft:I,clearDraft:T,lastSaved:u,isDirty:g,enableAutoSave:h,setEnableAutoSave:p,hasUnsavedChanges:b},children:e})},c=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useFormContext must be used within FormProvider");return e},u=({sections:e,onComplete:a,onSaveDraft:t,autoSaveInterval:l=12e4,showSidebar:i=!0,className:n=""})=>{let{getAllData:o,getSection:d,updateSection:u,updateField:m,sectionValidation:g,setSectionValidation:x,saveDraft:h,lastSaved:p,isDirty:b,hasUnsavedChanges:f}=c(),[y,v]=(0,r.useState)(0),[j,N]=(0,r.useState)(!1),[k,w]=(0,r.useState)(!1),[S,C]=(0,r.useState)(new Set),I=e.filter(e=>!e.shouldRender||e.shouldRender(o())),T=I[y],A=0===y,D=y===I.length-1,P=d(T.id),E=g[T.id]||{isValid:!0,errors:[]};(0,r.useEffect)(()=>{if(b&&t){let e=setTimeout(async()=>{try{await t(o()),await h()}catch(e){console.error("Auto-save failed:",e)}},l);return()=>clearTimeout(e)}},[b,o,t,l,h]);let L=async()=>{if(!T.validate)return x(T.id,{isValid:!0,errors:[]}),!0;N(!0);try{let e=await Promise.resolve(T.validate(P,o()));return x(T.id,e),N(!1),e.isValid}catch(e){return console.error("Validation error:",e),N(!1),!1}},M=async()=>{let e=await L();e||T.isOptional?(e&&C(e=>new Set(e).add(T.id)),v(e=>Math.min(e+1,I.length-1)),window.scrollTo({top:0,behavior:"smooth"})):console.warn("Validation failed for section:",T.id)},R=e=>{let a=I.findIndex(a=>a.id===e);-1!==a&&(v(a),window.scrollTo({top:0,behavior:"smooth"}))},O=async()=>{try{t&&await t(o()),await h(),alert("Draft saved successfully!")}catch(e){console.error("Save draft failed:",e),alert("Failed to save draft. Please try again.")}},B=async()=>{N(!0);let e=!0;for(let a of I)if(a.validate){let t=d(a.id),s=await Promise.resolve(a.validate(t,o()));x(a.id,s),s.isValid||a.isOptional||(e=!1)}if(N(!1),!e){alert("Please complete all required sections before submitting.");let e=I.findIndex(e=>{let a=g[e.id];return a&&!a.isValid&&!e.isOptional});-1!==e&&v(e);return}w(!0);try{await a(o())}catch(e){console.error("Submission failed:",e),alert("Failed to submit form. Please try again.")}finally{w(!1)}},H=(0,r.useCallback)(e=>{u(T.id,e)},[T.id,u]),F=(0,r.useCallback)((e,a)=>{m(T.id,e,a)},[T.id,m]);return(0,s.jsxs)("div",{className:`min-h-screen bg-gray-50 ${n}`,children:[p&&(0,s.jsxs)("div",{className:"fixed top-4 right-4 z-50 bg-white px-4 py-2 rounded-lg shadow-md text-sm text-gray-600 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,s.jsxs)("span",{children:["Last saved: ",p.toLocaleTimeString()]})]}),s.jsx("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"flex",children:[i&&(0,s.jsxs)("aside",{className:"w-64 bg-white min-h-screen border-r border-gray-200 p-6 sticky top-0 overflow-y-auto h-screen",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Patient Registration"}),s.jsx("nav",{className:"space-y-2",children:I.map((e,a)=>{let t=g[e.id],r=S.has(e.id),l=a===y,i=t&&!t.isValid;return(0,s.jsxs)("button",{onClick:()=>R(e.id),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center space-x-3 ${l?"bg-blue-50 border-2 border-blue-500 text-blue-900":i?"bg-red-50 border border-red-200 text-red-900":r?"bg-green-50 border border-green-200 text-green-900":"bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[s.jsx("div",{className:"flex-shrink-0",children:r&&!i?s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):i?s.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):l?s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z",clipRule:"evenodd"})}):s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium truncate",children:e.title}),e.isOptional&&s.jsx("div",{className:"text-xs text-gray-500",children:"Optional"})]})]},e.id)})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:O,disabled:!f,className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${f?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:"Save Draft"})})]}),s.jsx("main",{className:"flex-1 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:T.title}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Section ",y+1," of ",I.length]})]}),T.description&&s.jsx("p",{className:"text-gray-600",children:T.description}),T.isOptional&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This section is optional"})]}),E.errors.length>0&&s.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Please correct the following errors:"}),s.jsx("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:E.errors.map((e,a)=>s.jsx("li",{children:e.message},a))})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:s.jsx(T.component,{data:P,updateData:H,updateField:F,errors:E.errors,isActive:!0})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>{v(e=>Math.max(e-1,0)),window.scrollTo({top:0,behavior:"smooth"})},disabled:A,className:`px-6 py-3 rounded-lg font-medium transition-colors ${A?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Previous"}),s.jsx("div",{className:"flex space-x-4",children:D?s.jsx("button",{onClick:B,disabled:k||j,className:"px-8 py-3 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 disabled:bg-green-400 transition-colors",children:k?"Submitting...":"Submit Registration"}):s.jsx("button",{onClick:M,disabled:j,className:"px-6 py-3 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:j?"Validating...":"Next"})})]})]})})]})})]})};function m(){let{getSection:e,updateSection:a}=c(),[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),g=e("section1")||{};(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{d(!0),m(null);let e="http://127.0.0.1:3001/api",t=localStorage.getItem("token"),[s,r]=await Promise.all([fetch(`${e}/centers`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),fetch(`${e}/pathology-types`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})]);if(!s.ok||!r.ok){let e=s.ok?null:await s.text(),a=r.ok?null:await r.text();throw console.error("Centers response:",e),console.error("Pathology response:",a),Error("Failed to load data")}let i=await s.json(),o=await r.json();l(Array.isArray(i)?i:i.data||[]),n(Array.isArray(o)?o:o.data||[]);let c=Array.isArray(i)?i:i.data||[];if(!g.centerId&&c.length>0){let e=c[0];a("section1",{...g,centerId:e.id})}}catch(e){console.error("Error loading section 1 data:",e),m("Gagal memuat data. Silakan coba lagi.")}finally{d(!1)}},h=e=>{let t=i.find(a=>a.id===e);t&&a("section1",{...g,pathologyType:t.code,pathologyTypeName:t.name})};return o?(0,s.jsxs)("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-4 text-gray-600",children:"Memuat data..."})]}):u?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-red-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-red-800 font-medium",children:"Error"}),s.jsx("p",{className:"text-red-700 mt-1",children:u}),s.jsx("button",{onClick:x,className:"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Coba Lagi"})]})]})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pusat Pengobatan & Jenis Patologi"}),s.jsx("p",{className:"text-gray-600",children:"Pilih pusat pengobatan dan jenis patologi tumor muskuloskeletal"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pusat Pengobatan ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:g.centerId||"",onChange:e=>{a("section1",{...g,centerId:e.target.value})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Pusat Pengobatan"}),t.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.code,") - ",e.province,e.regency?`, ${e.regency}`:""]},e.id))]}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Pilih pusat pengobatan tempat pasien dirawat. Untuk pasien rujukan, pilih pusat yang sesuai."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Jenis Patologi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.map(e=>{let a=g.pathologyType===e.code;return(0,s.jsxs)("button",{type:"button",onClick:()=>h(e.id),className:`
                  relative p-6 rounded-lg border-2 text-left transition-all
                  ${a?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}
                `,children:[a&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:`text-lg font-semibold mb-2 ${a?"text-blue-900":"text-gray-900"}`,children:e.name}),s.jsx("div",{className:`text-sm font-mono mb-2 ${a?"text-blue-700":"text-gray-600"}`,children:e.code}),e.description&&s.jsx("div",{className:`text-sm ${a?"text-blue-800":"text-gray-600"}`,children:e.description}),(0,s.jsxs)("div",{className:`mt-4 text-xs ${a?"text-blue-600":"text-gray-500"}`,children:["BONE"===e.code&&"57 klasifikasi tumor tulang WHO","SOFT_TISSUE"===e.code&&"68 klasifikasi tumor jaringan lunak WHO","METASTATIC"===e.code&&"Tumor metastatik"]})]},e.id)})}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Pilih jenis patologi tumor. Pilihan ini menentukan klasifikasi WHO yang akan ditampilkan di bagian diagnosis."})]}),g.centerId&&g.pathologyType&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-green-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-sm text-green-800",children:[s.jsx("span",{className:"font-medium",children:"Informasi dasar lengkap."})," Anda dapat melanjutkan ke bagian selanjutnya."]})]})})]})}function g(){let{getSection:e,updateSection:a}=c(),t=e("section2")||{},l={hospitalRecordNumber:t.hospitalRecordNumber||"",nik:t.nik||"",dateOfBirth:t.dateOfBirth||"",gender:t.gender||"",provinceId:t.provinceId||"",regencyId:t.regencyId||"",districtId:t.districtId||"",villageId:t.villageId||"",addressDetail:t.addressDetail||"",phone:t.phone||"",emergencyContactName:t.emergencyContactName||"",emergencyContactPhone:t.emergencyContactPhone||"",emergencyContactRelationship:t.emergencyContactRelationship||""},[i,n]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),[g,x]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),y=(e=>{if(!e)return 0;let a=new Date,t=new Date(e),s=a.getFullYear()-t.getFullYear(),r=a.getMonth()-t.getMonth();return(r<0||0===r&&a.getDate()<t.getDate())&&s--,s})(l.dateOfBirth);(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>{l.provinceId?j(l.provinceId):(d([]),m([]),x([]))},[l.provinceId]),(0,r.useEffect)(()=>{l.regencyId?N(l.regencyId):(m([]),x([]))},[l.regencyId]),(0,r.useEffect)(()=>{l.districtId?k(l.districtId):x([])},[l.districtId]);let v=async()=>{try{p(!0);let e=await fetch("http://127.0.0.1:3001/api/regions/provinces");if(!e.ok)throw Error("Failed to load provinces");let a=await e.json();n(Array.isArray(a)?a:a.data||[])}catch(e){console.error("Error loading provinces:",e),n([])}finally{p(!1)}},j=async e=>{try{let a=await fetch(`http://127.0.0.1:3001/api/regions/provinces/${e}/regencies`);if(!a.ok)throw Error("Failed to load regencies");let t=await a.json();d(Array.isArray(t)?t:t.data||[])}catch(e){console.error("Error loading regencies:",e),d([])}},N=async e=>{try{let a=await fetch(`http://127.0.0.1:3001/api/regions/regencies/${e}/districts`);if(!a.ok)throw Error("Failed to load districts");let t=await a.json();m(Array.isArray(t)?t:t.data||[])}catch(e){console.error("Error loading districts:",e),m([])}},k=async e=>{try{let a=await fetch(`http://127.0.0.1:3001/api/regions/districts/${e}/villages`);if(!a.ok)throw Error("Failed to load villages");let t=await a.json();x(Array.isArray(t)?t:t.data||[])}catch(e){console.error("Error loading villages:",e),x([])}},w=e=>(f(null),!e||!!/^\d{16}$/.test(e)||(f("NIK harus 16 digit angka"),!1)),S=(e,t)=>{a("section2",{...l,[e]:t}),"provinceId"===e?a("section2",{...l,provinceId:t,regencyId:"",districtId:"",villageId:""}):"regencyId"===e?a("section2",{...l,regencyId:t,districtId:"",villageId:""}):"districtId"===e&&a("section2",{...l,districtId:t,villageId:""})};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Identitas Pasien"}),s.jsx("p",{className:"text-gray-600",children:"Lengkapi data identitas dan demografi pasien"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Identitas"}),s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Sistem Identifikasi Pasien Otomatis"}),s.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Untuk menjaga privasi pasien, sistem akan otomatis membuat:"}),(0,s.jsxs)("ul",{className:"mt-2 text-xs text-blue-600 list-disc list-inside space-y-1",children:[(0,s.jsxs)("li",{children:[s.jsx("strong",{children:"ID Anonim"})," (contoh: P-SBY-00001)"]}),(0,s.jsxs)("li",{children:[s.jsx("strong",{children:"No. RM INAMSOS"})," (contoh: SBY-2025-00001)"]})]}),s.jsx("p",{className:"mt-2 text-xs text-blue-600",children:"Tidak perlu input nama pasien dalam sistem."})]})]})}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"No. RM Rumah Sakit (Opsional)"}),s.jsx("input",{type:"text",value:l.hospitalRecordNumber,onChange:e=>S("hospitalRecordNumber",e.target.value),placeholder:"Contoh: RM-2025-001234",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nomor rekam medis dari rumah sakit (jika sudah ada)"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIK (Nomor Induk Kependudukan)"}),s.jsx("input",{type:"text",value:l.nik,onChange:e=>{S("nik",e.target.value),w(e.target.value)},onBlur:e=>w(e.target.value),maxLength:16,placeholder:"3201234567890123",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${b?"border-red-500":"border-gray-300"}`}),b&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:b}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"16 digit nomor identitas kependudukan (opsional, akan dienkripsi)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Lahir ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:l.dateOfBirth,onChange:e=>S("dateOfBirth",e.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),y>0&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["Usia: ",y," tahun"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Jenis Kelamin ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.gender,onChange:e=>S("gender",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),s.jsx("option",{value:"MALE",children:"Laki-laki"}),s.jsx("option",{value:"FEMALE",children:"Perempuan"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alamat"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Provinsi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.provinceId,onChange:e=>S("provinceId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Provinsi"}),i.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kabupaten/Kota ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.regencyId,onChange:e=>S("regencyId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!l.provinceId,required:!0,children:[s.jsx("option",{value:"",children:"Pilih Kabupaten/Kota"}),o.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kecamatan ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.districtId,onChange:e=>S("districtId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!l.regencyId,required:!0,children:[s.jsx("option",{value:"",children:"Pilih Kecamatan"}),u.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kelurahan/Desa ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.villageId,onChange:e=>S("villageId",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!l.districtId,required:!0,children:[s.jsx("option",{value:"",children:"Pilih Kelurahan/Desa"}),g.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detail Alamat (RT/RW, Nama Jalan, dll)"}),s.jsx("textarea",{value:l.addressDetail,onChange:e=>S("addressDetail",e.target.value),rows:3,placeholder:"Contoh: Jl. Merdeka No. 123, RT 001/RW 005",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Telepon"}),s.jsx("input",{type:"tel",value:l.phone,onChange:e=>S("phone",e.target.value),placeholder:"08123456789",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kontak Darurat"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Kontak Darurat"}),s.jsx("input",{type:"text",value:l.emergencyContactName,onChange:e=>S("emergencyContactName",e.target.value),placeholder:"Nama kerabat/keluarga",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hubungan"}),s.jsx("input",{type:"text",value:l.emergencyContactRelationship,onChange:e=>S("emergencyContactRelationship",e.target.value),placeholder:"Contoh: Istri, Anak, Saudara",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Telepon Kontak Darurat"}),s.jsx("input",{type:"tel",value:l.emergencyContactPhone,onChange:e=>S("emergencyContactPhone",e.target.value),placeholder:"08123456789",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})}let x=[{value:"ANTERIOR",label:"Anterior (Depan)"},{value:"POSTERIOR",label:"Posterior (Belakang)"},{value:"LATERAL_LEFT",label:"Lateral Kiri"},{value:"LATERAL_RIGHT",label:"Lateral Kanan"},{value:"OTHER",label:"Lainnya"}];function h({patientId:e,onPhotosChange:a,maxPhotos:t=10,maxFileSizeMB:l=10}){let[i,n]=(0,r.useState)([]),[o,d]=(0,r.useState)(""),c=(0,r.useRef)(null),u=e=>{URL.revokeObjectURL(i[e].preview);let t=i.filter((a,t)=>t!==e);n(t),a(t)},m=(e,t,s)=>{let r=[...i];r[e]={...r[e],[t]:s},n(r),a(r)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{onDrop:e=>{e.preventDefault();let a=Array.from(e.dataTransfer.files);if(c.current){let e=new DataTransfer;a.forEach(a=>e.items.add(a)),c.current.files=e.files,c.current.dispatchEvent(new Event("change",{bubbles:!0}))}},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50 hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer",onClick:()=>c.current?.click(),children:[s.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=Array.from(e.target.files||[]);if(d(""),i.length+s.length>t){d(`Maximum ${t} photos allowed`);return}let r=[];s.forEach(e=>{if(!e.type.startsWith("image/")){d(`File ${e.name} is not an image`);return}if(e.size/1048576>l){d(`File ${e.name} exceeds ${l}MB limit`);return}let a=URL.createObjectURL(e);r.push({file:e,preview:a,viewAngle:"ANTERIOR"})});let o=[...i,...r];n(o),a(o),c.current&&(c.current.value="")},className:"hidden"}),s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsx("p",{className:"mt-3 text-sm font-medium text-gray-900",children:"Klik atau seret foto untuk upload"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["PNG, JPG, JPEG up to ",l,"MB (Max ",t," photos)"]}),(0,s.jsxs)("p",{className:"text-xs text-blue-600 mt-2 font-medium",children:[i.length," / ",t," foto ter-upload"]})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-red-800",children:o})}),i.length>0&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((e,a)=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[(0,s.jsxs)("div",{className:"relative aspect-video mb-3 bg-gray-100 rounded overflow-hidden",children:[s.jsx("img",{src:e.preview,alt:`Clinical photo ${a+1}`,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>u(a),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",type:"button",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sudut Pandang"}),s.jsx("select",{value:e.viewAngle||"ANTERIOR",onChange:e=>m(a,"viewAngle",e.target.value),className:"w-full text-xs px-2 py-1.5 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:x.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deskripsi (Opsional)"}),s.jsx("textarea",{value:e.description||"",onChange:e=>m(a,"description",e.target.value),placeholder:"Contoh: Lesi terlihat jelas di area...",rows:2,className:"w-full text-xs px-2 py-1.5 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.file.name," (",(e.file.size/1024).toFixed(0)," KB)"]})]})]},a))}),0===i.length&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Panduan Foto Klinis"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"Minimal 3 foto dari sudut berbeda (anterior, lateral, posterior)"}),s.jsx("li",{children:"Pastikan pencahayaan baik dan fokus jelas"}),s.jsx("li",{children:"Sertakan penggaris atau referensi ukuran jika memungkinkan"}),s.jsx("li",{children:"Tutup identitas pasien yang tidak perlu (wajah, tato, dll)"}),(0,s.jsxs)("li",{children:["Format: JPG, PNG (max ",l,"MB per foto)"]})]})]})]})})]})}let p={100:"Normal; tidak ada keluhan atau tanda penyakit",90:"Aktivitas normal; tanda/gejala minimal",80:"Aktivitas normal dengan usaha; tanda/gejala penyakit",70:"Rawat diri sendiri; tidak mampu aktivitas normal",60:"Memerlukan bantuan kadang-kadang",50:"Memerlukan bantuan dan perawatan medis",40:"Cacat; memerlukan perawatan khusus",30:"Sangat cacat; diindikasikan rawat inap",20:"Sangat sakit; rawat inap dan supportif aktif",10:"Moribund; proses fatal berkembang cepat",0:"Meninggal"};function b(){var e,a;let{getSection:t,updateSection:l}=c(),i=t("section3")||{},n={karnofskyScore:i.karnofskyScore,painScale:i.painScale||0,height:i.height,weight:i.weight,bmi:i.bmi,chiefComplaint:i.chiefComplaint||"",durationOfSymptoms:i.durationOfSymptoms,comorbidities:i.comorbidities||"",cancerHistory:i.cancerHistory||"",familyCancerHistory:i.familyCancerHistory||"",swellingPresent:i.swellingPresent||!1,swellingSize:i.swellingSize||"",skinChanges:i.skinChanges||"",neurovascularStatus:i.neurovascularStatus||"",rangeOfMotion:i.rangeOfMotion||"",physicalExamGeneral:i.physicalExamGeneral||"",physicalExamHeadNeck:i.physicalExamHeadNeck||"",physicalExamThorax:i.physicalExamThorax||"",physicalExamAbdomen:i.physicalExamAbdomen||"",physicalExamExtremitiesSpine:i.physicalExamExtremitiesSpine||"",localTumorStatus:i.localTumorStatus||"",clinicalPhotos:i.clinicalPhotos||[]};(0,r.useEffect)(()=>{if(n.height&&n.weight){let e=n.height/100,a=n.weight/(e*e);a!==n.bmi&&l("section3",{...n,bmi:parseFloat(a.toFixed(2))})}},[n.height,n.weight]);let o=(e,a)=>{l("section3",{...n,[e]:a})},d=(e=n.bmi)?e<18.5?{label:"Underweight",color:"text-yellow-600"}:e<25?{label:"Normal",color:"text-green-600"}:e<30?{label:"Overweight",color:"text-orange-600"}:{label:"Obese",color:"text-red-600"}:{label:"",color:""};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Data Klinis & Presentasi"}),s.jsx("p",{className:"text-gray-600",children:"Penilaian kondisi klinis pasien saat pertama kali datang"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Penilaian Performa & Nyeri"}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Karnofsky Performance Score"}),(0,s.jsxs)("select",{value:n.karnofskyScore||"",onChange:e=>o("karnofskyScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih Skor Karnofsky"}),Object.entries(p).reverse().map(([e,a])=>(0,s.jsxs)("option",{value:e,children:[e," - ",a]},e))]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Skala 0-100 untuk menilai kemampuan fungsional pasien (0 = meninggal, 100 = normal)"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skala Nyeri (VAS 0-10)"}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:n.painScale||0,onChange:e=>o("painScale",parseInt(e.target.value)),className:"w-full h-3 bg-gradient-to-r from-green-200 via-yellow-200 to-red-500 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, #86efac 0%, #fde047 50%, #ef4444 100%)"}}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"0 (Tidak nyeri)"}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.painScale??0}),s.jsx("div",{className:"text-sm font-medium text-gray-600",children:null==(a=n.painScale)?"":0===a?"Tidak ada nyeri":a<=3?"Nyeri ringan":a<=6?"Nyeri sedang":a<=9?"Nyeri berat":"Nyeri sangat berat"})]}),s.jsx("span",{className:"text-sm text-gray-600",children:"10 (Sangat nyeri)"})]})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Visual Analog Scale (VAS): 0 = tidak ada nyeri, 10 = nyeri terburuk yang bisa dibayangkan"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durasi Gejala (bulan)"}),s.jsx("input",{type:"number",min:"0",step:"0.5",value:n.durationOfSymptoms||"",onChange:e=>o("durationOfSymptoms",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Contoh: 3 (untuk 3 bulan)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Berapa lama pasien mengalami gejala (dalam bulan)"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pengukuran Antropometri"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tinggi Badan (cm)"}),s.jsx("input",{type:"number",min:"0",step:"0.1",value:n.height||"",onChange:e=>o("height",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Contoh: 170",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Berat Badan (kg)"}),s.jsx("input",{type:"number",min:"0",step:"0.1",value:n.weight||"",onChange:e=>o("weight",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Contoh: 65",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.bmi&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Body Mass Index (BMI)"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Dihitung otomatis dari tinggi dan berat badan"})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-900",children:n.bmi.toFixed(1)}),s.jsx("div",{className:`text-sm font-medium ${d.color}`,children:d.label})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Riwayat Klinis"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Keluhan Utama ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:n.chiefComplaint||"",onChange:e=>o("chiefComplaint",e.target.value),rows:3,placeholder:"Contoh: Benjolan di paha kanan yang membesar sejak 6 bulan terakhir, disertai nyeri saat beraktivitas",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Keluhan utama yang membawa pasien datang ke rumah sakit"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Komorbiditas"}),s.jsx("textarea",{value:n.comorbidities||"",onChange:e=>o("comorbidities",e.target.value),rows:3,placeholder:"Contoh: Diabetes Melitus tipe 2, Hipertensi, Osteoarthritis",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Penyakit penyerta atau kondisi medis lain yang dimiliki pasien"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Riwayat Kanker Pribadi"}),s.jsx("textarea",{value:n.cancerHistory||"",onChange:e=>o("cancerHistory",e.target.value),rows:3,placeholder:"Contoh: Riwayat osteosarcoma femur kanan pada usia 25 tahun (2015), sudah dilakukan amputasi dan kemoterapi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Riwayat kanker yang pernah diderita pasien sebelumnya (jika ada)"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Riwayat Kanker Keluarga"}),s.jsx("textarea",{value:n.familyCancerHistory||"",onChange:e=>o("familyCancerHistory",e.target.value),rows:3,placeholder:"Contoh: Ayah - Ca Kolon (meninggal usia 60 tahun), Kakak - Leukemia (sembuh)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Riwayat kanker pada keluarga pasien (orang tua, saudara kandung, anak)"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pemeriksaan Fisik - Muskuloskeletal Spesifik"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pemeriksaan fisik yang spesifik untuk tumor muskuloskeletal"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("input",{type:"checkbox",checked:n.swellingPresent||!1,onChange:e=>o("swellingPresent",e.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Terdapat pembengkakan/massa"})]}),n.swellingPresent&&(0,s.jsxs)("div",{className:"ml-8",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ukuran Pembengkakan/Massa"}),s.jsx("input",{type:"text",value:n.swellingSize||"",onChange:e=>o("swellingSize",e.target.value),placeholder:"Contoh: 10 x 8 x 5 cm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perubahan Kulit"}),s.jsx("input",{type:"text",value:n.skinChanges||"",onChange:e=>o("skinChanges",e.target.value),placeholder:"Contoh: Eritema, ulserasi, peningkatan suhu lokal",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Neurovaskular"}),(0,s.jsxs)("select",{value:n.neurovascularStatus||"",onChange:e=>o("neurovascularStatus",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih Status"}),s.jsx("option",{value:"Normal",children:"Normal - Tidak ada defisit"}),s.jsx("option",{value:"Compromised",children:"Terganggu - Ada defisit neurologis/vaskular"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Penilaian fungsi saraf dan pembuluh darah di sekitar tumor"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rentang Gerak (Range of Motion)"}),s.jsx("input",{type:"text",value:n.rangeOfMotion||"",onChange:e=>o("rangeOfMotion",e.target.value),placeholder:"Contoh: Fleksi 90\xb0, Ekstensi penuh, Terbatas 50% pada abduksi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Penilaian rentang gerak sendi yang terkait dengan lokasi tumor"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pemeriksaan Fisik Terstruktur (INAMSOS)"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pemeriksaan fisik sistemik menurut standar INAMSOS"}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Generalisata"}),s.jsx("textarea",{value:n.physicalExamGeneral||"",onChange:e=>o("physicalExamGeneral",e.target.value),rows:3,placeholder:"Contoh: Keadaan umum baik, kesadaran compos mentis, gizi baik, tekanan darah 120/80 mmHg, nadi 80x/menit, nafas 20x/menit, suhu 36.5\xb0C",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Kondisi umum pasien, tanda-tanda vital, dan status gizi"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kepala & Leher"}),s.jsx("textarea",{value:n.physicalExamHeadNeck||"",onChange:e=>o("physicalExamHeadNeck",e.target.value),rows:2,placeholder:"Contoh: Konjungtiva anemis (-/-), sklera ikterik (-/-), tidak ada pembesaran KGB leher",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thoraks (Paru & Jantung)"}),s.jsx("textarea",{value:n.physicalExamThorax||"",onChange:e=>o("physicalExamThorax",e.target.value),rows:2,placeholder:"Contoh: Simetris, retraksi (-), suara napas vesikuler +/+, ronki -/-, wheezing -/-, bunyi jantung I-II reguler, murmur (-)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Abdomen"}),s.jsx("textarea",{value:n.physicalExamAbdomen||"",onChange:e=>o("physicalExamAbdomen",e.target.value),rows:2,placeholder:"Contoh: Datar, supel, bising usus (+) normal, nyeri tekan (-), hepatomegali (-), splenomegali (-)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ekstremitas & Tulang Belakang"}),s.jsx("textarea",{value:n.physicalExamExtremitiesSpine||"",onChange:e=>o("physicalExamExtremitiesSpine",e.target.value),rows:3,placeholder:"Contoh: Tidak ada deformitas tulang belakang, ekstremitas atas dalam batas normal, ekstremitas bawah kanan terdapat massa (lihat pemeriksaan lokal)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Pemeriksaan ekstremitas secara umum dan tulang belakang"})]})]}),s.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-6 space-y-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0 mt-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"Status Lokalisata (Pemeriksaan Lokal Tumor) - CRITICAL"}),s.jsx("p",{className:"text-sm text-yellow-800 mb-4",children:"Pemeriksaan fokus pada lokasi tumor - SANGAT PENTING untuk dokumentasi INAMSOS"}),s.jsx("label",{className:"block text-sm font-medium text-yellow-900 mb-2",children:"Deskripsi Pemeriksaan Lokal"}),s.jsx("textarea",{value:n.localTumorStatus||"",onChange:e=>o("localTumorStatus",e.target.value),rows:5,placeholder:"Contoh: Look: Massa di 1/3 distal femur kanan, ukuran \xb112x10x8 cm, batas tidak tegas, kulit di atasnya tampak eritema Feel: Massa teraba keras, tidak mobile, nyeri tekan (+), peningkatan suhu lokal (+), tidak ada fluktuasi Move: ROM lutut kanan terbatas 50%, nyeri saat fleksi, krepitasi (-) Neurovaskular: CRT <2 detik, pulsasi a. dorsalis pedis (+) kuat, sensibilitas utuh, motorik 5/5",className:"w-full px-4 py-3 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 bg-white"}),(0,s.jsxs)("p",{className:"mt-2 text-xs text-yellow-700",children:[s.jsx("strong",{children:"Format Look-Feel-Move:"})," Inspeksi (Look), Palpasi (Feel), Range of Motion (Move), Status Neurovaskular"]})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Foto Klinis (Opsional)"}),s.jsx(h,{patientId:void 0,onPhotosChange:e=>o("clinicalPhotos",e),maxPhotos:10,maxFileSizeMB:10})]}),n.chiefComplaint&&void 0!==n.karnofskyScore&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-green-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-green-900",children:"Data Klinis Minimum Lengkap"}),(0,s.jsxs)("div",{className:"mt-2 text-green-800 space-y-1",children:[(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"Karnofsky Score:"})," ",n.karnofskyScore]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"Pain Scale:"})," ",n.painScale??0,"/10"]}),n.bmi&&(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"BMI:"})," ",n.bmi.toFixed(1)," (",d.label,")"]}),n.clinicalPhotos&&n.clinicalPhotos.length>0&&(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"Foto Klinis:"})," ",n.clinicalPhotos.length," foto"]})]})]})]})})]})}let f={X_RAY:{label:"Conventional X-ray (Rontgen)",required:!0,bgColor:"bg-blue-50",borderColor:"border-blue-300",headerColor:"bg-blue-100",icon:"\uD83D\uDCF7",placeholder:"Contoh: Lesi litik di distal femur kanan dengan destruksi korteks anterior, soft tissue mass (+), periosteal reaction sunburst appearance, ukuran lesi 8x6 cm..."},MRI:{label:"MRI (Magnetic Resonance Imaging)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"\uD83E\uDDF2",placeholder:"Contoh: Massa intramedular di distal femur dengan ekstensi ekstraosseous, T1 hypointense, T2 hyperintense dengan enhancing septa, invasi ke neurovascular bundle (-), skip lesion (-), joint invasion (-)..."},CT_SCAN:{label:"CT Scan (Computed Tomography)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"\uD83D\uDD2C",placeholder:"Contoh: Massa jaringan lunak dengan komponen kalsifikasi mineralisasi matriks, ukuran 8x6x5 cm, melibatkan kompartemen anterior thigh, tidak tampak metastasis paru..."},BONE_SCAN:{label:"Bone Scan (Skintigrafi Tulang)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"",placeholder:"Contoh: Peningkatan uptake Tc-99m MDP di distal femur kanan, tidak tampak hot spot di tulang lain, tidak ada tanda metastasis tulang..."},PET_SCAN:{label:"PET Scan (Positron Emission Tomography)",required:!1,bgColor:"bg-white",borderColor:"border-gray-300",headerColor:"bg-gray-50",icon:"",placeholder:"Contoh: Peningkatan uptake FDG dengan SUVmax 8.5 di lesi primer distal femur kanan, tidak tampak lymph node involvement, tidak ada distant metastasis..."}};function y(){let{getSection:e,updateSection:a}=c(),t=e("section4"),l=t?.radiologyModalities||[{modality:"X_RAY",images:[]},{modality:"MRI",images:[]},{modality:"CT_SCAN",images:[]},{modality:"BONE_SCAN",images:[]},{modality:"PET_SCAN",images:[]}],[i,n]=(0,r.useState)(l),[o,d]=(0,r.useState)(new Set(["X_RAY"])),[u,m]=(0,r.useState)(null),g=(0,r.useCallback)(e=>{n(e),a("section4",{...t,radiologyModalities:e})},[t,a]),x=(e,a,t)=>{g(i.map(s=>s.modality===e?{...s,[a]:t}:s))},h=(e,a)=>{if(!a||0===a.length)return;let t=Array.from(a).map(e=>({fileName:e.name,fileSize:e.size,fileType:e.type,uploadDate:new Date().toISOString(),file:e})),s=i.find(a=>a.modality===e);s&&x(e,"images",[...s.images,...t])},p=(e,a)=>{let t=i.find(a=>a.modality===e);t&&x(e,"images",t.images.filter((e,t)=>t!==a))},b=(e,a)=>{e.preventDefault(),m(a)},y=e=>{e.preventDefault(),m(null)},v=(e,a)=>{e.preventDefault(),m(null),h(a,e.dataTransfer.files)},j=e=>{d(a=>{let t=new Set(a);return t.has(e)?t.delete(e):t.add(e),t})},N=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",k=e=>{let a=f[e],t=i.find(a=>a.modality===e),r=o.has(e),l=u===e;return t?(0,s.jsxs)("div",{className:`rounded-lg border-2 ${a.borderColor} ${a.bgColor} overflow-hidden transition-all`,children:[(0,s.jsxs)("div",{className:`${a.headerColor} px-6 py-4 flex items-center justify-between cursor-pointer`,onClick:()=>!a.required&&j(e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:a.icon}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[a.label,a.required&&s.jsx("span",{className:"ml-2 text-red-500 text-sm",children:"*WAJIB"})]}),t.images.length>0&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[t.images.length," file(s) uploaded",t.studyDate&&`  Study: ${new Date(t.studyDate).toLocaleDateString("id-ID")}`]})]})]}),!a.required&&s.jsx("button",{onClick:a=>{a.stopPropagation(),j(e)},className:"text-gray-500 hover:text-gray-700",children:s.jsx("svg",{className:`w-6 h-6 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(a.required||r)&&(0,s.jsxs)("div",{className:"px-6 py-5 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Pemeriksaan ",a.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:t.studyDate||"",onChange:a=>x(e,"studyDate",a.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:a.required})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Gambar ",a.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{onDragOver:a=>b(a,e),onDragLeave:y,onDrop:a=>v(a,e),className:`
                  border-2 border-dashed rounded-lg p-6 text-center
                  transition-all cursor-pointer
                  ${l?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-gray-50"}
                `,children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*,.dcm",onChange:a=>h(e,a.target.files),className:"hidden",id:`file-upload-${e}`}),(0,s.jsxs)("label",{htmlFor:`file-upload-${e}`,className:"cursor-pointer flex flex-col items-center",children:[s.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Klik untuk upload atau drag & drop file"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, DICOM (.dcm) - Max 10MB per file"})]})]}),t.images.length>0&&(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["File yang diupload (",t.images.length,"):"]}),t.images.map((a,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-3 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.fileName}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[N(a.fileSize),"  ",new Date(a.uploadDate).toLocaleString("id-ID")]})]})]}),s.jsx("button",{onClick:()=>p(e,t),className:"ml-3 px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:"Hapus file",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},t))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temuan dan Interpretasi ",a.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:t.findings||"",onChange:a=>x(e,"findings",a.target.value),rows:4,placeholder:a.placeholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y",required:a.required}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Jelaskan lokasi lesi, karakteristik (litik/blastik/mixed), ukuran, ekstensi jaringan lunak, invasi struktur sekitar, dan tanda metastasis"})]})]})]},e):null};return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Petunjuk Pemeriksaan Radiologi"}),(0,s.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,s.jsxs)("li",{children:[" ",s.jsx("strong",{children:"X-ray (Rontgen)"})," adalah pemeriksaan WAJIB dan harus diisi"]}),s.jsx("li",{children:" Upload gambar dalam format JPG, PNG, atau DICOM (.dcm)"}),s.jsx("li",{children:" Anda dapat mengupload beberapa gambar untuk setiap modalitas"}),s.jsx("li",{children:" Pemeriksaan lain (MRI, CT, Bone Scan, PET) bersifat opsional"}),s.jsx("li",{children:" Klik header section untuk membuka/tutup pemeriksaan opsional"})]})]})]})}),k("X_RAY"),k("MRI"),k("CT_SCAN"),k("BONE_SCAN"),k("PET_SCAN"),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Ringkasan Pemeriksaan"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-xs",children:Object.entries(f).map(([e,a])=>{let t=i.find(a=>a.modality===e),r=t&&(t.findings||t.images.length>0);return(0,s.jsxs)("div",{className:`px-3 py-2 rounded-lg border ${r?"bg-green-50 border-green-300 text-green-800":a.required?"bg-yellow-50 border-yellow-300 text-yellow-800":"bg-gray-100 border-gray-300 text-gray-600"}`,children:[(0,s.jsxs)("div",{className:"font-medium",children:[a.icon," ",a.label.split(" ")[0]]}),s.jsx("div",{className:"text-xs mt-1",children:r?" Lengkap":a.required?" Wajib":" Kosong"})]},e)})})]})]})}function v(){let{getSection:e,updateSection:a}=c(),t=e("section4")||{},[l,i]=(0,r.useState)(t.pathologyFiles||[]),[n,o]=(0,r.useState)(!1),d=(0,r.useCallback)(e=>{i(e),a("section4",{...t,pathologyFiles:e})},[t,a]),u=e=>{e&&0!==e.length&&d([...l,...Array.from(e).map(e=>({fileName:e.name,fileSize:e.size,fileType:e.type,uploadDate:new Date().toISOString(),file:e}))])},m=e=>{d(l.filter((a,t)=>t!==e))},g=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB";return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Hasil Patologi (Pathology Reports)"}),(0,s.jsxs)("div",{onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:e=>{e.preventDefault(),o(!1)},onDrop:e=>{e.preventDefault(),o(!1),u(e.dataTransfer.files)},className:`
          border-2 border-dashed rounded-lg p-6 text-center
          transition-all cursor-pointer
          ${n?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400 hover:bg-gray-50"}
        `,children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,image/*,.dcm",onChange:e=>u(e.target.files),className:"hidden",id:"pathology-file-upload"}),(0,s.jsxs)("label",{htmlFor:"pathology-file-upload",className:"cursor-pointer flex flex-col items-center",children:[s.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Klik untuk upload atau drag & drop file laporan"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG, DICOM - Max 10MB per file"})]})]}),l.length>0&&(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["File yang diupload (",l.length,"):"]}),l.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-3 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("svg",{className:"w-5 h-5 text-purple-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.fileName}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[g(e.fileSize),"  ",new Date(e.uploadDate).toLocaleString("id-ID")]})]})]}),s.jsx("button",{onClick:()=>m(a),className:"ml-3 px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:"Hapus file",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},a))]})]})}let j={GRADE_I:"Grade I - Sedikit/tidak ada nekrosis (<50%)",GRADE_II:"Grade II - Nekrosis 50-90%",GRADE_III:"Grade III - Nekrosis 90-99%",GRADE_IV:"Grade IV - Nekrosis 100% (no viable tumor)"};function N(){let{getSection:e,updateSection:a}=c(),t=e("section4")||{},l={laboratory:t.laboratory||{},radiology:t.radiology||{},mirrelScore:t.mirrelScore||{},pathology:t.pathology||{},radiologyModalities:t.radiologyModalities||[],pathologyFiles:t.pathologyFiles||[]};(0,r.useEffect)(()=>{let{siteScore:e,painScore:t,lesionType:s,sizeScore:r}=l.mirrelScore||{};if(e&&t&&s&&r){let i=e+t+("BLASTIC"===s?1:"MIXED"===s?2:3)+r,n="LOW";i>=11?n="HIGH":i>=8&&(n="MODERATE"),a("section4",{...l,mirrelScore:{...l.mirrelScore,totalScore:i,fractureRisk:n}})}},[l.mirrelScore?.siteScore,l.mirrelScore?.painScore,l.mirrelScore?.lesionType,l.mirrelScore?.sizeScore]);let i=(e,t)=>{a("section4",{...l,laboratory:{...l.laboratory,[e]:t}})},n=(e,t)=>{a("section4",{...l,mirrelScore:{...l.mirrelScore,[e]:t}})},o=(e,t)=>{a("section4",{...l,pathology:{...l.pathology,[e]:t}})},d=e=>{o("ihkMarkers",(l.pathology?.ihkMarkers||[]).filter((a,t)=>t!==e))},u=(e,a,t)=>{let s=[...l.pathology?.ihkMarkers||[]];s[e]={...s[e],[a]:t},o("ihkMarkers",s)},m=e=>"HIGH"===e?"bg-red-100 border-red-300 text-red-900":"MODERATE"===e?"bg-yellow-100 border-yellow-300 text-yellow-900":"LOW"===e?"bg-green-100 border-green-300 text-green-900":"bg-gray-100 border-gray-300 text-gray-900";return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pemeriksaan Penunjang Diagnostik"}),s.jsx("p",{className:"text-gray-600",children:"Hasil laboratorium, radiologi, dan pemeriksaan patologi"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hasil Laboratorium"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hemoglobin (g/dL)"}),s.jsx("input",{type:"number",step:"0.1",value:l.laboratory?.hemoglobin||"",onChange:e=>i("hemoglobin",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 12-16 (F), 13-17 (M)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leukosit (x10/L)"}),s.jsx("input",{type:"number",step:"0.1",value:l.laboratory?.leukocytes||"",onChange:e=>i("leukocytes",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 4-10",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trombosit (x10/L)"}),s.jsx("input",{type:"number",step:"1",value:l.laboratory?.platelets||"",onChange:e=>i("platelets",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 150-400",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alkaline Phosphatase (U/L)",s.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"Penanda tumor tulang"})]}),s.jsx("input",{type:"number",step:"1",value:l.laboratory?.alkalinePhosphatase||"",onChange:e=>i("alkalinePhosphatase",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 30-120",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["LDH (U/L)",s.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"Penanda tumor"})]}),s.jsx("input",{type:"number",step:"1",value:l.laboratory?.ldh||"",onChange:e=>i("ldh",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 140-280",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kalsium (mg/dL)"}),s.jsx("input",{type:"number",step:"0.1",value:l.laboratory?.calcium||"",onChange:e=>i("calcium",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Normal: 8.5-10.5",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsx(y,{}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Mirrel Score Calculator"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Penilaian risiko fraktur patologis (Pathological Fracture Risk)"})]}),l.mirrelScore?.totalScore&&s.jsx("div",{className:`px-4 py-2 rounded-lg border-2 ${m(l.mirrelScore.fractureRisk)}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:l.mirrelScore.totalScore}),(0,s.jsxs)("div",{className:"text-xs font-medium",children:[l.mirrelScore.fractureRisk," RISK"]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi (Site) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.mirrelScore?.siteScore||"",onChange:e=>n("siteScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Lokasi"}),s.jsx("option",{value:"1",children:"1 - Upper Limb (Ekstremitas Atas)"}),s.jsx("option",{value:"2",children:"2 - Lower Limb (Ekstremitas Bawah)"}),s.jsx("option",{value:"3",children:"3 - Peritrochanteric (Trokanter)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nyeri (Pain) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.mirrelScore?.painScore||"",onChange:e=>n("painScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Tingkat Nyeri"}),s.jsx("option",{value:"1",children:"1 - Mild (Ringan)"}),s.jsx("option",{value:"2",children:"2 - Moderate (Sedang)"}),s.jsx("option",{value:"3",children:"3 - Functional (Nyeri fungsional)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipe Lesi (Lesion Type) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.mirrelScore?.lesionType||"",onChange:e=>n("lesionType",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Tipe Lesi"}),s.jsx("option",{value:"BLASTIC",children:"Blastic (1 point)"}),s.jsx("option",{value:"MIXED",children:"Mixed (2 points)"}),s.jsx("option",{value:"LYTIC",children:"Lytic (3 points)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ukuran (Size) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.mirrelScore?.sizeScore||"",onChange:e=>n("sizeScore",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Ukuran Lesi"}),(0,s.jsxs)("option",{value:"1",children:["1 - ","<","1/3 diameter tulang"]}),s.jsx("option",{value:"2",children:"2 - 1/3 - 2/3 diameter tulang"}),(0,s.jsxs)("option",{value:"3",children:["3 - ",">","2/3 diameter tulang"]})]})]})]}),l.mirrelScore?.totalScore&&s.jsx("div",{className:`mt-4 p-4 rounded-lg border-2 ${m(l.mirrelScore.fractureRisk)}`,children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium",children:"Interpretasi Mirrel Score:"}),(0,s.jsxs)("p",{className:"mt-1",children:["Total Skor: ",s.jsx("span",{className:"font-bold",children:l.mirrelScore.totalScore})," / 12"]}),(0,s.jsxs)("p",{className:"mt-1",children:["Risiko Fraktur: ",s.jsx("span",{className:"font-bold",children:l.mirrelScore.fractureRisk})]}),(0,s.jsxs)("p",{className:"mt-2 text-xs",children:["LOW"===l.mirrelScore.fractureRisk&&"Risiko rendah fraktur patologis. Observasi rutin.","MODERATE"===l.mirrelScore.fractureRisk&&"Risiko sedang fraktur patologis. Pertimbangkan profilaksis.","HIGH"===l.mirrelScore.fractureRisk&&"Risiko tinggi fraktur patologis. Intervensi profilaksis direkomendasikan."]})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hasil Patologi"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Biopsi"}),(0,s.jsxs)("select",{value:l.pathology?.biopsyType||"",onChange:e=>o("biopsyType",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih Jenis Biopsi"}),s.jsx("option",{value:"Core needle",children:"Core Needle Biopsy"}),s.jsx("option",{value:"Incisional",children:"Incisional Biopsy"}),s.jsx("option",{value:"Excisional",children:"Excisional Biopsy"}),s.jsx("option",{value:"Open",children:"Open Biopsy"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Biopsi"}),s.jsx("input",{type:"date",value:l.pathology?.biopsyDate||"",onChange:e=>o("biopsyDate",e.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temuan Patologi Anatomi"}),s.jsx("textarea",{value:l.pathology?.pathologyFindings||"",onChange:e=>o("pathologyFindings",e.target.value),rows:4,placeholder:"Contoh: Tampak jaringan nekrosis luas (90%), sel tumor viabel minimal, respon baik terhadap kemoterapi...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HUVOS Grade (Respon Kemoterapi)"}),(0,s.jsxs)("select",{value:l.pathology?.huvosGrade||"",onChange:e=>o("huvosGrade",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih HUVOS Grade"}),Object.entries(j).map(([e,a])=>s.jsx("option",{value:e,children:a},e))]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Grading respons terhadap kemoterapi berdasarkan persentase nekrosis tumor"})]}),l.pathology?.huvosGrade&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Persentase Nekrosis Tumor (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:l.pathology?.necrosisPercentage||"",onChange:e=>o("necrosisPercentage",e.target.value?parseInt(e.target.value):void 0),placeholder:"Contoh: 95",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Immunohistochemistry (IHK) Markers"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Penanda imunogenetik untuk identifikasi tumor (ER, PR, HER2, S100, CD34, dll)"})]}),s.jsx("button",{onClick:()=>{o("ihkMarkers",[...l.pathology?.ihkMarkers||[],{marker:"",result:""}])},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"+ Tambah Marker"})]}),l.pathology?.ihkMarkers&&l.pathology.ihkMarkers.length>0?s.jsx("div",{className:"space-y-3",children:l.pathology.ihkMarkers.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Penanda"}),s.jsx("input",{type:"text",value:e.marker,onChange:e=>u(a,"marker",e.target.value),placeholder:"Contoh: S100, ER, PR, HER2, CD34",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Hasil"}),s.jsx("input",{type:"text",value:e.result,onChange:e=>u(a,"result",e.target.value),placeholder:"Contoh: Positive, Negative, Score 3+",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),s.jsx("button",{onClick:()=>d(a),className:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},a))}):s.jsx("p",{className:"text-sm text-gray-500 italic py-3",children:'Tidak ada marker IHK yang ditambahkan. Klik tombol "Tambah Marker" untuk menambah penanda immunohistokimia.'})]}),s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsx(v,{})})]})]})}var k=t(3267),w=t.n(k);w()(async()=>{},{loadableGenerated:{modules:["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\components\\patients\\wizard\\sections\\Section5DiagnosisLocation.tsx -> ../../../classifications/WhoClassificationTree"]},ssr:!1,loading:()=>s.jsx("div",{className:"animate-pulse bg-gray-100 h-64 rounded-lg"})});let S=w()(async()=>{},{loadableGenerated:{modules:["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\components\\patients\\wizard\\sections\\Section5DiagnosisLocation.tsx -> ../../../classifications/BoneTumorTree"]},ssr:!1}),C=w()(async()=>{},{loadableGenerated:{modules:["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\components\\patients\\wizard\\sections\\Section5DiagnosisLocation.tsx -> ../../../classifications/SoftTissueTumorTree"]},ssr:!1});function I(){let{getSection:e,updateSection:a}=c(),t=e("section1"),l=e("section5")||{},i={whoClassificationId:l.whoClassificationId||"",whoClassificationCode:l.whoClassificationCode||"",whoClassificationName:l.whoClassificationName||"",boneLocationId:l.boneLocationId||"",boneLocationName:l.boneLocationName||"",softTissueLocationId:l.softTissueLocationId||"",softTissueLocationName:l.softTissueLocationName||"",tumorSide:l.tumorSide||"",specificAnatomicalSite:l.specificAnatomicalSite||""},[n,o]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),x=t?.pathologyTypeName||"",h=t?.pathologyType||"",p=h.includes("bone")||x.includes("Tulang"),b=h.includes("soft")||x.includes("Jaringan Lunak");(0,r.useEffect)(()=>{p?f():b&&y()},[p,b]);let f=async()=>{try{g(!0);let e=await fetch("http://127.0.0.1:3001/api/locations/bone");if(!e.ok)throw Error("Failed to load bone locations");let a=await e.json();o(Array.isArray(a)?a:a.data||[])}catch(e){console.error("Error loading bone locations:",e),o([])}finally{g(!1)}},y=async()=>{try{g(!0);let e=await fetch("http://127.0.0.1:3001/api/locations/soft-tissue");if(!e.ok)throw Error("Failed to load soft tissue locations");let a=await e.json();u(Array.isArray(a)?a:a.data||[])}catch(e){console.error("Error loading soft tissue locations:",e),u([])}finally{g(!1)}},v=e=>{a("section5",{...i,whoClassificationId:e.id,whoClassificationCode:e.code,whoClassificationName:e.name})},j=(e,t)=>{a("section5",{...i,[e]:t})};return t?.pathologyType?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Diagnosis & Lokasi Tumor"}),s.jsx("p",{className:"text-gray-600",children:"Pilih klasifikasi WHO dan lokasi anatomis tumor muskuloskeletal"}),(0,s.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Jenis Patologi: ",x]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Klasifikasi Tumor WHO (5th Edition)",s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)(r.Suspense,{fallback:s.jsx("div",{className:"animate-pulse bg-gray-100 h-64 rounded-lg"}),children:[p&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pilih dari 57 klasifikasi tumor tulang WHO (5th Edition, 2020)"}),s.jsx(S,{selectedId:i.whoClassificationId,onSelect:v,searchable:!0,showCodes:!0})]}),b&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pilih dari 68 klasifikasi tumor jaringan lunak WHO (5th Edition, 2020)"}),s.jsx(C,{selectedId:i.whoClassificationId,onSelect:v,searchable:!0,showCodes:!0})]}),!p&&!b&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["Klasifikasi untuk jenis patologi ",x," akan ditampilkan di sini."]})})]}),i.whoClassificationId&&s.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Klasifikasi Dipilih:"}),(0,s.jsxs)("p",{className:"text-sm text-green-900 font-semibold mt-1",children:[i.whoClassificationCode," - ",i.whoClassificationName]})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Lokasi Anatomis",s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),p&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi Tulang ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:i.boneLocationId||"",onChange:e=>{let t=e.target.value,s=n.find(e=>e.id===t);a("section5",{...i,boneLocationId:t,boneLocationName:s?.name})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Lokasi Tulang"}),n.filter(e=>1===e.level).map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Pilih lokasi tulang utama. Anda dapat menambahkan detail spesifik di bawah."})]}),b&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi Jaringan Lunak ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:i.softTissueLocationId||"",onChange:e=>{let t=e.target.value,s=d.find(e=>e.id===t);a("section5",{...i,softTissueLocationId:t,softTissueLocationName:s?.name})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Pilih Lokasi Jaringan Lunak"}),d.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name,e.anatomicalRegion&&` (${e.anatomicalRegion})`]},e.id))]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Pilih lokasi jaringan lunak berdasarkan region anatomis."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sisi/Lateralitas Tumor ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"LEFT",label:"Kiri",icon:""},{value:"RIGHT",label:"Kanan",icon:""},{value:"BILATERAL",label:"Bilateral",icon:""},{value:"MIDLINE",label:"Midline",icon:""}].map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>j("tumorSide",e.value),className:`
                  px-4 py-3 rounded-lg border-2 text-center transition-all
                  ${i.tumorSide===e.value?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 bg-white text-gray-700 hover:border-blue-300"}
                `,children:[s.jsx("div",{className:"text-2xl mb-1",children:e.icon}),s.jsx("div",{className:"text-sm font-medium",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detail Spesifik Lokasi Anatomis"}),s.jsx("textarea",{value:i.specificAnatomicalSite||"",onChange:e=>j("specificAnatomicalSite",e.target.value),rows:3,placeholder:"Contoh: Distal femur, 5 cm dari sendi lutut, melibatkan korteks anterior",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Berikan deskripsi detail lokasi tumor untuk dokumentasi klinis yang lengkap."})]})]}),i.whoClassificationId&&(i.boneLocationId||i.softTissueLocationId)&&i.tumorSide&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-blue-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-blue-900",children:"Diagnosis & Lokasi Lengkap"}),(0,s.jsxs)("div",{className:"mt-2 text-blue-800 space-y-1",children:[(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"WHO:"})," ",i.whoClassificationCode," -"," ",i.whoClassificationName]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"Lokasi:"})," ",i.boneLocationName||i.softTissueLocationName," (",i.tumorSide,")"]})]})]})]})})]}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-yellow-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-yellow-800 font-medium",children:"Jenis Patologi Belum Dipilih"}),s.jsx("p",{className:"text-yellow-700 mt-1",children:"Silakan kembali ke Bagian 1 untuk memilih jenis patologi terlebih dahulu."})]})]})})}let T={IA:"Stage IA - Low grade, Intracompartmental, No metastasis",IB:"Stage IB - Low grade, Extracompartmental, No metastasis",IIA:"Stage IIA - High grade, Intracompartmental, No metastasis",IIB:"Stage IIB - High grade, Extracompartmental, No metastasis",III:"Stage III - Any grade, Any site, Regional or distant metastasis"};function A(){let{getSection:e,updateSection:a}=c(),t=e("section6")||{},l={stagingSystem:t.stagingSystem||"BOTH",enneking:t.enneking||{},ajcc:t.ajcc||{},stagingDate:t.stagingDate||"",stagingNotes:t.stagingNotes||""};(0,r.useEffect)(()=>{let{grade:e,site:t,metastasis:s}=l.enneking||{};if(e&&t&&s){let r,i;if("YES"===s)r="III",i=T.III;else if("LOW"===e&&"INTRACOMPARTMENTAL"===t)r="IA",i=T.IA;else if("LOW"===e&&"EXTRACOMPARTMENTAL"===t)r="IB",i=T.IB;else if("HIGH"===e&&"INTRACOMPARTMENTAL"===t)r="IIA",i=T.IIA;else{if("HIGH"!==e||"EXTRACOMPARTMENTAL"!==t)return;r="IIB",i=T.IIB}l.enneking?.stage!==r&&a("section6",{...l,enneking:{...l.enneking,grade:e,site:t,metastasis:s,stage:r,description:i}})}},[l.enneking?.grade,l.enneking?.site,l.enneking?.metastasis]);let i=(e,t)=>{a("section6",{...l,enneking:{...l.enneking,[e]:t}})},n=(e,t)=>{a("section6",{...l,ajcc:{...l.ajcc,[e]:t}})},o=(e,t)=>{a("section6",{...l,[e]:t})},d="ENNEKING"===l.stagingSystem||"BOTH"===l.stagingSystem,u="AJCC"===l.stagingSystem||"BOTH"===l.stagingSystem;return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Stadium Tumor (Tumor Staging)"}),s.jsx("p",{className:"text-gray-600",children:"Tentukan stadium tumor menggunakan sistem Enneking dan/atau AJCC"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Sistem Stadium ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"ENNEKING",label:"Enneking",description:"Khusus tumor muskuloskeletal"},{value:"AJCC",label:"AJCC TNM",description:"Sistem TNM standar"},{value:"BOTH",label:"Keduanya",description:"Enneking + AJCC"}].map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>o("stagingSystem",e.value),className:`
                p-4 rounded-lg border-2 text-left transition-all
                ${l.stagingSystem===e.value?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}
              `,children:[s.jsx("div",{className:`font-semibold mb-1 ${l.stagingSystem===e.value?"text-blue-900":"text-gray-900"}`,children:e.label}),s.jsx("div",{className:`text-sm ${l.stagingSystem===e.value?"text-blue-700":"text-gray-600"}`,children:e.description})]},e.value))})]}),d&&(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-white rounded-lg border-2 border-purple-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-purple-900 mb-4 flex items-center",children:[s.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Enneking Staging System"]}),s.jsx("p",{className:"text-sm text-purple-700 mb-6",children:"Sistem stadium khusus untuk tumor muskuloskeletal berdasarkan grade, kompartemen, dan metastasis"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Grade (Derajat Keganasan) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>i("grade","LOW"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${l.enneking?.grade==="LOW"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400"}
                  `,children:[s.jsx("div",{className:"font-semibold",children:"G1 - Low Grade"}),s.jsx("div",{className:"text-sm mt-1 opacity-80",children:"Derajat rendah / jinak"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>i("grade","HIGH"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${l.enneking?.grade==="HIGH"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400"}
                  `,children:[s.jsx("div",{className:"font-semibold",children:"G2 - High Grade"}),s.jsx("div",{className:"text-sm mt-1 opacity-80",children:"Derajat tinggi / ganas"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Lokasi (Kompartemen) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>i("site","INTRACOMPARTMENTAL"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${l.enneking?.site==="INTRACOMPARTMENTAL"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400"}
                  `,children:[s.jsx("div",{className:"font-semibold",children:"T1 - Intracompartmental"}),s.jsx("div",{className:"text-sm mt-1 opacity-80",children:"Terbatas dalam satu kompartemen"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>i("site","EXTRACOMPARTMENTAL"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${l.enneking?.site==="EXTRACOMPARTMENTAL"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400"}
                  `,children:[s.jsx("div",{className:"font-semibold",children:"T2 - Extracompartmental"}),s.jsx("div",{className:"text-sm mt-1 opacity-80",children:"Meluas ke luar kompartemen"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Metastasis ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>i("metastasis","NO"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${l.enneking?.metastasis==="NO"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400"}
                  `,children:[s.jsx("div",{className:"font-semibold",children:"M0 - Tidak ada"}),s.jsx("div",{className:"text-sm mt-1 opacity-80",children:"Tidak ada metastasis"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>i("metastasis","YES"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${l.enneking?.metastasis==="YES"?"border-purple-600 bg-purple-100 text-purple-900":"border-gray-300 bg-white hover:border-purple-400"}
                  `,children:[s.jsx("div",{className:"font-semibold",children:"M1 - Ada"}),s.jsx("div",{className:"text-sm mt-1 opacity-80",children:"Regional atau distant metastasis"})]})]})]}),l.enneking?.stage&&s.jsx("div",{className:"mt-6 p-6 bg-gradient-to-r from-purple-600 to-purple-700 rounded-lg text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm opacity-90 mb-1",children:"Stadium Enneking"}),s.jsx("div",{className:"text-3xl font-bold",children:l.enneking.stage})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-sm opacity-90",children:l.enneking.description})})]})})]})]}),u&&(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-lg border-2 border-blue-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-blue-900 mb-4 flex items-center",children:[s.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"AJCC TNM Staging System"]}),s.jsx("p",{className:"text-sm text-blue-700 mb-6",children:"Sistem stadium TNM dari American Joint Committee on Cancer"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"AJCC Edition"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("button",{type:"button",onClick:()=>n("ajccEdition","8th"),className:`
                    p-3 rounded-lg border-2 transition-all
                    ${l.ajcc?.ajccEdition==="8th"?"border-blue-600 bg-blue-100 text-blue-900":"border-gray-300 bg-white hover:border-blue-400"}
                  `,children:"8th Edition (2017)"}),s.jsx("button",{type:"button",onClick:()=>n("ajccEdition","7th"),className:`
                    p-3 rounded-lg border-2 transition-all
                    ${l.ajcc?.ajccEdition==="7th"?"border-blue-600 bg-blue-100 text-blue-900":"border-gray-300 bg-white hover:border-blue-400"}
                  `,children:"7th Edition (2010)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["T - Primary Tumor (Tumor Primer) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.ajcc?.t||"",onChange:e=>n("t",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih klasifikasi T"}),s.jsx("option",{value:"TX",children:"TX - Tumor primer tidak dapat dinilai"}),s.jsx("option",{value:"T0",children:"T0 - Tidak ada bukti tumor primer"}),s.jsx("option",{value:"T1",children:"T1 - Tumor  5 cm"}),s.jsx("option",{value:"T2",children:"T2 - Tumor > 5 cm tapi  10 cm"}),s.jsx("option",{value:"T3",children:"T3 - Tumor > 10 cm tapi  15 cm"}),s.jsx("option",{value:"T4",children:"T4 - Tumor > 15 cm"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["N - Regional Lymph Nodes (Kelenjar Getah Bening Regional) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.ajcc?.n||"",onChange:e=>n("n",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih klasifikasi N"}),s.jsx("option",{value:"NX",children:"NX - Kelenjar getah bening regional tidak dapat dinilai"}),s.jsx("option",{value:"N0",children:"N0 - Tidak ada metastasis kelenjar getah bening regional"}),s.jsx("option",{value:"N1",children:"N1 - Metastasis kelenjar getah bening regional"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["M - Distant Metastasis (Metastasis Jauh) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.ajcc?.m||"",onChange:e=>n("m",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih klasifikasi M"}),s.jsx("option",{value:"M0",children:"M0 - Tidak ada metastasis jauh"}),s.jsx("option",{value:"M1",children:"M1 - Metastasis jauh"}),s.jsx("option",{value:"M1a",children:"M1a - Metastasis paru"}),s.jsx("option",{value:"M1b",children:"M1b - Metastasis lokasi lain"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["G - Histologic Grade (Grade Histologi) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.ajcc?.grade||"",onChange:e=>n("grade",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih grade histologi"}),s.jsx("option",{value:"GX",children:"GX - Grade tidak dapat ditentukan"}),s.jsx("option",{value:"G1",children:"G1 - Well differentiated (diferensiasi baik)"}),s.jsx("option",{value:"G2",children:"G2 - Moderately differentiated (diferensiasi sedang)"}),s.jsx("option",{value:"G3",children:"G3 - Poorly differentiated (diferensiasi buruk)"}),s.jsx("option",{value:"G4",children:"G4 - Undifferentiated (tidak terdiferensiasi)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Overall Stage (Stadium Keseluruhan) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:l.ajcc?.stage||"",onChange:e=>n("stage",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Pilih stadium keseluruhan"}),s.jsx("option",{value:"I",children:"Stage I"}),s.jsx("option",{value:"IA",children:"Stage IA"}),s.jsx("option",{value:"IB",children:"Stage IB"}),s.jsx("option",{value:"II",children:"Stage II"}),s.jsx("option",{value:"IIA",children:"Stage IIA"}),s.jsx("option",{value:"IIB",children:"Stage IIB"}),s.jsx("option",{value:"III",children:"Stage III"}),s.jsx("option",{value:"IIIA",children:"Stage IIIA"}),s.jsx("option",{value:"IIIB",children:"Stage IIIB"}),s.jsx("option",{value:"IV",children:"Stage IV"}),s.jsx("option",{value:"IVA",children:"Stage IVA"}),s.jsx("option",{value:"IVB",children:"Stage IVB"})]})]}),l.ajcc?.t&&l.ajcc?.n&&l.ajcc?.m&&(0,s.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg text-white",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm opacity-90 mb-1",children:"TNM Classification"}),(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[l.ajcc.t,l.ajcc.n,l.ajcc.m]})]}),l.ajcc.stage&&(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm opacity-90 mb-1",children:"Overall Stage"}),s.jsx("div",{className:"text-2xl font-bold",children:l.ajcc.stage})]})]}),l.ajcc.grade&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-blue-500",children:[s.jsx("span",{className:"text-sm opacity-90",children:"Grade: "}),s.jsx("span",{className:"font-semibold",children:l.ajcc.grade})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Tambahan"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Staging"}),s.jsx("input",{type:"date",value:l.stagingDate||"",onChange:e=>o("stagingDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan Staging"}),s.jsx("textarea",{value:l.stagingNotes||"",onChange:e=>o("stagingNotes",e.target.value),rows:4,placeholder:"Catatan tambahan mengenai staging, misalnya alasan pemilihan sistem tertentu, temuan klinis yang mempengaruhi staging, dll.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(d&&l.enneking?.stage||u&&l.ajcc?.stage)&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-6 w-6 text-green-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-sm text-green-800",children:[s.jsx("span",{className:"font-medium",children:"Staging lengkap."})," Anda dapat melanjutkan ke bagian selanjutnya."]})]})})]})}function D(){let{getSection:e,updateSection:a}=c(),t=e("section7")||{},r={cpcDate:t.cpcDate||"",consultantsPresent:t.consultantsPresent||"",decision:t.decision||""},l=(e,t)=>{a("section7",{...r,[e]:t})};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"CPC (Clinico-Pathological Conference)"}),s.jsx("p",{className:"text-gray-600",children:"Dokumentasi konferensi klinis-patologis untuk kasus ini"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal"}),s.jsx("input",{type:"date",value:r.cpcDate||"",onChange:e=>l("cpcDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Tanggal pelaksanaan CPC"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Konsultan Hadir"}),s.jsx("textarea",{value:r.consultantsPresent||"",onChange:e=>l("consultantsPresent",e.target.value),rows:4,placeholder:"Contoh: 1. Dr. Ahmad Sutanto, Sp.OT(K)Onk - Konsultan Ortopedi Onkologi 2. Dr. Siti Rahayu, Sp.PA - Konsultan Patologi Anatomi 3. Dr. Budi Santoso, Sp.Rad(K)Onk - Konsultan Radiologi Onkologi",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Daftar nama konsultan yang hadir dalam CPC"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keputusan"}),s.jsx("textarea",{value:r.decision||"",onChange:e=>l("decision",e.target.value),rows:6,placeholder:"Contoh: Keputusan CPC: 1. Diagnosis: Osteosarcoma femur distal kanan stadium IIB 2. Rencana terapi: - Kemoterapi neo-adjuvant (protokol MAP) 3 siklus - Wide excision dengan limb salvage reconstruction - Kemoterapi adjuvant 3 siklus 3. Follow-up: Evaluasi setiap 3 bulan tahun pertama",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Keputusan dan rekomendasi dari CPC"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Catatan:"}),s.jsx("p",{children:"CPC adalah forum multidisiplin untuk mendiskusikan diagnosis dan rencana terapi kasus tumor muskuloskeletal. Keputusan CPC menjadi acuan utama dalam penatalaksanaan pasien."})]})]})})]})}let P=["Infeksi superfisial","Infeksi dalam","Wound dehiscence","Hematoma","Nerve injury","Vascular injury","Prosthesis failure","Nonunion / malunion","Kontraktur sendi","Heterotopic ossification"];function E(){let{getSection:e,updateSection:a}=c(),t=e("section8")||{},[l,i]=(0,r.useState)("SURGERY"===t.primaryTreatment||"MULTIMODAL"===t.primaryTreatment),[n,o]=(0,r.useState)(t.chemotherapy?.received||!1),[d,u]=(0,r.useState)(t.radiation?.received||!1),m=(e,s)=>{a("section8",{...t,[e]:s})},g=(e,a)=>{m("surgery",{...t.surgery,[e]:a})},x=(e,a)=>{m("chemotherapy",{...t.chemotherapy,[e]:a})},h=(e,a)=>{m("radiation",{...t.radiation,[e]:a})},p=e=>{let a=t.surgery?.complications||[];g("complications",a.includes(e)?a.filter(a=>a!==e):[...a,e])};return(0,r.useEffect)(()=>{i("SURGERY"===t.primaryTreatment||"MULTIMODAL"===t.primaryTreatment)},[t.primaryTreatment]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manajemen Pengobatan (Treatment Management)"}),s.jsx("p",{className:"text-gray-600",children:"Dokumentasi lengkap pengobatan termasuk bedah (LIMB SALVAGE), kemoterapi, radiasi, dan modalitas lainnya"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-white rounded-lg border-2 border-purple-200 p-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Tujuan Pengobatan (Treatment Intention) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>m("treatmentIntention","CURATIVE"),className:`
              p-4 rounded-lg border-2 text-center transition-all
              ${"CURATIVE"===t.treatmentIntention?"border-green-600 bg-green-50 text-green-900":"border-gray-200 bg-white hover:border-green-400"}
            `,children:[s.jsx("div",{className:"text-3xl mb-2",children:"\uD83C\uDFAF"}),s.jsx("div",{className:"font-bold",children:"CURATIVE"}),s.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Tujuan menyembuhkan"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>m("treatmentIntention","PALLIATIVE"),className:`
              p-4 rounded-lg border-2 text-center transition-all
              ${"PALLIATIVE"===t.treatmentIntention?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 bg-white hover:border-blue-400"}
            `,children:[s.jsx("div",{className:"text-3xl mb-2",children:"\uD83D\uDC8A"}),s.jsx("div",{className:"font-bold",children:"PALLIATIVE"}),s.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Mengurangi gejala"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Analgesia (Tanggal Mulai)"}),s.jsx("input",{type:"date",value:t.analgesiaStartDate||"",onChange:e=>m("analgesiaStartDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Modalitas Pengobatan Primer ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"SURGERY",label:"Bedah",icon:"\uD83C\uDFE5"},{value:"CHEMOTHERAPY",label:"Kemoterapi",icon:"\uD83D\uDC8A"},{value:"RADIATION",label:"Radiasi",icon:""},{value:"MULTIMODAL",label:"Multimodal",icon:"\uD83D\uDD2C"}].map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>m("primaryTreatment",e.value),className:`
                p-4 rounded-lg border-2 text-center transition-all
                ${t.primaryTreatment===e.value?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}
              `,children:[s.jsx("div",{className:"text-3xl mb-2",children:e.icon}),s.jsx("div",{className:`font-semibold ${t.primaryTreatment===e.value?"text-blue-900":"text-gray-900"}`,children:e.label})]},e.value))})]}),l&&(0,s.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-white rounded-lg border-2 border-red-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-red-900 mb-4 flex items-center",children:[s.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})}),"Pengobatan Bedah (Surgical Treatment)"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg p-6 border-2 border-yellow-400",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[s.jsx("svg",{className:"w-8 h-8 text-yellow-700 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-lg font-bold text-yellow-900",children:"LIMB SALVAGE STATUS"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"Indikator utama keberhasilan bedah tumor muskuloskeletal"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>g("limbSalvageStatus","LIMB_SALVAGE"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${t.surgery?.limbSalvageStatus==="LIMB_SALVAGE"?"border-green-600 bg-green-100 text-green-900":"border-yellow-400 bg-white hover:border-green-500"}
                  `,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-bold",children:"LIMB SALVAGE"}),s.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Ekstremitas dipertahankan"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>g("limbSalvageStatus","AMPUTATION"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${t.surgery?.limbSalvageStatus==="AMPUTATION"?"border-red-600 bg-red-100 text-red-900":"border-yellow-400 bg-white hover:border-red-500"}
                  `,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-bold",children:"AMPUTATION"}),s.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Amputasi dilakukan"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>g("limbSalvageStatus","NOT_APPLICABLE"),className:`
                    p-4 rounded-lg border-2 transition-all
                    ${t.surgery?.limbSalvageStatus==="NOT_APPLICABLE"?"border-gray-600 bg-gray-100 text-gray-900":"border-yellow-400 bg-white hover:border-gray-500"}
                  `,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-bold",children:"NOT APPLICABLE"}),s.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Bukan tumor ekstremitas"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tanggal Operasi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:t.surgery?.surgeryDate||"",onChange:e=>g("surgeryDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Jenis Operasi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:t.surgery?.surgeryType||"",onChange:e=>g("surgeryType",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[s.jsx("option",{value:"",children:"Pilih jenis operasi"}),s.jsx("option",{value:"WIDE_EXCISION",children:"Wide Excision"}),s.jsx("option",{value:"MARGINAL_EXCISION",children:"Marginal Excision"}),s.jsx("option",{value:"INTRALESIONAL",children:"Intralesional"}),s.jsx("option",{value:"AMPUTATION",children:"Amputation"}),s.jsx("option",{value:"ROTATIONPLASTY",children:"Rotationplasty"}),s.jsx("option",{value:"OTHER",children:"Lainnya"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durasi Operasi (menit)"}),s.jsx("input",{type:"number",value:t.surgery?.surgeryDuration||"",onChange:e=>g("surgeryDuration",parseInt(e.target.value)),placeholder:"Contoh: 180",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perdarahan (ml)"}),s.jsx("input",{type:"number",value:t.surgery?.bloodLoss||"",onChange:e=>g("bloodLoss",parseInt(e.target.value)),placeholder:"Contoh: 500",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kontaminasi Intraoperatif"}),s.jsx("div",{className:"flex items-center h-12",children:(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:t.surgery?.intraoperativeContamination||!1,onChange:e=>g("intraoperativeContamination",e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500 h-5 w-5"}),s.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Ya, terjadi kontaminasi"})]})})]})]}),t.surgery?.limbSalvageStatus==="LIMB_SALVAGE"&&(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:[(0,s.jsxs)("h4",{className:"font-bold text-green-900 mb-4 flex items-center",children:[s.jsx("span",{className:"text-2xl mr-2",children:"\uD83E\uDDB4"}),"Detail Limb Salvage"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Teknik Rekonstruksi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:t.surgery?.limbSalvageTechnique||"",onChange:e=>g("limbSalvageTechnique",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"",children:"Pilih teknik rekonstruksi"}),s.jsx("option",{value:"ENDOPROSTHESIS",children:"Endoprosthesis (Modular prosthesis)"}),s.jsx("option",{value:"ALLOGRAFT",children:"Allograft"}),s.jsx("option",{value:"ALLOGRAFT_PROSTHESIS_COMPOSITE",children:"Allograft-Prosthesis Composite (APC)"}),s.jsx("option",{value:"VASCULARIZED_FIBULA",children:"Vascularized Fibula Graft"}),s.jsx("option",{value:"DISTRACTION_OSTEOGENESIS",children:"Distraction Osteogenesis"}),s.jsx("option",{value:"OTHER",children:"Lainnya"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detail Rekonstruksi"}),s.jsx("textarea",{value:t.surgery?.reconstructionDetails||"",onChange:e=>g("reconstructionDetails",e.target.value),rows:3,placeholder:"Jelaskan detail teknik rekonstruksi, ukuran prosthesis, jenis graft, dll.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]})]}),t.surgery?.limbSalvageStatus==="AMPUTATION"&&(0,s.jsxs)("div",{className:"bg-red-50 rounded-lg p-6 border border-red-200",children:[s.jsx("h4",{className:"font-bold text-red-900 mb-4",children:"Detail Amputasi"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Level Amputasi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:t.surgery?.amputationLevel||"",onChange:e=>g("amputationLevel",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[s.jsx("option",{value:"",children:"Pilih level amputasi"}),(0,s.jsxs)("optgroup",{label:"Upper Extremity",children:[s.jsx("option",{value:"FOREQUARTER",children:"Forequarter (Interscapulothoracic)"}),s.jsx("option",{value:"ABOVE_ELBOW",children:"Above Elbow (Transhumeral)"}),s.jsx("option",{value:"BELOW_ELBOW",children:"Below Elbow (Transradial)"})]}),(0,s.jsxs)("optgroup",{label:"Lower Extremity",children:[s.jsx("option",{value:"HINDQUARTER",children:"Hindquarter (Hemipelvectomy)"}),s.jsx("option",{value:"ABOVE_KNEE",children:"Above Knee (Transfemoral)"}),s.jsx("option",{value:"BELOW_KNEE",children:"Below Knee (Transtibial)"}),s.jsx("option",{value:"SYMES",children:"Symes Amputation"})]}),s.jsx("option",{value:"DISARTICULATION",children:"Disarticulation"}),s.jsx("option",{value:"OTHER",children:"Lainnya"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Alasan Amputasi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:t.surgery?.amputationReason||"",onChange:e=>g("amputationReason",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[s.jsx("option",{value:"",children:"Pilih alasan amputasi"}),s.jsx("option",{value:"TUMOR_EXTENT",children:"Tumor Extent (Tumor terlalu luas)"}),s.jsx("option",{value:"FAILED_SALVAGE",children:"Failed Limb Salvage"}),s.jsx("option",{value:"RECURRENCE",children:"Local Recurrence"}),s.jsx("option",{value:"INFECTION",children:"Infection"}),s.jsx("option",{value:"PATIENT_CHOICE",children:"Patient Choice"}),s.jsx("option",{value:"OTHER",children:"Lainnya"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Status Margin Bedah ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{value:"R0_NEGATIVE",label:"R0 - Negative",color:"green"},{value:"R1_MICROSCOPIC_POSITIVE",label:"R1 - Microscopic+",color:"yellow"},{value:"R2_MACROSCOPIC_POSITIVE",label:"R2 - Macroscopic+",color:"red"}].map(e=>s.jsx("button",{type:"button",onClick:()=>g("surgicalMargin",e.value),className:`
                      p-3 rounded-lg border-2 transition-all
                      ${t.surgery?.surgicalMargin===e.value?`border-${e.color}-600 bg-${e.color}-100 text-${e.color}-900`:"border-gray-300 bg-white hover:border-gray-400"}
                    `,children:s.jsx("div",{className:"font-semibold text-sm",children:e.label})},e.value))}),t.surgery?.surgicalMargin==="R0_NEGATIVE"&&(0,s.jsxs)("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jarak Margin (mm)"}),s.jsx("input",{type:"number",value:t.surgery?.marginDistance||"",onChange:e=>g("marginDistance",parseFloat(e.target.value)),placeholder:"Jarak margin dalam milimeter",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Komplikasi Pascaoperasi"}),s.jsx("div",{className:"mb-3",children:(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:t.surgery?.infectionOccurred||!1,onChange:e=>g("infectionOccurred",e.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500 h-5 w-5"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Terjadi Infeksi"})]})}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:P.map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:t.surgery?.complications?.includes(e)||!1,onChange:()=>p(e),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Ahli Bedah"}),s.jsx("input",{type:"text",value:t.surgery?.surgeon||"",onChange:e=>g("surgeon",e.target.value),placeholder:"Nama lengkap ahli bedah",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rumah Sakit"}),s.jsx("input",{type:"text",value:t.surgery?.hospital||"",onChange:e=>g("hospital",e.target.value),placeholder:"Nama rumah sakit",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("label",{className:"flex items-center mb-4",children:[s.jsx("input",{type:"checkbox",checked:t.chemotherapy?.received||!1,onChange:e=>{x("received",e.target.checked),o(e.target.checked)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 h-5 w-5"}),s.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Kemoterapi"})]}),n&&(0,s.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timing"}),(0,s.jsxs)("select",{value:t.chemotherapy?.timing||"",onChange:e=>x("timing",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Pilih timing"}),s.jsx("option",{value:"NEOADJUVANT",children:"Neoadjuvant (sebelum bedah)"}),s.jsx("option",{value:"ADJUVANT",children:"Adjuvant (setelah bedah)"}),s.jsx("option",{value:"BOTH",children:"Both (Neoadjuvant + Adjuvant)"}),s.jsx("option",{value:"PALLIATIVE",children:"Palliative"})]})]}),(t.chemotherapy?.timing==="NEOADJUVANT"||t.chemotherapy?.timing==="BOTH")&&(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Neoadjuvant Chemotherapy"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Protokol"}),s.jsx("input",{type:"text",value:t.chemotherapy?.neoadjuvantProtocol||"",onChange:e=>x("neoadjuvantProtocol",e.target.value),placeholder:"e.g., MAP, VAC, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Siklus"}),s.jsx("input",{type:"number",value:t.chemotherapy?.neoadjuvantCycles||"",onChange:e=>x("neoadjuvantCycles",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),s.jsx("input",{type:"date",value:t.chemotherapy?.neoadjuvantStartDate||"",onChange:e=>x("neoadjuvantStartDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai"}),s.jsx("input",{type:"date",value:t.chemotherapy?.neoadjuvantEndDate||"",onChange:e=>x("neoadjuvantEndDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),(t.chemotherapy?.timing==="ADJUVANT"||t.chemotherapy?.timing==="BOTH")&&(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Adjuvant Chemotherapy"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Protokol"}),s.jsx("input",{type:"text",value:t.chemotherapy?.adjuvantProtocol||"",onChange:e=>x("adjuvantProtocol",e.target.value),placeholder:"e.g., MAP, VAC, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Siklus"}),s.jsx("input",{type:"number",value:t.chemotherapy?.adjuvantCycles||"",onChange:e=>x("adjuvantCycles",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),s.jsx("input",{type:"date",value:t.chemotherapy?.adjuvantStartDate||"",onChange:e=>x("adjuvantStartDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai"}),s.jsx("input",{type:"date",value:t.chemotherapy?.adjuvantEndDate||"",onChange:e=>x("adjuvantEndDate",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("label",{className:"flex items-center mb-4",children:[s.jsx("input",{type:"checkbox",checked:t.radiation?.received||!1,onChange:e=>{h("received",e.target.checked),u(e.target.checked)},className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 h-5 w-5"}),s.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Radioterapi"})]}),d&&(0,s.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timing"}),(0,s.jsxs)("select",{value:t.radiation?.timing||"",onChange:e=>h("timing",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[s.jsx("option",{value:"",children:"Pilih timing"}),s.jsx("option",{value:"NEOADJUVANT",children:"Neoadjuvant (sebelum bedah)"}),s.jsx("option",{value:"ADJUVANT",children:"Adjuvant (setelah bedah)"}),s.jsx("option",{value:"DEFINITIVE",children:"Definitive"}),s.jsx("option",{value:"PALLIATIVE",children:"Palliative"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Dosis (Gy)"}),s.jsx("input",{type:"number",value:t.radiation?.totalDose||"",onChange:e=>h("totalDose",parseFloat(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fraksi"}),s.jsx("input",{type:"number",value:t.radiation?.fractions||"",onChange:e=>h("fractions",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),s.jsx("input",{type:"date",value:t.radiation?.startDate||"",onChange:e=>h("startDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai"}),s.jsx("input",{type:"date",value:t.radiation?.endDate||"",onChange:e=>h("endDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]})]})]})]}),(l||n||d)&&(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-white rounded-lg border border-indigo-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-indigo-900 mb-4",children:"Respons Pengobatan Keseluruhan"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"COMPLETE_REMISSION",label:"Complete Remission",color:"green"},{value:"PARTIAL_REMISSION",label:"Partial Remission",color:"blue"},{value:"STABLE_DISEASE",label:"Stable Disease",color:"yellow"},{value:"PROGRESSIVE_DISEASE",label:"Progressive Disease",color:"red"}].map(e=>s.jsx("button",{type:"button",onClick:()=>m("overallResponse",e.value),className:`
                  p-3 rounded-lg border-2 transition-all text-center
                  ${t.overallResponse===e.value?`border-${e.color}-600 bg-${e.color}-100`:"border-gray-300 bg-white hover:border-indigo-400"}
                `,children:s.jsx("div",{className:"font-semibold text-sm",children:e.label})},e.value))})]}),t.surgery?.limbSalvageStatus&&s.jsx("div",{className:`border-2 rounded-lg p-6 ${"LIMB_SALVAGE"===t.surgery.limbSalvageStatus?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:`h-6 w-6 mr-3 flex-shrink-0 ${"LIMB_SALVAGE"===t.surgery.limbSalvageStatus?"text-green-600":"text-gray-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:`text-sm ${"LIMB_SALVAGE"===t.surgery.limbSalvageStatus?"text-green-800":"text-gray-800"}`,children:[s.jsx("span",{className:"font-medium",children:"LIMB_SALVAGE"===t.surgery.limbSalvageStatus?" LIMB SALVAGE berhasil dipertahankan":"Informasi pengobatan telah dicatat"})," - Anda dapat melanjutkan ke bagian selanjutnya."]})]})})]})}let L=({data:e,isActive:a})=>{let[t,l]=(0,r.useState)(new Set(["section1","section2"])),i=e=>{l(a=>{let t=new Set(a);return t.has(e)?t.delete(e):t.add(e),t})},n=(e,a)=>a.split(".").reduce((e,a)=>e?.[a],e),o=e=>null==e||""===e?"":"boolean"==typeof e?e?"Yes":"No":e instanceof Date?e.toLocaleDateString():"object"==typeof e?JSON.stringify(e):String(e),d=[{id:"section1",title:"Center & Pathology Type",icon:"\uD83C\uDFE5",fields:[{label:"Center",key:"centerId"},{label:"Pathology Type",key:"pathologyType"},{label:"Subspecialist",key:"subspecialistName"},{label:"Entry Date",key:"entryDate"}]},{id:"section2",title:"Patient Identity",icon:"\uD83D\uDC64",fields:[{label:"Medical Record Number",key:"hospitalRecordNumber"},{label:"NIK",key:"nik"},{label:"Name",key:"name"},{label:"Date of Birth",key:"dateOfBirth"},{label:"Place of Birth",key:"placeOfBirth"},{label:"Gender",key:"gender"},{label:"Blood Type",key:"bloodType"},{label:"Religion",key:"religion"},{label:"Marital Status",key:"maritalStatus"},{label:"Occupation",key:"occupation"},{label:"Education",key:"education"},{label:"Phone Number",key:"phoneNumber"},{label:"Email",key:"email"},{label:"Address",key:"address"},{label:"Province",key:"province"},{label:"Regency",key:"regency"},{label:"District",key:"district"},{label:"Village",key:"village"},{label:"Postal Code",key:"postalCode"}]},{id:"section3",title:"Clinical Data",icon:"\uD83E\uDE7A",fields:[{label:"Chief Complaint",key:"chiefComplaint"},{label:"Onset Date",key:"onsetDate"},{label:"Symptom Duration (months)",key:"symptomDuration"},{label:"Presenting Symptoms",key:"presentingSymptoms"},{label:"Tumor Size at Presentation (cm)",key:"tumorSizeAtPresentation"},{label:"Family History of Cancer",key:"familyHistoryCancer"},{label:"Tumor Syndrome",key:"tumorSyndromeId"},{label:"Karnofsky Performance Score",key:"karnofskysScore"}]},{id:"section4",title:"Diagnostic Investigations",icon:"\uD83D\uDD2C",fields:[{label:"Biopsy Date",key:"biopsyDate"},{label:"Biopsy Type",key:"biopsyType"},{label:"Biopsy Result",key:"biopsyResult"},{label:"Imaging Studies",key:"imagingStudies"}]},{id:"section5",title:"Diagnosis & Location",icon:"\uD83D\uDCCB",fields:[{label:"WHO Bone Tumor Classification",key:"whoBoneTumorId"},{label:"WHO Soft Tissue Tumor Classification",key:"whoSoftTissueTumorId"},{label:"Bone Location",key:"boneLocationId"},{label:"Soft Tissue Location",key:"softTissueLocationId"},{label:"Histopathology Grade",key:"histopathologyGrade"},{label:"Histopathology Details",key:"histopathologyDetails"}]},{id:"section6",title:"Staging",icon:"\uD83D\uDCCA",fields:[{label:"Enneking Stage",key:"ennekingStage"},{label:"AJCC Stage",key:"ajccStage"},{label:"Metastasis Present",key:"metastasisPresent"},{label:"Metastasis Sites",key:"metastasisSites"}]},{id:"section7",title:"CPC Conference",icon:"\uD83D\uDCAC",fields:[{label:"CPC Date",key:"cpcDate"},{label:"CPC Attendees",key:"cpcAttendees"},{label:"Case Summary",key:"cpcCaseSummary"},{label:"Recommended Treatment",key:"cpcRecommendedTreatment"},{label:"Treatment Plan",key:"cpcTreatmentPlan"},{label:"CPC Decision",key:"cpcDecision"},{label:"Notes",key:"cpcNotes"},{label:"Next Review Date",key:"cpcNextReviewDate"}]},{id:"section8",title:"Treatment Management",icon:"\uD83D\uDC8A",fields:[{label:"Treatment Start Date",key:"treatmentStartDate"},{label:"Treatment End Date",key:"treatmentEndDate"},{label:"Surgery Date",key:"surgeryDate"},{label:"Surgery Type",key:"surgeryType"},{label:"Surgery Details",key:"surgeryDetails"},{label:"Chemotherapy Protocol",key:"chemotherapyProtocol"},{label:"Chemotherapy Cycles",key:"chemotherapyCycles"},{label:"Radiotherapy Dose",key:"radiotherapyDose"},{label:"Radiotherapy Fractions",key:"radiotherapyFractions"},{label:"Treatment Response",key:"treatmentResponse"},{label:"Complications",key:"complications"},{label:"Adverse Events",key:"adverseEvents"}]},{id:"section9",title:"Follow-up Plan",icon:"\uD83D\uDCC5",fields:[{label:"Follow-up Schedule",key:"followUpSchedule"},{label:"Next Follow-up Date",key:"nextFollowUpDate"},{label:"Monitoring Plan",key:"monitoringPlan"},{label:"Imaging Follow-up",key:"imagingFollowUp"},{label:"Lab Follow-up",key:"labFollowUp"},{label:"Quality of Life",key:"qualityOfLife"},{label:"Functional Status",key:"functionalStatus"},{label:"Survival Status",key:"survivalStatus"},{label:"Date of Last Contact",key:"dateOfLastContact"}]}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Patient Registration"}),s.jsx("p",{className:"text-gray-700",children:"Please carefully review all information before submitting. You can navigate back to any section to make changes if needed."}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:()=>{l(new Set(["section1","section2","section3","section4","section5","section6","section7","section8","section9"]))},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Expand All"}),s.jsx("span",{className:"text-gray-400",children:"|"}),s.jsx("button",{onClick:()=>{l(new Set)},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Collapse All"})]})]}),s.jsx("div",{className:"space-y-4",children:d.map(a=>{let r=t.has(a.id),l=e[a.id]||{},d=a.fields.some(e=>{let a=n(l,e.key);return null!=a&&""!==a});return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>i(a.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:a.icon}),(0,s.jsxs)("div",{className:"text-left",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.title}),!d&&s.jsx("p",{className:"text-sm text-gray-500",children:"No data entered"})]})]}),s.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${r?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&s.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.fields.map(e=>{let a=o(n(l,e.key)),t=""===a;return(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("dt",{className:"text-sm font-medium text-gray-600 mb-1",children:e.label}),s.jsx("dd",{className:`text-sm ${t?"text-gray-400 italic":"text-gray-900"}`,children:a})]},e.key)})})})]},a.id)})}),s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-700",children:[s.jsx("strong",{children:"Important:"}),' Please verify all information is accurate before submitting. You can use the sidebar navigation or "Previous" button to go back and edit any section.']})})]})}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Data Completeness"}),s.jsx("div",{className:"space-y-2",children:d.map(a=>{let t=e[a.id]||{},r=a.fields.length,l=Math.round(a.fields.filter(e=>{let a=n(t,e.key);return null!=a&&""!==a}).length/r*100);return(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-700",children:a.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${100===l?"bg-green-500":l>=50?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${l}%`}})}),(0,s.jsxs)("span",{className:"text-gray-600 font-medium w-12 text-right",children:[l,"%"]})]})]},a.id)})})]})]})},M=(e,a)=>null==e||""===e?{field:a,message:`${a} is required`}:null,R=(e,a="Email")=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:{field:a,message:"Invalid email format"}:null,O=(e,a="NIK")=>e?/^\d{16}$/.test(e)?null:{field:a,message:"NIK must be exactly 16 digits"}:null,B=(e,a="Phone Number")=>e?/^(\+62|62|0)[8][0-9]{8,11}$/.test(e.replace(/[\s-]/g,""))?null:{field:a,message:"Invalid Indonesian phone number format (e.g., 08123456789)"}:null,H=(e,a="Date",t)=>{if(!e)return null;let s=new Date(e);return isNaN(s.getTime())?{field:a,message:"Invalid date format"}:t?.futureAllowed===!1&&s>new Date?{field:a,message:"Date cannot be in the future"}:t?.minDate&&s<t.minDate?{field:a,message:`Date must be after ${t.minDate.toLocaleDateString()}`}:t?.maxDate&&s>t.maxDate?{field:a,message:`Date must be before ${t.maxDate.toLocaleDateString()}`}:null},F=(e,a="Date of Birth")=>{if(!e)return null;let t=new Date(e),s=new Date().getFullYear()-t.getFullYear();return H(e,a,{futureAllowed:!1})||(s<0||s>150?{field:a,message:"Please enter a valid date of birth"}:null)},G=(e,a,t)=>{if(null==e||""===e)return null;let s="string"==typeof e?parseFloat(e):e;return isNaN(s)?{field:a,message:"Must be a valid number"}:t?.integer&&!Number.isInteger(s)?{field:a,message:"Must be a whole number"}:t?.min!==void 0&&s<t.min?{field:a,message:`Must be at least ${t.min}`}:t?.max!==void 0&&s>t.max?{field:a,message:`Must be no more than ${t.max}`}:null},K=(e,a="Karnofsky Score")=>{if(!e)return null;let t="string"==typeof e?parseInt(e):e;return isNaN(t)||t<0||t>100?{field:a,message:"Karnofsky score must be between 0 and 100"}:t%10!=0?{field:a,message:"Karnofsky score must be in increments of 10"}:null},$=(e,a="Medical Record Number")=>e&&e.length<6?{field:a,message:"Medical record number must be at least 6 characters"}:null,z=e=>{let a=[],t=M(e.centerId,"Center");t&&a.push(t);let s=M(e.pathologyType,"Pathology Type");return s&&a.push(s),{isValid:0===a.length,errors:a}},V=e=>{let a=[],t=M(e.hospitalRecordNumber,"Medical Record Number");if(t)a.push(t);else{let t=$(e.hospitalRecordNumber);t&&a.push(t)}let s=M(e.nik,"NIK");if(s)a.push(s);else{let t=O(e.nik);t&&a.push(t)}let r=M(e.name,"Name");r&&a.push(r);let l=M(e.dateOfBirth,"Date of Birth");if(l)a.push(l);else{let t=F(e.dateOfBirth);t&&a.push(t)}let i=M(e.gender,"Gender");if(i&&a.push(i),e.email){let t=R(e.email);t&&a.push(t)}if(e.phoneNumber){let t=B(e.phoneNumber);t&&a.push(t)}return{isValid:0===a.length,errors:a}},_=e=>{let a=[];if(e.karnofskysScore){let t=K(e.karnofskysScore);t&&a.push(t)}if(e.onsetDate){let t=H(e.onsetDate,"Onset Date",{futureAllowed:!1});t&&a.push(t)}if(e.tumorSizeAtPresentation){let t=G(e.tumorSizeAtPresentation,"Tumor Size",{min:0});t&&a.push(t)}return{isValid:0===a.length,errors:a}},q=e=>{let a=[];if(e.biopsyDate){let t=H(e.biopsyDate,"Biopsy Date",{futureAllowed:!1});t&&a.push(t)}return{isValid:0===a.length,errors:a}},U=(e,a)=>{let t=[],s=a.pathologyType;if("bone_tumor"===s||"BONE_TUMOR"===s){let a=M(e.whoBoneTumorId,"WHO Bone Tumor Classification");a&&t.push(a);let s=M(e.boneLocationId,"Bone Location");s&&t.push(s)}if("soft_tissue_tumor"===s||"SOFT_TISSUE_TUMOR"===s){let a=M(e.whoSoftTissueTumorId,"WHO Soft Tissue Tumor Classification");a&&t.push(a);let s=M(e.softTissueLocationId,"Soft Tissue Location");s&&t.push(s)}return{isValid:0===t.length,errors:t}},W=e=>{let a=[];return e.ennekingStage||e.ajccStage||a.push({field:"staging",message:"Staging: Minimal satu staging system (Enneking atau AJCC) harus diisi"}),e.histopathologyGrade||a.push({field:"histopathologyGrade",message:"Histopathology Grade harus diisi"}),{isValid:0===a.length,errors:a}},J=e=>{let a=[];if(e.cpcDate){let t=H(e.cpcDate,"Tanggal CPC",{futureAllowed:!1});t&&a.push(t)}return e.cpcDate&&(e.consultantsPresent||a.push({field:"consultantsPresent",message:"Jika tanggal CPC diisi, daftar konsultan hadir harus diisi"}),e.decision||a.push({field:"decision",message:"Jika tanggal CPC diisi, keputusan CPC harus diisi"})),{isValid:0===a.length,errors:a}},Y=e=>{let a=[];if(e.treatmentIntention||a.push({field:"treatmentIntention",message:"Treatment Intention (Curative/Palliative) harus diisi"}),e.primaryTreatment||a.push({field:"primaryTreatment",message:"Modalitas pengobatan primer harus dipilih"}),"SURGERY"===e.primaryTreatment||"MULTIMODAL"===e.primaryTreatment){if(e.surgery?.limbSalvageStatus||a.push({field:"limbSalvageStatus",message:"Limb Salvage Status HARUS diisi untuk pembedahan"}),e.surgery?.surgeryDate){let t=H(e.surgery.surgeryDate,"Surgery Date",{futureAllowed:!1});t&&a.push(t)}else a.push({field:"surgeryDate",message:"Tanggal operasi harus diisi"});if(e.surgery?.surgeryType||a.push({field:"surgeryType",message:"Jenis operasi harus diisi"}),e.surgery?.surgeryDuration){let t=G(e.surgery.surgeryDuration,"Surgery Duration",{min:1,max:1440});t&&a.push(t)}if(e.surgery?.bloodLoss){let t=G(e.surgery.bloodLoss,"Blood Loss",{min:0,max:5e4});t&&a.push(t)}if(e.surgery?.limbSalvageStatus!=="LIMB_SALVAGE"||e.surgery?.limbSalvageTechnique||a.push({field:"limbSalvageTechnique",message:"Teknik rekonstruksi harus diisi untuk Limb Salvage"}),e.surgery?.limbSalvageStatus!=="AMPUTATION"||(e.surgery?.amputationLevel||a.push({field:"amputationLevel",message:"Level amputasi harus diisi"}),e.surgery?.amputationReason||a.push({field:"amputationReason",message:"Alasan amputasi harus diisi"})),e.surgery?.surgicalMargin||a.push({field:"surgicalMargin",message:"Status margin bedah harus diisi"}),e.surgery?.marginDistance){let t=G(e.surgery.marginDistance,"Margin Distance",{min:0,max:1e3});t&&a.push(t)}}if(e.chemotherapy?.received){if(e.chemotherapy?.timing||a.push({field:"chemotherapyTiming",message:"Timing kemoterapi harus diisi"}),e.chemotherapy?.neoadjuvantStartDate){let t=H(e.chemotherapy.neoadjuvantStartDate,"Neoadjuvant Start Date",{futureAllowed:!0});t&&a.push(t)}if(e.chemotherapy?.neoadjuvantEndDate){let t=H(e.chemotherapy.neoadjuvantEndDate,"Neoadjuvant End Date",{futureAllowed:!0});t&&a.push(t)}if(e.chemotherapy?.adjuvantStartDate){let t=H(e.chemotherapy.adjuvantStartDate,"Adjuvant Start Date",{futureAllowed:!0});t&&a.push(t)}if(e.chemotherapy?.adjuvantEndDate){let t=H(e.chemotherapy.adjuvantEndDate,"Adjuvant End Date",{futureAllowed:!0});t&&a.push(t)}if(e.chemotherapy?.neoadjuvantCycles){let t=G(e.chemotherapy.neoadjuvantCycles,"Neoadjuvant Cycles",{min:1,max:50,integer:!0});t&&a.push(t)}if(e.chemotherapy?.adjuvantCycles){let t=G(e.chemotherapy.adjuvantCycles,"Adjuvant Cycles",{min:1,max:50,integer:!0});t&&a.push(t)}}if(e.radiation?.received){if(e.radiation?.startDate){let t=H(e.radiation.startDate,"Radiation Start Date",{futureAllowed:!0});t&&a.push(t)}if(e.radiation?.endDate){let t=H(e.radiation.endDate,"Radiation End Date",{futureAllowed:!0});t&&a.push(t)}if(e.radiation?.totalDose){let t=G(e.radiation.totalDose,"Radiation Dose",{min:0,max:200});t&&a.push(t)}if(e.radiation?.fractions){let t=G(e.radiation.fractions,"Radiation Fractions",{min:1,max:100,integer:!0});t&&a.push(t)}}if(e.analgesiaStartDate){let t=H(e.analgesiaStartDate,"Analgesia Start Date",{futureAllowed:!1});t&&a.push(t)}if(e.treatmentStartDate){let t=H(e.treatmentStartDate,"Treatment Start Date",{futureAllowed:!0});t&&a.push(t)}return{isValid:0===a.length,errors:a}};function X(){let{isAuthenticated:e,isLoading:a}=(0,i.useAuth)(),t=(0,l.useRouter)();if((0,r.useEffect)(()=>{a||e||t.push("/login")},[e,a,t]),a)return s.jsx(n.A,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(!e)return null;let o=async e=>{try{let a=await fetch("/api/v1/patients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to create patient");let s=await a.json();t.push(`/patients/view?id=${s.data.id}`)}catch(e){throw console.error("Error creating patient:",e),e}},c=async e=>{try{localStorage.setItem("patient-draft",JSON.stringify(e)),console.log("Draft saved:",e)}catch(e){console.error("Error saving draft:",e)}};return(0,s.jsxs)(n.A,{children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registrasi Pasien Tumor Muskuloskeletal"}),(0,s.jsxs)("p",{className:"text-gray-600 mt-2",children:["Sistem registrasi tumor muskuloskeletal berdasarkan"," ",s.jsx("strong",{children:"WHO Classification 5th Edition"})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[s.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"9 Bagian Form (90% Lengkap)"}),s.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"57 Klasifikasi Tumor Tulang WHO"}),s.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:"68 Klasifikasi Tumor Jaringan Lunak WHO"}),s.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"Mirrel Score Calculator"}),s.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-pink-100 text-pink-800",children:"MSTS Score Ready"})]})]}),s.jsx(d,{autoSaveInterval:12e4,children:s.jsx(u,{sections:[{id:"section1",title:"Pusat & Patologi",description:"Pilih pusat pengobatan dan jenis patologi tumor",component:m,validate:z},{id:"section2",title:"Identitas Pasien",description:"Data identitas dan demografi pasien",component:g,validate:V},{id:"section3",title:"Data Klinis",description:"Karnofsky Score, Pain Scale, BMI, dan pemeriksaan fisik",component:b,validate:_},{id:"section4",title:"Pemeriksaan Penunjang",description:"Laboratorium, Radiologi, Mirrel Score, dan Patologi",component:N,validate:q},{id:"section5",title:"Diagnosis & Lokasi",description:"Klasifikasi WHO dan lokasi anatomis tumor",component:I,validate:U},{id:"section6",title:"Staging",description:"Enneking, AJCC, dan grading tumor",component:A,validate:W},{id:"section7",title:"CPC Conference",description:"Keputusan multidisipliner tim onkologi",component:D,validate:J},{id:"section8",title:"Management",description:"Terapi pembedahan, kemoterapi, radioterapi",component:E,validate:Y},{id:"section10",title:"Review & Submit",description:"Tinjau dan kirim data pasien",component:L}],onComplete:o,onSaveDraft:c,autoSaveInterval:12e4})})]})}function Q(){return s.jsx(X,{})}},8199:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let s=(0,t(6843).createProxy)(String.raw`D:\Project\Tumor Registry\INAMSOS Application Desktop\frontend\src\app\patients\new\page.tsx`),{__esModule:r,$$typeof:l}=s,i=s.default},4669:(e,a,t)=>{"use strict";t.d(a,{x7:()=>ec,ZP:()=>eu});var s,r=t(3729);let l={data:""},i=e=>e||l,n=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,o=/\/\*[^]*?\*\/|  +/g,d=/\n+/g,c=(e,a)=>{let t="",s="",r="";for(let l in e){let i=e[l];"@"==l[0]?"i"==l[1]?t=l+" "+i+";":s+="f"==l[1]?c(i,l):l+"{"+c(i,"k"==l[1]?"":a)+"}":"object"==typeof i?s+=c(i,a?a.replace(/([^,])+/g,e=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,a=>/&/.test(a)?a.replace(/&/g,e):e?e+" "+a:a)):l):null!=i&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=c.p?c.p(l,i):l+":"+i+";")}return t+(a&&r?a+"{"+r+"}":r)+s},u={},m=e=>{if("object"==typeof e){let a="";for(let t in e)a+=t+m(e[t]);return a}return e},g=(e,a,t,s,r)=>{let l=m(e),i=u[l]||(u[l]=(e=>{let a=0,t=11;for(;a<e.length;)t=101*t+e.charCodeAt(a++)>>>0;return"go"+t})(l));if(!u[i]){let a=l!==e?e:(e=>{let a,t,s=[{}];for(;a=n.exec(e.replace(o,""));)a[4]?s.shift():a[3]?(t=a[3].replace(d," ").trim(),s.unshift(s[0][t]=s[0][t]||{})):s[0][a[1]]=a[2].replace(d," ").trim();return s[0]})(e);u[i]=c(r?{["@keyframes "+i]:a}:a,t?"":"."+i)}let g=t&&u.g?u.g:null;return t&&(u.g=u[i]),((e,a,t,s)=>{s?a.data=a.data.replace(s,e):-1===a.data.indexOf(e)&&(a.data=t?e+a.data:a.data+e)})(u[i],a,s,g),i},x=(e,a,t)=>e.reduce((e,s,r)=>{let l=a[r];if(l&&l.call){let e=l(t),a=e&&e.props&&e.props.className||/^go/.test(e)&&e;l=a?"."+a:e&&"object"==typeof e?e.props?"":c(e,""):!1===e?"":e}return e+s+(null==l?"":l)},"");function h(e){let a=this||{},t=e.call?e(a.p):e;return g(t.unshift?t.raw?x(t,[].slice.call(arguments,1),a.p):t.reduce((e,t)=>Object.assign(e,t&&t.call?t(a.p):t),{}):t,i(a.target),a.g,a.o,a.k)}h.bind({g:1});let p,b,f,y=h.bind({k:1});function v(e,a){let t=this||{};return function(){let s=arguments;function r(l,i){let n=Object.assign({},l),o=n.className||r.className;t.p=Object.assign({theme:b&&b()},n),t.o=/ *go\d+/.test(o),n.className=h.apply(t,s)+(o?" "+o:""),a&&(n.ref=i);let d=e;return e[0]&&(d=n.as||e,delete n.as),f&&d[0]&&f(n),p(d,n)}return a?a(r):r}}var j=e=>"function"==typeof e,N=(e,a)=>j(e)?e(a):e,k=(()=>{let e=0;return()=>(++e).toString()})(),w=(()=>{let e;return()=>e})(),S="default",C=(e,a)=>{let{toastLimit:t}=e.settings;switch(a.type){case 0:return{...e,toasts:[a.toast,...e.toasts].slice(0,t)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case 2:let{toast:s}=a;return C(e,{type:e.toasts.find(e=>e.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=a;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===a.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)};case 5:return{...e,pausedAt:a.time};case 6:let l=a.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+l}))}}},I=[],T={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},A={},D=(e,a=S)=>{A[a]=C(A[a]||T,e),I.forEach(([e,t])=>{e===a&&t(A[a])})},P=e=>Object.keys(A).forEach(a=>D(e,a)),E=e=>Object.keys(A).find(a=>A[a].toasts.some(a=>a.id===e)),L=(e=S)=>a=>{D(a,e)},M={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R=(e={},a=S)=>{let[t,s]=(0,r.useState)(A[a]||T),l=(0,r.useRef)(A[a]);(0,r.useEffect)(()=>(l.current!==A[a]&&s(A[a]),I.push([a,s]),()=>{let e=I.findIndex(([e])=>e===a);e>-1&&I.splice(e,1)}),[a]);let i=t.toasts.map(a=>{var t,s,r;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||(null==(t=e[a.type])?void 0:t.removeDelay)||(null==e?void 0:e.removeDelay),duration:a.duration||(null==(s=e[a.type])?void 0:s.duration)||(null==e?void 0:e.duration)||M[a.type],style:{...e.style,...null==(r=e[a.type])?void 0:r.style,...a.style}}});return{...t,toasts:i}},O=(e,a="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:a,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...t,id:(null==t?void 0:t.id)||k()}),B=e=>(a,t)=>{let s=O(a,e,t);return L(s.toasterId||E(s.id))({type:2,toast:s}),s.id},H=(e,a)=>B("blank")(e,a);H.error=B("error"),H.success=B("success"),H.loading=B("loading"),H.custom=B("custom"),H.dismiss=(e,a)=>{let t={type:3,toastId:e};a?L(a)(t):P(t)},H.dismissAll=e=>H.dismiss(void 0,e),H.remove=(e,a)=>{let t={type:4,toastId:e};a?L(a)(t):P(t)},H.removeAll=e=>H.remove(void 0,e),H.promise=(e,a,t)=>{let s=H.loading(a.loading,{...t,...null==t?void 0:t.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=a.success?N(a.success,e):void 0;return r?H.success(r,{id:s,...t,...null==t?void 0:t.success}):H.dismiss(s),e}).catch(e=>{let r=a.error?N(a.error,e):void 0;r?H.error(r,{id:s,...t,...null==t?void 0:t.error}):H.dismiss(s)}),e};var F=1e3,G=(e,a="default")=>{let{toasts:t,pausedAt:s}=R(e,a),l=(0,r.useRef)(new Map).current,i=(0,r.useCallback)((e,a=F)=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),n({type:4,toastId:e})},a);l.set(e,t)},[]);(0,r.useEffect)(()=>{if(s)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let s=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(s<0){t.visible&&H.dismiss(t.id);return}return setTimeout(()=>H.dismiss(t.id,a),s)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,s,a]);let n=(0,r.useCallback)(L(a),[a]),o=(0,r.useCallback)(()=>{n({type:5,time:Date.now()})},[n]),d=(0,r.useCallback)((e,a)=>{n({type:1,toast:{id:e,height:a}})},[n]),c=(0,r.useCallback)(()=>{s&&n({type:6,time:Date.now()})},[s,n]),u=(0,r.useCallback)((e,a)=>{let{reverseOrder:s=!1,gutter:r=8,defaultPosition:l}=a||{},i=t.filter(a=>(a.position||l)===(e.position||l)&&a.height),n=i.findIndex(a=>a.id===e.id),o=i.filter((e,a)=>a<n&&e.visible).length;return i.filter(e=>e.visible).slice(...s?[o+1]:[0,o]).reduce((e,a)=>e+(a.height||0)+r,0)},[t]);return(0,r.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let a=l.get(e.id);a&&(clearTimeout(a),l.delete(e.id))}})},[t,i]),{toasts:t,handlers:{updateHeight:d,startPause:o,endPause:c,calculateOffset:u}}},K=y`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$=y`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,z=y`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,V=v("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${K} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${z} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_=y`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,q=v("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${_} 1s linear infinite;
`,U=y`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,W=y`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,J=v("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${U} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${W} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Y=v("div")`
  position: absolute;
`,X=v("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Q=y`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z=v("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Q} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ee=({toast:e})=>{let{icon:a,type:t,iconTheme:s}=e;return void 0!==a?"string"==typeof a?r.createElement(Z,null,a):a:"blank"===t?null:r.createElement(X,null,r.createElement(q,{...s}),"loading"!==t&&r.createElement(Y,null,"error"===t?r.createElement(V,{...s}):r.createElement(J,{...s})))},ea=e=>`
0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,et=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}
`,es=v("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,er=v("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,el=(e,a)=>{let t=e.includes("top")?1:-1,[s,r]=w()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ea(t),et(t)];return{animation:a?`${y(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${y(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ei=r.memo(({toast:e,position:a,style:t,children:s})=>{let l=e.height?el(e.position||a||"top-center",e.visible):{opacity:0},i=r.createElement(ee,{toast:e}),n=r.createElement(er,{...e.ariaProps},N(e.message,e));return r.createElement(es,{className:e.className,style:{...l,...t,...e.style}},"function"==typeof s?s({icon:i,message:n}):r.createElement(r.Fragment,null,i,n))});s=r.createElement,c.p=void 0,p=s,b=void 0,f=void 0;var en=({id:e,className:a,style:t,onHeightUpdate:s,children:l})=>{let i=r.useCallback(a=>{if(a){let t=()=>{s(e,a.getBoundingClientRect().height)};t(),new MutationObserver(t).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return r.createElement("div",{ref:i,className:a,style:t},l)},eo=(e,a)=>{let t=e.includes("top"),s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:w()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${a*(t?1:-1)}px)`,...t?{top:0}:{bottom:0},...s}},ed=h`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ec=({reverseOrder:e,position:a="top-center",toastOptions:t,gutter:s,children:l,toasterId:i,containerStyle:n,containerClassName:o})=>{let{toasts:d,handlers:c}=G(t,i);return r.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...n},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},d.map(t=>{let i=t.position||a,n=eo(i,c.calculateOffset(t,{reverseOrder:e,gutter:s,defaultPosition:a}));return r.createElement(en,{id:t.id,key:t.id,onHeightUpdate:c.updateHeight,className:t.visible?ed:"",style:n},"custom"===t.type?N(t.message,t):l?l(t):r.createElement(ei,{toast:t,position:i}))}))},eu=H}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[7141,4192,2528],()=>t(428));module.exports=s})();