(()=>{var e={};e.id=3708,e.ids=[3708],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},6281:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var s=r(7096),a=r(6132),i=r(7284),n=r.n(i),l=r(2564),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let c=["",{children:["admin",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3043)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\admin\\audit\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4775)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,5666)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\admin\\audit\\page.tsx"],x="/admin/audit/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/audit/page",pathname:"/admin/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6061:(e,t,r)=>{Promise.resolve().then(r.bind(r,2167))},3781:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var s=r(4218);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:i="",children:n,iconNode:o,...x},u)=>(0,s.createElement)("svg",{ref:u,...c,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:l("lucide",i),...!n&&!d(x)&&{"aria-hidden":"true"},...x},[...o.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(n)?n:[n]])),x=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...i},d)=>(0,s.createElement)(o,{ref:d,iconNode:t,className:l(`lucide-${a(n(e))}`,`lucide-${e}`,r),...i}));return r.displayName=n(e),r}},2258:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(3781);let a=(0,s.Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2167:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(3854),a=r(4218),i=r(5815),n=r(3984),l=r(9914);class d{async getLogs(e={}){let t=await l.Z.get("/activity-logs",{params:e});return t.data}}let c=new d;var o=r(3781);let x=(0,o.Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var u=r(2258);let m=(0,o.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function p(){let{user:e,isAuthenticated:t,isLoading:r}=(0,i.useAuth)(),[l,d]=(0,a.useState)([]),[o,p]=(0,a.useState)(0),[h,g]=(0,a.useState)(!0),[y,f]=(0,a.useState)(null),[j,v]=(0,a.useState)(1),[b,w]=(0,a.useState)(void 0),[N,k]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{if(!r&&!t){window.location.href="/login";return}t&&q()},[t,r,j,b,N]);let q=async()=>{try{g(!0);let e=await c.getLogs({page:j,limit:20,centerId:b,actorId:N});d(e.data),p(e.total)}catch(e){console.error("Failed to fetch logs:",e),e.response?.status===403?f("Anda tidak memiliki izin untuk melihat log aktivitas."):f("Gagal memuat log aktivitas.")}finally{g(!1)}},P=e=>{v(e)},A=Math.ceil(o/20);return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):(0,s.jsxs)(n.A,{children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(x,{className:"mr-2 h-6 w-6 text-gray-700"}),"Audit Logs"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Riwayat aktivitas dan perubahan data dalam sistem."})]}),y&&s.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6 border border-red-200",children:y}),s.jsx("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:h&&0===l.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-500",children:"Memuat log..."})]}):0===l.length?(0,s.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[s.jsx(u.Z,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tidak ada aktivitas"}),s.jsx("p",{children:"Belum ada log aktivitas yang tercatat."})]}):(0,s.jsxs)("div",{children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Waktu"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aktor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aktivitas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detail"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pusat"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(m,{className:"h-4 w-4 mr-2 text-gray-400"}),new Date(e.createdAt).toLocaleString("id-ID")]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.actor?(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.actor.name}),s.jsx("div",{className:"text-xs text-gray-500",children:e.actor.email})]}):s.jsx("span",{className:"text-sm text-gray-400 italic",children:"System / Unknown"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:e.action})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm text-gray-900",children:e.changesAfter?.description||e.description||"-"}),e.entity&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:["Entity: ",e.entity," (",e.entityId,")"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.center?e.center.name:"-"})]},e.id))})]})}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Menampilkan ",(j-1)*20+1," sampai ",Math.min(20*j,o)," dari ",o," entri"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>P(Math.max(1,j-1)),disabled:1===j,className:"px-3 py-1 border rounded hover:bg-gray-50 disabled:opacity-50 text-sm",children:"Sebelumnya"}),(0,s.jsxs)("span",{className:"px-3 py-1 text-sm font-medium",children:["Halaman ",j," / ",A]}),s.jsx("button",{onClick:()=>P(Math.min(A,j+1)),disabled:j>=A,className:"px-3 py-1 border rounded hover:bg-gray-50 disabled:opacity-50 text-sm",children:"Selanjutnya"})]})]})]})})]})}},3043:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>d});var s=r(5153);let a=(0,s.createProxy)(String.raw`D:\Project\Tumor Registry\tumor-registry\frontend\src\app\admin\audit\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,d=l}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[296,6905,3984],()=>r(3659));module.exports=s})();