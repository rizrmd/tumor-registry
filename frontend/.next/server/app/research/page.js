(()=>{var e={};e.id=9214,e.ids=[9214],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4630:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(482),a=s(9108),n=s(2563),i=s.n(n),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["research",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4709)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\research\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8549)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,8206)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\not-found.tsx"]}],c=["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\research\\page.tsx"],x="/research/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/research/page",pathname:"/research",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6093:(e,t,s)=>{Promise.resolve().then(s.bind(s,8424))},8424:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(2295),a=s(3729),n=s(3973),i=s(2528),l=s(9356);function o(){let{user:e,isAuthenticated:t,isLoading:s}=(0,n.useAuth)(),[o,d]=(0,a.useState)({totalRecords:0,filteredRecords:0,cancerTypes:0,avgAge:0}),[c,x]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[g,p]=(0,a.useState)({tumorType:"",stage:"",ageMin:"",ageMax:"",gender:"",yearFrom:"",yearTo:""}),[h,j]=(0,a.useState)(!0),[y,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!s&&!t){window.location.href="/login";return}t&&v()},[t,s]),(0,a.useEffect)(()=>{N()},[g,c]);let v=async()=>{try{j(!0);let e=(await (0,l.X4)({limit:1e3})).patients.map(e=>{let t=e.dateOfBirth?Math.floor((new Date().getTime()-new Date(e.dateOfBirth).getTime())/315576e5):0;return{id:e.id,inamsosRecordNumber:e.inamsosRecordNumber||"-",hospitalRecordNumber:e.hospitalRecordNumber||"-",tumorType:"bone_tumor"===e.pathologyType?"Tumor Tulang":"soft_tissue_tumor"===e.pathologyType?"Tumor Jaringan Lunak":e.pathologyType||"Tidak Diketahui",stage:e.ennekingStage||e.ajccStage||"-",age:t,gender:"MALE"===e.gender?"Laki-laki":"FEMALE"===e.gender?"Perempuan":"Lainnya",diagnosisDate:e.onsetDate?new Date(e.onsetDate).toLocaleDateString("id-ID"):"-",pathologyType:e.pathologyType||"-",grade:e.histopathologyGrade||"-"}});x(e),m(e);let t=new Set(e.map(e=>e.tumorType)).size,s=e.length>0?e.reduce((e,t)=>e+t.age,0)/e.length:0;d({totalRecords:e.length,filteredRecords:e.length,cancerTypes:t,avgAge:Math.round(s)})}catch(e){console.error("Error fetching research data:",e),alert("Gagal memuat data. Pastikan Anda sudah login.")}finally{j(!1)}},N=()=>{let e=[...c];g.tumorType&&(e=e.filter(e=>e.tumorType===g.tumorType)),g.stage&&(e=e.filter(e=>e.stage.includes(g.stage))),g.gender&&(e=e.filter(e=>e.gender===g.gender)),g.ageMin&&(e=e.filter(e=>e.age>=parseInt(g.ageMin))),g.ageMax&&(e=e.filter(e=>e.age<=parseInt(g.ageMax))),m(e),d(t=>({...t,filteredRecords:e.length}))},b=(e,t)=>{p(s=>({...s,[e]:t}))};return s||h?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,r.jsxs)(i.A,{children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Browse Data Penelitian"}),r.jsx("p",{className:"text-gray-600",children:"Akses dan analisis data kanker untuk penelitian"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>f(!y),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:[y?"Sembunyikan":"Tampilkan"," Filter"]}),r.jsx("button",{onClick:()=>{alert("Exporting data...\nFitur ini akan segera diimplementasikan.")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Export Data"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalRecords})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtered Records"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filteredRecords})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cancer Types"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.cancerTypes})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Age"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.avgAge})]})]})})]}),y&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Data"}),r.jsx("button",{onClick:()=>{p({tumorType:"",stage:"",ageMin:"",ageMax:"",gender:"",yearFrom:"",yearTo:""})},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Reset Filter"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipe Patologi"}),(0,r.jsxs)("select",{value:g.tumorType,onChange:e=>b("tumorType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua"}),r.jsx("option",{value:"Tumor Tulang",children:"Tumor Tulang"}),r.jsx("option",{value:"Tumor Jaringan Lunak",children:"Tumor Jaringan Lunak"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enneking Stage"}),(0,r.jsxs)("select",{value:g.stage,onChange:e=>b("stage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua"}),r.jsx("option",{value:"IA",children:"Enneking IA"}),r.jsx("option",{value:"IB",children:"Enneking IB"}),r.jsx("option",{value:"IIA",children:"Enneking IIA"}),r.jsx("option",{value:"IIB",children:"Enneking IIB"}),r.jsx("option",{value:"III",children:"Enneking III"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Kelamin"}),(0,r.jsxs)("select",{value:g.gender,onChange:e=>b("gender",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua"}),r.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),r.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usia (Min-Max)"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"number",value:g.ageMin,onChange:e=>b("ageMin",e.target.value),placeholder:"Min",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),r.jsx("input",{type:"number",value:g.ageMax,onChange:e=>b("ageMax",e.target.value),placeholder:"Max",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Hasil Penelusuran (",u.length," records)"]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. MR"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipe Patologi"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usia"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis Kelamin"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Onset"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.inamsosRecordNumber}),r.jsx("div",{className:"text-xs text-gray-500",children:e.hospitalRecordNumber})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:e.tumorType})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.stage})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e.grade.includes("High")||e.grade.includes("high")?"bg-red-100 text-red-800":e.grade.includes("Low")||e.grade.includes("low")?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.grade})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[e.age," tahun"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:e.gender})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:e.diagnosisDate})})]},e.id))})]})}),0===u.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"mt-4 text-gray-500",children:"Tidak ada data yang sesuai dengan kriteria filter"})]})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},4709:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`D:\Project\Tumor Registry\INAMSOS Application Desktop\frontend\src\app\research\page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[7141,4192,2528,8527],()=>s(4630));module.exports=r})();