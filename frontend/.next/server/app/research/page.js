(()=>{var e={};e.id=9214,e.ids=[9214],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},6281:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4524:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(7096),a=s(6132),i=s(7284),n=s.n(i),o=s(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["research",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4722)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\research\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4775)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,5666)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\not-found.tsx"]}],c=["D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\research\\page.tsx"],m="/research/page",g={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/research/page",pathname:"/research",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6988:(e,t,s)=>{Promise.resolve().then(s.bind(s,2203))},2203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(3854),a=s(4218),i=s(5815),n=s(3984),o=s(264);function l(){let{user:e,isAuthenticated:t,isLoading:s}=(0,i.useAuth)(),[l,d]=(0,a.useState)({totalRecords:0,filteredRecords:0,cancerTypes:0,avgAge:0}),[c,m]=(0,a.useState)([]),[g,u]=(0,a.useState)([]),[p,x]=(0,a.useState)({tumorType:"",stage:"",ageMin:"",ageMax:"",gender:"",yearFrom:"",yearTo:""}),[h,y]=(0,a.useState)(!0),[f,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!s&&!t){window.location.href="/login";return}t&&v()},[t,s]),(0,a.useEffect)(()=>{b()},[p,c]);let v=async()=>{try{y(!0);let e=await (0,o.X4)({limit:1e3}),t=e.patients,s=t.map(e=>{let t=e.dateOfBirth?Math.floor((new Date().getTime()-new Date(e.dateOfBirth).getTime())/315576e5):0;return{id:e.id,inamsosRecordNumber:e.inamsosRecordNumber||"-",hospitalRecordNumber:e.hospitalRecordNumber||"-",tumorType:"bone_tumor"===e.pathologyType?"Tumor Tulang":"soft_tissue_tumor"===e.pathologyType?"Tumor Jaringan Lunak":e.pathologyType||"Tidak Diketahui",stage:e.ennekingStage||e.ajccStage||"-",age:t,gender:"MALE"===e.gender?"Laki-laki":"FEMALE"===e.gender?"Perempuan":"Lainnya",diagnosisDate:e.onsetDate?new Date(e.onsetDate).toLocaleDateString("id-ID"):"-",pathologyType:e.pathologyType||"-",grade:e.histopathologyGrade||"-"}});m(s),u(s);let r=new Set(s.map(e=>e.tumorType)).size,a=s.length>0?s.reduce((e,t)=>e+t.age,0)/s.length:0;d({totalRecords:s.length,filteredRecords:s.length,cancerTypes:r,avgAge:Math.round(a)})}catch(e){console.error("Error fetching research data:",e),alert("Gagal memuat data. Pastikan Anda sudah login.")}finally{y(!1)}},b=()=>{let e=[...c];p.tumorType&&(e=e.filter(e=>e.tumorType===p.tumorType)),p.stage&&(e=e.filter(e=>e.stage.includes(p.stage))),p.gender&&(e=e.filter(e=>e.gender===p.gender)),p.ageMin&&(e=e.filter(e=>e.age>=parseInt(p.ageMin))),p.ageMax&&(e=e.filter(e=>e.age<=parseInt(p.ageMax))),u(e),d(t=>({...t,filteredRecords:e.length}))},N=(e,t)=>{x(s=>({...s,[e]:t}))};return s||h?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,r.jsxs)(n.A,{children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Browse Data Penelitian"}),r.jsx("p",{className:"text-gray-600",children:"Akses dan analisis data kanker untuk penelitian"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>j(!f),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:[f?"Sembunyikan":"Tampilkan"," Filter"]}),r.jsx("button",{onClick:()=>{alert("Exporting data...\nFitur ini akan segera diimplementasikan.")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Export Data"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.totalRecords})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtered Records"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.filteredRecords})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cancer Types"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.cancerTypes})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Age"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.avgAge})]})]})})]}),f&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Data"}),r.jsx("button",{onClick:()=>{x({tumorType:"",stage:"",ageMin:"",ageMax:"",gender:"",yearFrom:"",yearTo:""})},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Reset Filter"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipe Patologi"}),(0,r.jsxs)("select",{value:p.tumorType,onChange:e=>N("tumorType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua"}),r.jsx("option",{value:"Tumor Tulang",children:"Tumor Tulang"}),r.jsx("option",{value:"Tumor Jaringan Lunak",children:"Tumor Jaringan Lunak"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enneking Stage"}),(0,r.jsxs)("select",{value:p.stage,onChange:e=>N("stage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua"}),r.jsx("option",{value:"IA",children:"Enneking IA"}),r.jsx("option",{value:"IB",children:"Enneking IB"}),r.jsx("option",{value:"IIA",children:"Enneking IIA"}),r.jsx("option",{value:"IIB",children:"Enneking IIB"}),r.jsx("option",{value:"III",children:"Enneking III"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Kelamin"}),(0,r.jsxs)("select",{value:p.gender,onChange:e=>N("gender",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua"}),r.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),r.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usia (Min-Max)"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"number",value:p.ageMin,onChange:e=>N("ageMin",e.target.value),placeholder:"Min",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),r.jsx("input",{type:"number",value:p.ageMax,onChange:e=>N("ageMax",e.target.value),placeholder:"Max",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Hasil Penelusuran (",g.length," records)"]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. MR"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipe Patologi"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usia"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis Kelamin"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Onset"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.inamsosRecordNumber}),r.jsx("div",{className:"text-xs text-gray-500",children:e.hospitalRecordNumber})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:e.tumorType})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.stage})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e.grade.includes("High")||e.grade.includes("high")?"bg-red-100 text-red-800":e.grade.includes("Low")||e.grade.includes("low")?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.grade})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[e.age," tahun"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:e.gender})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:e.diagnosisDate})})]},e.id))})]})}),0===g.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"mt-4 text-gray-500",children:"Tidak ada data yang sesuai dengan kriteria filter"})]})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},264:(e,t,s)=>{"use strict";async function r(e,t={}){let s={"Content-Type":"application/json",...t.headers},r=await fetch(`http://localhost:3001/api/v1${e}`,{...t,headers:s});if(!r.ok){if(401===r.status)throw Error("Session expired. Please login again.");let e=await r.json().catch(()=>({message:`HTTP ${r.status}: ${r.statusText}`}));if(400===r.status&&e.error?.details?.some(e=>"Unauthorized"===e.message))throw Error("Session expired. Please login again.");throw Error(e.message||"API request failed")}return r.json()}async function a(e){return r("/patients",{method:"POST",body:JSON.stringify(e)})}async function i(e,t){return r(`/patients/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async function n(e){return r(`/patients/${e}`)}async function o(e){let t=new URLSearchParams;return e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.search&&t.append("search",e.search),e?.centerId&&t.append("centerId",e.centerId),r(`/patients?${t.toString()}`)}async function l(e){return r(`/patients/${e}`,{method:"DELETE"})}s.d(t,{X4:()=>o,ZP:()=>d});let d={create:a,update:i,getById:n,getAll:o,delete:l,transformWizardData:function(e){let t=e.section1||{},s=e.section2||{},r=e.section3||{},a=e.section4||{},i=e.section5||{},n=e.section6||{},o=e.section7||{},l=e.section8||{},d=e.section9||{};return{centerId:t.centerId||"",pathologyType:t.pathologyTypeId,hospitalRecordNumber:s.hospitalRecordNumber||`MR-${Date.now()}`,nik:s.nik||"",name:s.name||"",dateOfBirth:s.dateOfBirth||"",placeOfBirth:s.placeOfBirth,gender:s.gender||"",bloodType:s.bloodType,religion:s.religion,maritalStatus:s.maritalStatus,occupation:s.occupation,education:s.education,phone:s.phone,email:s.email,address:s.address,province:s.province,regency:s.regency,district:s.district,village:s.village,postalCode:s.postalCode,emergencyContact:s.emergencyContact,chiefComplaint:r.chiefComplaint,symptomOnset:r.symptomOnset,symptomDuration:r.symptomDuration,symptomDurationUnit:r.symptomDurationUnit,presentingSymptoms:r.presentingSymptoms,tumorSize:r.tumorSize,familyHistory:r.familyHistory,tumorSyndromeId:r.tumorSyndromeId,karnofskyScore:r.karnofskyScore,height:r.height,weight:r.weight,bmi:r.bmi,biopsyType:a.biopsyType,biopsyDate:a.biopsyDate,biopsyLocation:a.biopsyLocation,biopsySite:a.biopsySite,imagingStudies:a.imagingStudies,imagingDate:a.imagingDate,imagingFindings:a.imagingFindings,mirrelScore:a.mirrelScore,diagnosisDate:i.diagnosisDate,whoClassificationId:i.whoClassificationId,boneLocationId:i.boneLocationId,softTissueLocationId:i.softTissueLocationId,tumorGrade:i.tumorGrade,histopathology:i.histopathology,stagingSystem:n.stagingSystem,enneking:n.enneking,ajcc:n.ajcc,cpc:o.cpcHeld?{held:o.cpcHeld,date:o.cpcDate,location:o.cpcLocation,participants:o.participants,presentation:o.casePresentation,recommendations:o.recommendations,consensus:o.consensus,notes:o.notes}:void 0,treatment:{surgery:l.surgery,chemotherapy:l.chemotherapy,radiotherapy:l.radiotherapy,overallResponse:l.overallResponse},followUp:{visits:d.visits}}}}},4722:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=s(5153);let a=(0,r.createProxy)(String.raw`D:\Project\Tumor Registry\tumor-registry\frontend\src\app\research\page.tsx`),{__esModule:i,$$typeof:n}=a,o=a.default,l=o}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[296,6905,3984],()=>s(4524));module.exports=r})();