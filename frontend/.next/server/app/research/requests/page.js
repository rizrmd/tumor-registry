(()=>{var e={};e.id=606,e.ids=[606],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},161:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["research",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3263)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\research\\requests\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8549)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,8206)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\research\\requests\\page.tsx"],x="/research/requests/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/research/requests/page",pathname:"/research/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4010:(e,t,s)=>{Promise.resolve().then(s.bind(s,9184))},9184:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(2295),a=s(3729),i=s(2254),n=s(3973),l=s(2528),d=s(9998);function c(){let e=(0,i.useRouter)(),{user:t,isAuthenticated:s,isLoading:c}=(0,n.useAuth)(),[o,x]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[p,h]=(0,a.useState)(""),[g,j]=(0,a.useState)(!0),[f,N]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!c&&!s){window.location.href="/login";return}s&&y()},[s,c]),(0,a.useEffect)(()=>{p?u(o.filter(e=>e.status===p)):u(o)},[p,o]);let y=async()=>{try{j(!0);let e=(await d.Z.findAll()).map(e=>({id:e.requestNumber||e.id,title:e.title,requestedDate:e.submittedAt?new Date(e.submittedAt).toISOString().split("T")[0]:new Date(e.createdAt).toISOString().split("T")[0],status:w(e.status),dataType:"Anonymized",purpose:e.objectives||"",justification:e.researchAbstract||"",datasetDescription:Object.keys(e.requestedDataFields||{}).filter(t=>e.requestedDataFields[t]?.selected).join(", "),timeline:`${e.accessDurationMonths||0} months`,reviewerNotes:e.adminNotes}));x(e),u(e)}catch(e){console.error("Error fetching requests:",e)}finally{j(!1)}},w=e=>({DRAFT:"Draft",SUBMITTED:"Submitted",PENDING_REVIEW:"Under Review",UNDER_REVIEW:"Under Review",NEED_MORE_INFO:"Under Review",APPROVED:"Approved",APPROVED_WITH_CONDITIONS:"Approved",REJECTED:"Rejected",DATA_READY:"Approved",ACTIVE:"In Progress",COMPLETED:"Completed",EXPIRED:"Completed"})[e]||"Submitted",k=e=>{switch(e){case"Draft":default:return"bg-gray-100 text-gray-800";case"Submitted":return"bg-blue-100 text-blue-800";case"Under Review":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"In Progress":return"bg-purple-100 text-purple-800";case"Completed":return"bg-teal-100 text-teal-800"}},D=e=>{switch(e){case"Aggregate":return"bg-blue-50 text-blue-700";case"Anonymized":return"bg-green-50 text-green-700";case"Identified":return"bg-orange-50 text-orange-700";default:return"bg-gray-50 text-gray-700"}},q=e=>{v(e),N(!0)},A=e=>{x(t=>t.map(t=>t.id===e?{...t,status:"Submitted"}:t)),alert("Permintaan berhasil diajukan untuk review")},P=e=>{confirm("Apakah Anda yakin ingin membatalkan permintaan ini?")&&(x(t=>t.filter(t=>t.id!==e)),alert("Permintaan dibatalkan"))},S=e=>{alert(`Mengunduh data untuk permintaan ${e}...
Fitur download akan segera diimplementasikan.`)};return c||g?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?(0,r.jsxs)(l.A,{children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Permintaan Data Penelitian"}),r.jsx("p",{className:"text-gray-600",children:"Kelola permintaan akses data untuk penelitian"})]}),r.jsx("button",{onClick:()=>{e.push("/research/requests/new")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"+ Permintaan Baru"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Permintaan"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dalam Review"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(e=>"Under Review"===e.status||"Submitted"===e.status).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disetujui"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(e=>"Approved"===e.status).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-teal-100 rounded-lg",children:r.jsx("svg",{className:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Selesai"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(e=>"Completed"===e.status).length})]})]})})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter Status:"}),(0,r.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Semua Status"}),r.jsx("option",{value:"Draft",children:"Draft"}),r.jsx("option",{value:"Submitted",children:"Submitted"}),r.jsx("option",{value:"Under Review",children:"Under Review"}),r.jsx("option",{value:"Approved",children:"Approved"}),r.jsx("option",{value:"Rejected",children:"Rejected"}),r.jsx("option",{value:"In Progress",children:"In Progress"}),r.jsx("option",{value:"Completed",children:"Completed"})]}),p&&r.jsx("button",{onClick:()=>h(""),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Reset Filter"})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Permintaan Saya (",m.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Judul"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipe Data"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tujuan"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.id})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.title})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:e.requestedDate})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(e.status)}`,children:e.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${D(e.dataType)}`,children:e.dataType})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.purpose})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>q(e),className:"text-blue-600 hover:text-blue-900 font-medium",children:"Detail"}),"Draft"===e.status&&r.jsx("button",{onClick:()=>A(e.id),className:"text-purple-600 hover:text-purple-900 font-medium",children:"Submit"}),("Draft"===e.status||"Submitted"===e.status)&&r.jsx("button",{onClick:()=>P(e.id),className:"text-red-600 hover:text-red-900 font-medium",children:"Batal"}),("Approved"===e.status||"Completed"===e.status)&&r.jsx("button",{onClick:()=>S(e.id),className:"text-green-600 hover:text-green-900 font-medium",children:"Download"})]})})]},e.id))})]})}),0===m.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"mt-4 text-gray-500",children:"Tidak ada permintaan yang sesuai dengan filter"})]})]}),f&&b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Detail Permintaan"}),r.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Request ID"}),r.jsx("p",{className:"mt-1 text-gray-900 font-medium",children:b.id})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Judul"}),r.jsx("p",{className:"mt-1 text-gray-900",children:b.title})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tanggal Permintaan"}),r.jsx("p",{className:"mt-1 text-gray-900",children:b.requestedDate})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),r.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full ${k(b.status)}`,children:b.status})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tipe Data"}),r.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded ${D(b.dataType)}`,children:b.dataType})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tujuan Penelitian"}),r.jsx("p",{className:"mt-1 text-gray-900",children:b.purpose})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Justifikasi"}),r.jsx("p",{className:"mt-1 text-gray-900",children:b.justification})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Deskripsi Dataset"}),r.jsx("p",{className:"mt-1 text-gray-900",children:b.datasetDescription})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Timeline"}),r.jsx("p",{className:"mt-1 text-gray-900",children:b.timeline})]}),b.reviewerNotes&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("label",{className:"block text-sm font-medium text-blue-900",children:"Catatan Reviewer"}),r.jsx("p",{className:"mt-1 text-blue-800",children:b.reviewerNotes})]})]}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Tutup"})})]})})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},3263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`D:\Project\Tumor Registry\INAMSOS Application Desktop\frontend\src\app\research\requests\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[7141,4192,2528,4786],()=>s(161));module.exports=r})();