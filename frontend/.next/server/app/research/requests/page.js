(()=>{var e={};e.id=606,e.ids=[606],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},161:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=s(482),r=s(9108),i=s(2563),n=s.n(i),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["research",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3263)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\research\\requests\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8549)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,8206)),"D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\Project\\Tumor Registry\\INAMSOS Application Desktop\\frontend\\src\\app\\research\\requests\\page.tsx"],u="/research/requests/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/research/requests/page",pathname:"/research/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4010:(e,t,s)=>{Promise.resolve().then(s.bind(s,9184))},9184:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(2295),r=s(3729),i=s(2254),n=s(3973),l=s(4573),d=s(9998);function c(){let e=(0,i.useRouter)(),{user:t,isAuthenticated:s,isLoading:c}=(0,n.useAuth)(),[o,u]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[p,h]=(0,r.useState)(""),[g,j]=(0,r.useState)(!0),[f,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!c&&!s){window.location.href="/login";return}s&&N()},[s,c]),(0,r.useEffect)(()=>{p?m(o.filter(e=>e.status===p)):m(o)},[p,o]);let N=async()=>{try{j(!0);let e=(await d.Z.findAll()).map(e=>({id:e.requestNumber||e.id,title:e.title,requestedDate:e.submittedAt?new Date(e.submittedAt).toISOString().split("T")[0]:new Date(e.createdAt).toISOString().split("T")[0],status:w(e.status),dataType:"Anonymized",purpose:e.objectives||"",justification:e.researchAbstract||"",datasetDescription:Object.keys(e.requestedDataFields||{}).filter(t=>e.requestedDataFields[t]?.selected).join(", "),timeline:`${e.accessDurationMonths||0} months`,reviewerNotes:e.adminNotes}));u(e),m(e)}catch(e){console.error("Error fetching requests:",e)}finally{j(!1)}},w=e=>({DRAFT:"Draft",SUBMITTED:"Submitted",PENDING_REVIEW:"Under Review",UNDER_REVIEW:"Under Review",NEED_MORE_INFO:"Under Review",APPROVED:"Approved",APPROVED_WITH_CONDITIONS:"Approved",REJECTED:"Rejected",DATA_READY:"Approved",ACTIVE:"In Progress",COMPLETED:"Completed",EXPIRED:"Completed"})[e]||"Submitted",k=e=>{switch(e){case"Draft":default:return"bg-gray-100 text-gray-800";case"Submitted":return"bg-blue-100 text-blue-800";case"Under Review":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"In Progress":return"bg-purple-100 text-purple-800";case"Completed":return"bg-teal-100 text-teal-800"}},D=e=>{switch(e){case"Aggregate":return"bg-blue-50 text-blue-700";case"Anonymized":return"bg-green-50 text-green-700";case"Identified":return"bg-orange-50 text-orange-700";default:return"bg-gray-50 text-gray-700"}},q=e=>{b(e),y(!0)},A=e=>{u(t=>t.map(t=>t.id===e?{...t,status:"Submitted"}:t)),alert("Permintaan berhasil diajukan untuk review")},S=e=>{confirm("Apakah Anda yakin ingin membatalkan permintaan ini?")&&(u(t=>t.filter(t=>t.id!==e)),alert("Permintaan dibatalkan"))},P=e=>{alert(`Mengunduh data untuk permintaan ${e}...
Fitur download akan segera diimplementasikan.`)};return c||g?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?(0,a.jsxs)(l.A,{children:[a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Permintaan Data Penelitian"}),a.jsx("p",{className:"text-gray-600",children:"Kelola permintaan akses data untuk penelitian"})]}),a.jsx("button",{onClick:()=>{e.push("/research/requests/new")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"+ Permintaan Baru"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Permintaan"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:a.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dalam Review"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(e=>"Under Review"===e.status||"Submitted"===e.status).length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disetujui"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(e=>"Approved"===e.status).length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-teal-100 rounded-lg",children:a.jsx("svg",{className:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Selesai"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(e=>"Completed"===e.status).length})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter Status:"}),(0,a.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"Semua Status"}),a.jsx("option",{value:"Draft",children:"Draft"}),a.jsx("option",{value:"Submitted",children:"Submitted"}),a.jsx("option",{value:"Under Review",children:"Under Review"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Completed",children:"Completed"})]}),p&&a.jsx("button",{onClick:()=>h(""),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Reset Filter"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Permintaan Saya (",x.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Judul"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipe Data"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tujuan"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.id})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.title})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:e.requestedDate})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(e.status)}`,children:e.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${D(e.dataType)}`,children:e.dataType})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.purpose})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>q(e),className:"text-blue-600 hover:text-blue-900 font-medium",children:"Detail"}),"Draft"===e.status&&a.jsx("button",{onClick:()=>A(e.id),className:"text-purple-600 hover:text-purple-900 font-medium",children:"Submit"}),("Draft"===e.status||"Submitted"===e.status)&&a.jsx("button",{onClick:()=>S(e.id),className:"text-red-600 hover:text-red-900 font-medium",children:"Batal"}),("Approved"===e.status||"Completed"===e.status)&&a.jsx("button",{onClick:()=>P(e.id),className:"text-green-600 hover:text-green-900 font-medium",children:"Download"})]})})]},e.id))})]})}),0===x.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"mt-4 text-gray-500",children:"Tidak ada permintaan yang sesuai dengan filter"})]})]}),f&&v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Detail Permintaan"}),a.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Request ID"}),a.jsx("p",{className:"mt-1 text-gray-900 font-medium",children:v.id})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Judul"}),a.jsx("p",{className:"mt-1 text-gray-900",children:v.title})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tanggal Permintaan"}),a.jsx("p",{className:"mt-1 text-gray-900",children:v.requestedDate})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),a.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full ${k(v.status)}`,children:v.status})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tipe Data"}),a.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded ${D(v.dataType)}`,children:v.dataType})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tujuan Penelitian"}),a.jsx("p",{className:"mt-1 text-gray-900",children:v.purpose})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Justifikasi"}),a.jsx("p",{className:"mt-1 text-gray-900",children:v.justification})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Deskripsi Dataset"}),a.jsx("p",{className:"mt-1 text-gray-900",children:v.datasetDescription})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Timeline"}),a.jsx("p",{className:"mt-1 text-gray-900",children:v.timeline})]}),v.reviewerNotes&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900",children:"Catatan Reviewer"}),a.jsx("p",{className:"mt-1 text-blue-800",children:v.reviewerNotes})]})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Tutup"})})]})})})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},9998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(7530);class r{async create(e){return(await a.Z.post("/research-requests",e)).data}async update(e,t){return(await a.Z.patch(`/research-requests/${e}`,t)).data}async submit(e){return(await a.Z.post(`/research-requests/${e}/submit`)).data}async getAll(e){return(await a.Z.get("/research-requests",{params:e})).data}async findAll(e){return this.getAll(e)}async getPending(){return(await a.Z.get("/research-requests/pending")).data}async estimatePatients(e){return(await a.Z.post("/research-requests/estimate",e)).data}async getOne(e){return(await a.Z.get(`/research-requests/${e}`)).data}async approveOrReject(e,t){return(await a.Z.post(`/research-requests/${e}/approve`,t)).data}async delete(e){await a.Z.delete(`/research-requests/${e}`)}getPresetDataFields(e){return({basic_research:{demographics:{selected:!0,justification:"Basic demographics for patient characterization",subFields:{age:!0,gender:!0,region:!0}},diagnosisClassification:{selected:!0,justification:"Diagnosis and classification for tumor type analysis"},stagingData:{selected:!0,justification:"Staging data for disease severity assessment"}},outcome_study:{diagnosisClassification:{selected:!0,justification:"Diagnosis for outcome stratification"},stagingData:{selected:!0,justification:"Staging for baseline disease severity"},treatmentManagement:{selected:!0,justification:"Treatment details for outcome correlation"},followUpOutcomes:{selected:!0,justification:"Follow-up data and MSTS scores for outcome measurement"}},survival_analysis:{demographics:{selected:!0,justification:"Age and demographics as survival predictors",subFields:{age:!0,gender:!0}},diagnosisClassification:{selected:!0,justification:"Tumor type and grade for survival analysis"},stagingData:{selected:!0,justification:"Stage is primary survival predictor"},treatmentManagement:{selected:!0,justification:"Treatment modality affects survival"},followUpOutcomes:{selected:!0,justification:"Survival status and duration",subFields:{survivalStatus:!0,survivalDuration:!0}}},treatment_comparison:{diagnosisClassification:{selected:!0,justification:"Diagnosis for treatment stratification"},stagingData:{selected:!0,justification:"Baseline staging for comparison groups"},treatmentManagement:{selected:!0,justification:"Treatment details for comparison"},followUpOutcomes:{selected:!0,justification:"Outcomes for treatment effectiveness comparison"}}})[e]||{}}async generateExport(e){return(await a.Z.post(`/research-requests/${e}/generate-export`)).data}async getDownloadUrl(e){return(await a.Z.get(`/research-requests/${e}/download`)).data}async requestExtension(e,t,s){return(await a.Z.post(`/research-requests/${e}/request-extension`,{extensionMonths:t,justification:s})).data}}let i=new r},3263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`D:\Project\Tumor Registry\INAMSOS Application Desktop\frontend\src\app\research\requests\page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4717,4192,4573],()=>s(161));module.exports=a})();