(()=>{var e={};e.id=3005,e.ids=[3005],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},6281:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4503:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=s(7096),i=s(6132),l=s(7284),a=s.n(l),n=s(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["follow-up",{children:["reminders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2189)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\follow-up\\reminders\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4775)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,5666)),"D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\Project\\Tumor Registry\\tumor-registry\\frontend\\src\\app\\follow-up\\reminders\\page.tsx"],x="/follow-up/reminders/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/follow-up/reminders/page",pathname:"/follow-up/reminders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1291:(e,t,s)=>{Promise.resolve().then(s.bind(s,4394))},4394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(3854),i=s(4218),l=s(5815),a=s(3984),n=s(1399),d=s(1018);function c(){let{user:e,isAuthenticated:t,isLoading:s}=(0,l.useAuth)(),c=(0,d.useRouter)(),[o,x]=(0,i.useState)(!0),[m,u]=(0,i.useState)([]),[p,h]=(0,i.useState)([]),[g,y]=(0,i.useState)(7),[j,b]=(0,i.useState)(new Set);(0,i.useEffect)(()=>{if(!s&&!t){c.push("/login");return}t&&f()},[t,s,c]);let f=async()=>{try{x(!0);let e=await n.Z.getAllVisits(void 0,"scheduled");u(e);let t=new Date,s=e.map(e=>{let s=new Date(e.scheduledDate),r=s.getTime()-t.getTime();return{id:e.id,patientId:e.patientId,patientName:e.patient?.name||"Unknown",mrNumber:e.patient?.hospitalRecordNumber||"-",visitNumber:e.visitNumber,scheduledDate:e.scheduledDate,daysUntil:Math.ceil(r/864e5),reminderSent:e.reminderSent||!1,status:e.reminderSent?"sent":"pending"}}).filter(e=>e.daysUntil<=30&&e.daysUntil>=-2).sort((e,t)=>e.daysUntil-t.daysUntil);h(s)}catch(e){console.error("Error loading reminder data:",e)}finally{x(!1)}},N=e=>{let t=new Set(j);t.has(e)?t.delete(e):t.add(e),b(t)},w=()=>{let e=p.filter(e=>e.daysUntil<=g).map(e=>e.id);b(new Set(e))},v=()=>{b(new Set)},S=async()=>{try{x(!0);let e=Array.from(j);for(let t of e)await n.Z.updateVisit(t,{reminderSent:!0,reminderDate:new Date().toISOString(),reminderMethod:"Manual/Email"});alert(`✅ Success!

${j.size} reminders have been tracked as SENT manually.

Note: Automated sending via SMS/WhatsApp is still in development.`),await f(),v()}catch(e){console.error("Error sending reminders:",e),alert("Error updating reminder status. Please try again.")}finally{x(!1)}},D=e=>e<=1?r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Urgent"}):e<=3?r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:"High"}):e<=7?r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Medium"}):r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Low"}),k=p.filter(e=>e.daysUntil<=g);return s||o?r.jsx(a.A,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading reminder queue..."})]})})}):(0,r.jsxs)(a.A,{children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Follow-up Reminder Management"}),r.jsx("p",{className:"text-gray-600",children:"Automated reminder system for upcoming follow-up visits"})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-2xl mr-3",children:"\uD83D\uDEA7"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-yellow-900",children:"Feature In Development"}),r.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Automated SMS/Email reminder system requires backend integration with notification service. This page currently shows the reminder queue and allows manual tracking."})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total in Queue"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.length})]}),r.jsx("div",{className:"text-4xl",children:"\uD83D\uDCCB"})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Need Reminder"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:k.length})]}),r.jsx("div",{className:"text-4xl",children:"\uD83D\uDD14"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Within ",g," days"]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgent (≤3 days)"}),r.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:p.filter(e=>e.daysUntil<=3).length})]}),r.jsx("div",{className:"text-4xl",children:"\uD83D\uDEA8"})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Selected"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:j.size})]}),r.jsx("div",{className:"text-4xl",children:"✅"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reminder Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Send Reminder (Days Before Visit)"}),(0,r.jsxs)("select",{value:g,onChange:e=>y(parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:1,children:"1 day before"}),r.jsx("option",{value:3,children:"3 days before"}),r.jsx("option",{value:7,children:"7 days before"}),r.jsx("option",{value:14,children:"14 days before"}),r.jsx("option",{value:30,children:"30 days before"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Method"}),r.jsx("select",{disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:r.jsx("option",{children:"SMS + Email (Default)"})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Requires backend configuration"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Template"}),r.jsx("select",{disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:r.jsx("option",{children:"Default Template"})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Requires backend configuration"})]})]})]}),k.length>0&&r.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:w,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:["Select All (",k.length,")"]}),r.jsx("button",{onClick:v,className:"text-sm text-gray-600 hover:text-gray-800 font-medium",children:"Clear Selection"})]}),(0,r.jsxs)("button",{onClick:S,disabled:0===j.size,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:["\uD83D\uDCE7 Send Reminders (",j.size,")"]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Reminder Queue (",p.length," visits)"]})}),0===p.length?(0,r.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[r.jsx("div",{className:"text-6xl mb-4",children:"✉️"}),r.jsx("p",{className:"text-lg font-medium",children:"No upcoming visits"}),r.jsx("p",{className:"text-sm mt-2",children:"All visits are completed or scheduled beyond 30 days"})]}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:j.size===k.length&&k.length>0,onChange:()=>{j.size===k.length?v():w()},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MR Number"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visit #"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scheduled Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Until"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"checkbox",checked:j.has(e.id),onChange:()=>N(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.patientName})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:e.mrNumber})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:["Visit #",e.visitNumber]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:new Date(e.scheduledDate).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:`text-sm font-semibold ${e.daysUntil<=1?"text-red-600":e.daysUntil<=3?"text-orange-600":e.daysUntil<=7?"text-yellow-600":"text-gray-600"}`,children:0===e.daysUntil?"Today":1===e.daysUntil?"Tomorrow":`${e.daysUntil} days`})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D(e.daysUntil)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.reminderSent?r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Sent"}):r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"ℹ️ About Automated Reminders"}),(0,r.jsxs)("div",{className:"text-sm text-blue-800 space-y-2",children:[r.jsx("p",{children:r.jsx("strong",{children:"When implemented, the reminder system will:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[r.jsx("li",{children:"Automatically send SMS/Email reminders based on configured schedule"}),r.jsx("li",{children:"Track delivery status and failed attempts"}),r.jsx("li",{children:"Support custom reminder templates"}),r.jsx("li",{children:"Allow bulk reminder sending for multiple patients"}),r.jsx("li",{children:"Provide reminder history and analytics"}),r.jsx("li",{children:"Support WhatsApp Business API integration (optional)"})]}),r.jsx("p",{className:"mt-4",children:r.jsx("strong",{children:"Required Backend Services:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[r.jsx("li",{children:"SMS Gateway (Twilio, AWS SNS, or local provider)"}),r.jsx("li",{children:"Email Service (SendGrid, AWS SES, or SMTP)"}),r.jsx("li",{children:"Notification Queue (Bull/Redis)"}),r.jsx("li",{children:"Scheduled Jobs (Cron or Task Scheduler)"})]})]})]})]})}},1399:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(9914);class i{async generateSchedule(e){let t=await r.Z.post("/follow-ups/generate-schedule",e);return t.data}async createVisit(e){let t=await r.Z.post("/follow-ups",e);return t.data}async getAllVisits(e,t){let s={};e&&(s.patientId=e),t&&(s.status=t);let i=await r.Z.get("/follow-ups",{params:s});return i.data}async getVisitById(e){let t=await r.Z.get(`/follow-ups/${e}`);return t.data}async getVisitsByPatient(e){let t=await r.Z.get(`/follow-ups/patient/${e}`);return t.data}async getPatientSummary(e){let t=await r.Z.get(`/follow-ups/patient/${e}/summary`);return t.data}async updateVisit(e,t){let s=await r.Z.put(`/follow-ups/${e}`,t);return s.data}async deleteVisit(e){await r.Z.delete(`/follow-ups/${e}`)}getStatusColor(e){return({scheduled:"blue",completed:"green",missed:"red",cancelled:"gray"})[e]||"gray"}getClinicalStatusColor(e){return({NED:"green",AWD:"yellow",DOD:"red",DOC:"gray"})[e||""]||"gray"}}let l=new i},2189:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>l,default:()=>d});var r=s(5153);let i=(0,r.createProxy)(String.raw`D:\Project\Tumor Registry\tumor-registry\frontend\src\app\follow-up\reminders\page.tsx`),{__esModule:l,$$typeof:a}=i,n=i.default,d=n}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[296,6905,3984],()=>s(4503));module.exports=r})();